var _Mathmax=Math.max,_NumberparseInt=Number.parseInt,_MathPI=Math.PI,_Mathlog=Math.log,_Mathceil=Math.ceil,_Mathabs=Math.abs,_Mathpow=Math.pow,_Mathimul=Math.imul,_StringfromCodePoint=String.fromCodePoint,_Mathfloor=Math.floor,_StringfromCharCode=String.fromCharCode,_Mathmin=Math.min,fengari_web_cli_lua=function(T){function O(E){if(U[E])return U[E].exports;var I=U[E]={i:E,l:!1,exports:{}};return T[E].call(I.exports,I,I.exports,O),I.l=!0,I.exports}var U={};return O.m=T,O.c=U,O.i=function(E){return E},O.d=function(E,I,N){O.o(E,I)||Object.defineProperty(E,I,{configurable:!1,enumerable:!0,get:N})},O.n=function(E){var I=E&&E.__esModule?function(){return E['default']}:function(){return E};return O.d(I,'a',I),I},O.o=function(E,I){return Object.prototype.hasOwnProperty.call(E,I)},O.p='',O(O.s=60)}([function(T,O,U){'use strict';(function(E){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function I(de,ge){if(de===ge)return 0;for(var Le=de.length,Ae=ge.length,he=0,Te=_Mathmin(Le,Ae);he<Te;++he)if(de[he]!==ge[he]){Le=de[he],Ae=ge[he];break}return Le<Ae?-1:Ae<Le?1:0}function N(de){return E.Buffer&&'function'==typeof E.Buffer.isBuffer?E.Buffer.isBuffer(de):!!(null!=de&&de._isBuffer)}function P(de){return Object.prototype.toString.call(de)}function M(de){return!N(de)&&'function'==typeof E.ArrayBuffer&&('function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(de):!!de&&(!!(de instanceof DataView)||de.buffer&&de.buffer instanceof ArrayBuffer))}function K(de){if(ue.isFunction(de)){if(oe)return de.name;var ge=de.toString(),Le=ge.match(pe);return Le&&Le[1]}}function V(de,ge){return'string'==typeof de?de.length<ge?de:de.slice(0,ge):de}function F(de){if(oe||!ue.isFunction(de))return ue.inspect(de);var ge=K(de),Le=ge?': '+ge:'';return'[Function'+Le+']'}function H(de){return V(F(de.actual),128)+' '+de.operator+' '+V(F(de.expected),128)}function Y(de,ge,Le,Ae,he){throw new _e.AssertionError({message:Le,actual:de,expected:ge,operator:Ae,stackStartFunction:he})}function J(de,ge){de||Y(de,!0,ge,'==',_e.ok)}function q(de,ge,Le,Ae){if(de===ge)return!0;if(N(de)&&N(ge))return 0===I(de,ge);if(ue.isDate(de)&&ue.isDate(ge))return de.getTime()===ge.getTime();if(ue.isRegExp(de)&&ue.isRegExp(ge))return de.source===ge.source&&de.global===ge.global&&de.multiline===ge.multiline&&de.lastIndex===ge.lastIndex&&de.ignoreCase===ge.ignoreCase;if((null===de||'object'!=typeof de)&&(null===ge||'object'!=typeof ge))return Le?de==ge:de==ge;if(M(de)&&M(ge)&&P(de)===P(ge)&&!(de instanceof Float32Array||de instanceof Float64Array))return 0===I(new Uint8Array(de.buffer),new Uint8Array(ge.buffer));if(N(de)!==N(ge))return!1;Ae=Ae||{actual:[],expected:[]};var he=Ae.actual.indexOf(de);return-1!==he&&he===Ae.expected.indexOf(ge)||(Ae.actual.push(de),Ae.expected.push(ge),Q(de,ge,Le,Ae))}function W(de){return'[object Arguments]'==Object.prototype.toString.call(de)}function Q(de,ge,Le,Ae){if(null===de||void 0===de||null===ge||void 0===ge)return!1;if(ue.isPrimitive(de)||ue.isPrimitive(ge))return de===ge;if(Le&&Object.getPrototypeOf(de)!==Object.getPrototypeOf(ge))return!1;var he=W(de),Te=W(ge);if(he&&!Te||!he&&Te)return!1;if(he)return de=ne.call(de),ge=ne.call(ge),q(de,ge,Le);var xe=ce(de),Oe=ce(ge),Ue,Ee;if(xe.length!==Oe.length)return!1;for(xe.sort(),Oe.sort(),Ee=xe.length-1;0<=Ee;Ee--)if(xe[Ee]!==Oe[Ee])return!1;for(Ee=xe.length-1;0<=Ee;Ee--)if(Ue=xe[Ee],!q(de[Ue],ge[Ue],Le,Ae))return!1;return!0}function $(de,ge,Le){q(de,ge,!0)&&Y(de,ge,Le,'notDeepStrictEqual',$)}function ee(de,ge){if(!de||!ge)return!1;if('[object RegExp]'==Object.prototype.toString.call(ge))return ge.test(de);try{if(de instanceof ge)return!0}catch(Le){}return!Error.isPrototypeOf(ge)&&!0===ge.call({},de)}function te(de){var ge;try{de()}catch(Le){ge=Le}return ge}function ae(de,ge,Le,Ae){var he;if('function'!=typeof ge)throw new TypeError('"block" argument must be a function');'string'==typeof Le&&(Ae=Le,Le=null),he=te(ge),Ae=(Le&&Le.name?' ('+Le.name+').':'.')+(Ae?' '+Ae:'.'),de&&!he&&Y(he,Le,'Missing expected exception'+Ae);var Te='string'==typeof Ae,xe=!de&&ue.isError(he),Oe=!de&&he&&!Le;if((xe&&Te&&ee(he,Le)||Oe)&&Y(he,Le,'Got unwanted exception'+Ae),de&&he&&Le&&!ee(he,Le)||!de&&he)throw he}var ue=U(37),se=Object.prototype.hasOwnProperty,ne=Array.prototype.slice,oe=function(){return'foo'===function(){}.name}(),_e=T.exports=J,pe=/\s*function\s+([^\(\s]*)\s*/;_e.AssertionError=function(ge){this.name='AssertionError',this.actual=ge.actual,this.expected=ge.expected,this.operator=ge.operator,ge.message?(this.message=ge.message,this.generatedMessage=!1):(this.message=H(this),this.generatedMessage=!0);var Le=ge.stackStartFunction||Y;if(Error.captureStackTrace)Error.captureStackTrace(this,Le);else{var Ae=new Error;if(Ae.stack){var he=Ae.stack,Te=K(Le),xe=he.indexOf('\n'+Te);if(0<=xe){var Oe=he.indexOf('\n',xe+1);he=he.substring(Oe+1)}this.stack=he}}},ue.inherits(_e.AssertionError,Error),_e.fail=Y,_e.ok=J,_e.equal=function(ge,Le,Ae){ge!=Le&&Y(ge,Le,Ae,'==',_e.equal)},_e.notEqual=function(ge,Le,Ae){ge==Le&&Y(ge,Le,Ae,'!=',_e.notEqual)},_e.deepEqual=function(ge,Le,Ae){q(ge,Le,!1)||Y(ge,Le,Ae,'deepEqual',_e.deepEqual)},_e.deepStrictEqual=function(ge,Le,Ae){q(ge,Le,!0)||Y(ge,Le,Ae,'deepStrictEqual',_e.deepStrictEqual)},_e.notDeepEqual=function(ge,Le,Ae){q(ge,Le,!1)&&Y(ge,Le,Ae,'notDeepEqual',_e.notDeepEqual)},_e.notDeepStrictEqual=$,_e.strictEqual=function(ge,Le,Ae){ge!==Le&&Y(ge,Le,Ae,'===',_e.strictEqual)},_e.notStrictEqual=function(ge,Le,Ae){ge===Le&&Y(ge,Le,Ae,'!==',_e.notStrictEqual)},_e.throws=function(de,ge,Le){ae(!0,de,ge,Le)},_e.doesNotThrow=function(de,ge,Le){ae(!1,de,ge,Le)},_e.ifError=function(de){if(de)throw de};var ce=Object.keys||function(de){var ge=[];for(var Le in de)se.call(de,Le)&&ge.push(Le);return ge}}).call(O,U(21))},function(T,O,U){'use strict';const E=U(0),I=U(13),N=[];for(let st=0;127>st;st++)N[_StringfromCharCode(st)]=st;T.exports.char=N;const M='5',K='3',F='4',H='Lua '+M+'.'+K,Y=H+'.'+F,J=Y+'  Copyright (C) 1994-2017 Lua.org, PUC-Rio',W='0',Q='0',ee='1',te='Fengari '+W+'.'+Q,ae=te+'.'+ee,ue='B. Giannangeli, Daurnimator',ne='_'+M+'_'+K,oe='LUA_INIT',ce={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};ce.LUA_TSHRSTR=0|ce.LUA_TSTRING,ce.LUA_TLNGSTR=16|ce.LUA_TSTRING,ce.LUA_TNUMFLT=0|ce.LUA_TNUMBER,ce.LUA_TNUMINT=16|ce.LUA_TNUMBER,ce.LUA_TLCL=0|ce.LUA_TFUNCTION,ce.LUA_TLCF=16|ce.LUA_TFUNCTION,ce.LUA_TCCL=32|ce.LUA_TFUNCTION;const Me=-I.LUAI_MAXSTACK-1e3,Ke=2,Ge=function(st){return Array.isArray(st)},Fe={},Xe=0,He=1,Ye=2,ze=3;T.exports.LUA_PATH_SEP=';',T.exports.LUA_PATH_MARK='?',T.exports.LUA_EXEC_DIR='!';const ut=M+'.'+K;T.exports.LUA_VDIR=ut;{T.exports.LUA_DIRSEP='/';const nt='./lua/'+ut+'/';T.exports.LUA_LDIR=nt;const ot='./lua/'+ut+'/';T.exports.LUA_CDIR=ot,T.exports.LUA_PATH_DEFAULT=nt+'?.lua;'+nt+'?/init.lua;'+ot+'?.lua;'+ot+'?/init.lua;./?.lua;./?/init.lua',T.exports.LUA_CPATH_DEFAULT=ot+'?.js;'+ot+'loadall.js;./?.js'}T.exports.CT=ce,T.exports.FENGARI_AUTHORS=ue,T.exports.FENGARI_COPYRIGHT=ae+'  Copyright (C) 2017 '+ue+'\nBased on: '+J,T.exports.FENGARI_RELEASE=ae,T.exports.FENGARI_VERSION=te,T.exports.FENGARI_VERSION_MAJOR=W,T.exports.FENGARI_VERSION_MINOR=Q,T.exports.FENGARI_VERSION_NUM=1,T.exports.FENGARI_VERSION_RELEASE=ee,T.exports.LUA_AUTHORS='R. Ierusalimschy, L. H. de Figueiredo, W. Celes',T.exports.LUA_COPYRIGHT=J,T.exports.LUA_HOOKCALL=Xe,T.exports.LUA_HOOKCOUNT=ze,T.exports.LUA_HOOKLINE=Ye,T.exports.LUA_HOOKRET=He,T.exports.LUA_HOOKTAILCALL=4,T.exports.LUA_INITVARVERSION=oe+ne,T.exports.LUA_INIT_VAR=oe,T.exports.LUA_MASKCALL=1<<Xe,T.exports.LUA_MASKCOUNT=1<<ze,T.exports.LUA_MASKLINE=1<<Ye,T.exports.LUA_MASKRET=1<<He,T.exports.LUA_MINSTACK=20,T.exports.LUA_MULTRET=-1,T.exports.LUA_OPADD=0,T.exports.LUA_OPBAND=7,T.exports.LUA_OPBNOT=13,T.exports.LUA_OPBOR=8,T.exports.LUA_OPBXOR=9,T.exports.LUA_OPDIV=5,T.exports.LUA_OPEQ=0,T.exports.LUA_OPIDIV=6,T.exports.LUA_OPLE=2,T.exports.LUA_OPLT=1,T.exports.LUA_OPMOD=3,T.exports.LUA_OPMUL=2,T.exports.LUA_OPPOW=4,T.exports.LUA_OPSHL=10,T.exports.LUA_OPSHR=11,T.exports.LUA_OPSUB=1,T.exports.LUA_OPUNM=12,T.exports.LUA_REGISTRYINDEX=Me,T.exports.LUA_RELEASE=Y,T.exports.LUA_RIDX_GLOBALS=Ke,T.exports.LUA_RIDX_LAST=Ke,T.exports.LUA_RIDX_MAINTHREAD=1,T.exports.LUA_SIGNATURE='\x1BLua',T.exports.LUA_VERSION=H,T.exports.LUA_VERSION_MAJOR=M,T.exports.LUA_VERSION_MINOR=K,T.exports.LUA_VERSION_NUM=503,T.exports.LUA_VERSION_RELEASE=F,T.exports.LUA_VERSUFFIX=ne,T.exports.constant_types=ce,T.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},T.exports.lua_upvalueindex=function(st){return Me-st},T.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},T.exports.is_luastring=Ge,T.exports.to_jsstring=function(st,nt,ot){E(Ge(st),'jsstring expect a array of bytes');let Lt=0,_t,it,pt,ct,dt,ft;st=st.slice(nt?nt:0,ot);for(var At='';;){if(_t=st[Lt++],0===_t){At+='\0';continue}if(!_t)return At;if(!(128&_t)){At+=_StringfromCharCode(_t);continue}if(it=63&st[Lt++],192==(224&_t)){At+=_StringfromCharCode((31&_t)<<6|it);continue}if(pt=63&st[Lt++],224==(240&_t)?_t=(15&_t)<<12|it<<6|pt:(ct=63&st[Lt++],240==(248&_t)?_t=(7&_t)<<18|it<<12|pt<<6|ct:(dt=63&st[Lt++],248==(252&_t)?_t=(3&_t)<<24|it<<18|pt<<12|ct<<6|dt:(ft=63&st[Lt++],_t=(1&_t)<<30|it<<24|pt<<18|ct<<12|dt<<6|ft))),65536>_t)At+=_StringfromCharCode(_t);else{var ht=_t-65536;At+=_StringfromCharCode(55296|ht>>10,56320|1023&ht)}}},T.exports.to_luastring=function(st,nt){if(E('string'==typeof st,'to_luastring expect a js string'),nt){let it=Fe[st];if(Ge(it))return it}let ot=[],_t=0;for(let it=0,pt;it<st.length;++it)pt=st.codePointAt(it),55296<=pt&&it++,127>=pt?ot[_t++]=pt:2047>=pt?(ot[_t++]=192|pt>>6,ot[_t++]=128|63&pt):65535>=pt?(ot[_t++]=224|pt>>12,ot[_t++]=128|63&pt>>6,ot[_t++]=128|63&pt):2097151>=pt?(ot[_t++]=240|pt>>18,ot[_t++]=128|63&pt>>12,ot[_t++]=128|63&pt>>6,ot[_t++]=128|63&pt):67108863>=pt?(ot[_t++]=248|pt>>24,ot[_t++]=128|63&pt>>18,ot[_t++]=128|63&pt>>12,ot[_t++]=128|63&pt>>6,ot[_t++]=128|63&pt):(ot[_t++]=252|pt>>30,ot[_t++]=128|63&pt>>24,ot[_t++]=128|63&pt>>18,ot[_t++]=128|63&pt>>12,ot[_t++]=128|63&pt>>6,ot[_t++]=128|63&pt);return nt&&(Fe[st]=ot),ot}},function(T,O,U){'use strict';const E=U(1),I=U(22),N=U(10),P=U(7),M=U(12);T.exports.FENGARI_AUTHORS=E.FENGARI_AUTHORS,T.exports.FENGARI_COPYRIGHT=E.FENGARI_COPYRIGHT,T.exports.FENGARI_RELEASE=E.FENGARI_RELEASE,T.exports.FENGARI_VERSION=E.FENGARI_VERSION,T.exports.FENGARI_VERSION_MAJOR=E.FENGARI_VERSION_MAJOR,T.exports.FENGARI_VERSION_MINOR=E.FENGARI_VERSION_MINOR,T.exports.FENGARI_VERSION_NUM=E.FENGARI_VERSION_NUM,T.exports.FENGARI_VERSION_RELEASE=E.FENGARI_VERSION_RELEASE,T.exports.LUA_AUTHORS=E.LUA_AUTHORS,T.exports.LUA_COPYRIGHT=E.LUA_COPYRIGHT,T.exports.LUA_ERRERR=E.thread_status.LUA_ERRERR,T.exports.LUA_ERRGCMM=E.thread_status.LUA_ERRGCMM,T.exports.LUA_ERRMEM=E.thread_status.LUA_ERRMEM,T.exports.LUA_ERRRUN=E.thread_status.LUA_ERRRUN,T.exports.LUA_ERRSYNTAX=E.thread_status.LUA_ERRSYNTAX,T.exports.LUA_HOOKCALL=E.LUA_HOOKCALL,T.exports.LUA_HOOKCOUNT=E.LUA_HOOKCOUNT,T.exports.LUA_HOOKLINE=E.LUA_HOOKLINE,T.exports.LUA_HOOKRET=E.LUA_HOOKRET,T.exports.LUA_HOOKTAILCALL=E.LUA_HOOKTAILCALL,T.exports.LUA_INITVARVERSION=E.LUA_INITVARVERSION,T.exports.LUA_INIT_VAR=E.LUA_INIT_VAR,T.exports.LUA_MASKCALL=E.LUA_MASKCALL,T.exports.LUA_MASKCOUNT=E.LUA_MASKCOUNT,T.exports.LUA_MASKLINE=E.LUA_MASKLINE,T.exports.LUA_MASKRET=E.LUA_MASKRET,T.exports.LUA_MINSTACK=E.LUA_MINSTACK,T.exports.LUA_MULTRET=E.LUA_MULTRET,T.exports.LUA_NUMTAGS=E.LUA_NUMTAGS,T.exports.LUA_OK=E.thread_status.LUA_OK,T.exports.LUA_OPADD=E.LUA_OPADD,T.exports.LUA_OPBAND=E.LUA_OPBAND,T.exports.LUA_OPBNOT=E.LUA_OPBNOT,T.exports.LUA_OPBOR=E.LUA_OPBOR,T.exports.LUA_OPBXOR=E.LUA_OPBXOR,T.exports.LUA_OPDIV=E.LUA_OPDIV,T.exports.LUA_OPEQ=E.LUA_OPEQ,T.exports.LUA_OPIDIV=E.LUA_OPIDIV,T.exports.LUA_OPLE=E.LUA_OPLE,T.exports.LUA_OPLT=E.LUA_OPLT,T.exports.LUA_OPMOD=E.LUA_OPMOD,T.exports.LUA_OPMUL=E.LUA_OPMUL,T.exports.LUA_OPPOW=E.LUA_OPPOW,T.exports.LUA_OPSHL=E.LUA_OPSHL,T.exports.LUA_OPSHR=E.LUA_OPSHR,T.exports.LUA_OPSUB=E.LUA_OPSUB,T.exports.LUA_OPUNM=E.LUA_OPUNM,T.exports.LUA_REGISTRYINDEX=E.LUA_REGISTRYINDEX,T.exports.LUA_RELEASE=E.LUA_RELEASE,T.exports.LUA_RIDX_GLOBALS=E.LUA_RIDX_GLOBALS,T.exports.LUA_RIDX_LAST=E.LUA_RIDX_LAST,T.exports.LUA_RIDX_MAINTHREAD=E.LUA_RIDX_MAINTHREAD,T.exports.LUA_SIGNATURE=E.LUA_SIGNATURE,T.exports.LUA_TNONE=E.CT.LUA_TNONE,T.exports.LUA_TNIL=E.CT.LUA_TNIL,T.exports.LUA_TBOOLEAN=E.CT.LUA_TBOOLEAN,T.exports.LUA_TLIGHTUSERDATA=E.CT.LUA_TLIGHTUSERDATA,T.exports.LUA_TNUMBER=E.CT.LUA_TNUMBER,T.exports.LUA_TSTRING=E.CT.LUA_TSTRING,T.exports.LUA_TTABLE=E.CT.LUA_TTABLE,T.exports.LUA_TFUNCTION=E.CT.LUA_TFUNCTION,T.exports.LUA_TUSERDATA=E.CT.LUA_TUSERDATA,T.exports.LUA_TTHREAD=E.CT.LUA_TTHREAD,T.exports.LUA_VERSION=E.LUA_VERSION,T.exports.LUA_VERSION_MAJOR=E.LUA_VERSION_MAJOR,T.exports.LUA_VERSION_MINOR=E.LUA_VERSION_MINOR,T.exports.LUA_VERSION_NUM=E.LUA_VERSION_NUM,T.exports.LUA_VERSION_RELEASE=E.LUA_VERSION_RELEASE,T.exports.LUA_VERSUFFIX=E.LUA_VERSUFFIX,T.exports.LUA_YIELD=E.thread_status.LUA_YIELD,T.exports.lua_Debug=E.lua_Debug,T.exports.lua_upvalueindex=E.lua_upvalueindex,T.exports.to_jsstring=E.to_jsstring,T.exports.to_luastring=E.to_luastring,T.exports.LUA_CDIR=E.LUA_CDIR,T.exports.LUA_CPATH_DEFAULT=E.LUA_CPATH_DEFAULT,T.exports.LUA_EXEC_DIR=E.LUA_EXEC_DIR,T.exports.LUA_LDIR=E.LUA_LDIR,T.exports.LUA_PATH_DEFAULT=E.LUA_PATH_DEFAULT,T.exports.LUA_PATH_MARK=E.LUA_PATH_MARK,T.exports.LUA_PATH_SEP=E.LUA_PATH_SEP,T.exports.LUA_ROOT=E.LUA_ROOT,T.exports.LUA_SHRDIR=E.LUA_SHRDIR,T.exports.LUA_VDIR=E.LUA_VDIR,T.exports.LUA_DIRSEP=E.LUA_DIRSEP,T.exports.lua_absindex=I.lua_absindex,T.exports.lua_arith=I.lua_arith,T.exports.lua_atpanic=I.lua_atpanic,T.exports.lua_atnativeerror=I.lua_atnativeerror,T.exports.lua_call=I.lua_call,T.exports.lua_callk=I.lua_callk,T.exports.lua_checkstack=I.lua_checkstack,T.exports.lua_close=M.lua_close,T.exports.lua_compare=I.lua_compare,T.exports.lua_concat=I.lua_concat,T.exports.lua_copy=I.lua_copy,T.exports.lua_createtable=I.lua_createtable,T.exports.lua_dump=I.lua_dump,T.exports.lua_error=I.lua_error,T.exports.lua_gc=I.lua_gc,T.exports.lua_getallocf=I.lua_getallocf,T.exports.lua_getextraspace=I.lua_getextraspace,T.exports.lua_getfield=I.lua_getfield,T.exports.lua_getglobal=I.lua_getglobal,T.exports.lua_gethook=N.lua_gethook,T.exports.lua_gethookcount=N.lua_gethookcount,T.exports.lua_gethookmask=N.lua_gethookmask,T.exports.lua_geti=I.lua_geti,T.exports.lua_getinfo=N.lua_getinfo,T.exports.lua_getlocal=N.lua_getlocal,T.exports.lua_getmetatable=I.lua_getmetatable,T.exports.lua_getstack=N.lua_getstack,T.exports.lua_gettable=I.lua_gettable,T.exports.lua_gettop=I.lua_gettop,T.exports.lua_getupvalue=I.lua_getupvalue,T.exports.lua_getuservalue=I.lua_getuservalue,T.exports.lua_insert=I.lua_insert,T.exports.lua_isboolean=I.lua_isboolean,T.exports.lua_iscfunction=I.lua_iscfunction,T.exports.lua_isfunction=I.lua_isfunction,T.exports.lua_isinteger=I.lua_isinteger,T.exports.lua_islightuserdata=I.lua_islightuserdata,T.exports.lua_isnil=I.lua_isnil,T.exports.lua_isnone=I.lua_isnone,T.exports.lua_isnoneornil=I.lua_isnoneornil,T.exports.lua_isnumber=I.lua_isnumber,T.exports.lua_isproxy=I.lua_isproxy,T.exports.lua_isstring=I.lua_isstring,T.exports.lua_istable=I.lua_istable,T.exports.lua_isthread=I.lua_isthread,T.exports.lua_isuserdata=I.lua_isuserdata,T.exports.lua_isyieldable=P.lua_isyieldable,T.exports.lua_len=I.lua_len,T.exports.lua_load=I.lua_load,T.exports.lua_newstate=M.lua_newstate,T.exports.lua_newtable=I.lua_newtable,T.exports.lua_newthread=M.lua_newthread,T.exports.lua_newuserdata=I.lua_newuserdata,T.exports.lua_next=I.lua_next,T.exports.lua_pcall=I.lua_pcall,T.exports.lua_pcallk=I.lua_pcallk,T.exports.lua_pop=I.lua_pop,T.exports.lua_pushboolean=I.lua_pushboolean,T.exports.lua_pushcclosure=I.lua_pushcclosure,T.exports.lua_pushcfunction=I.lua_pushcfunction,T.exports.lua_pushfstring=I.lua_pushfstring,T.exports.lua_pushglobaltable=I.lua_pushglobaltable,T.exports.lua_pushinteger=I.lua_pushinteger,T.exports.lua_pushjsclosure=I.lua_pushjsclosure,T.exports.lua_pushjsfunction=I.lua_pushjsfunction,T.exports.lua_pushlightuserdata=I.lua_pushlightuserdata,T.exports.lua_pushliteral=I.lua_pushliteral,T.exports.lua_pushlstring=I.lua_pushlstring,T.exports.lua_pushnil=I.lua_pushnil,T.exports.lua_pushnumber=I.lua_pushnumber,T.exports.lua_pushstring=I.lua_pushstring,T.exports.lua_pushthread=I.lua_pushthread,T.exports.lua_pushvalue=I.lua_pushvalue,T.exports.lua_pushvfstring=I.lua_pushvfstring,T.exports.lua_rawequal=I.lua_rawequal,T.exports.lua_rawget=I.lua_rawget,T.exports.lua_rawgeti=I.lua_rawgeti,T.exports.lua_rawgetp=I.lua_rawgetp,T.exports.lua_rawlen=I.lua_rawlen,T.exports.lua_rawset=I.lua_rawset,T.exports.lua_rawseti=I.lua_rawseti,T.exports.lua_rawsetp=I.lua_rawsetp,T.exports.lua_register=I.lua_register,T.exports.lua_remove=I.lua_remove,T.exports.lua_replace=I.lua_replace,T.exports.lua_resume=P.lua_resume,T.exports.lua_rotate=I.lua_rotate,T.exports.lua_setallof=P.lua_setallof,T.exports.lua_setfield=I.lua_setfield,T.exports.lua_setglobal=I.lua_setglobal,T.exports.lua_sethook=N.lua_sethook,T.exports.lua_seti=I.lua_seti,T.exports.lua_setlocal=N.lua_setlocal,T.exports.lua_setmetatable=I.lua_setmetatable,T.exports.lua_settable=I.lua_settable,T.exports.lua_settop=I.lua_settop,T.exports.lua_setupvalue=I.lua_setupvalue,T.exports.lua_setuservalue=I.lua_setuservalue,T.exports.lua_status=I.lua_status,T.exports.lua_stringtonumber=I.lua_stringtonumber,T.exports.lua_toboolean=I.lua_toboolean,T.exports.lua_todataview=I.lua_todataview,T.exports.lua_tointeger=I.lua_tointeger,T.exports.lua_tointegerx=I.lua_tointegerx,T.exports.lua_tojsstring=I.lua_tojsstring,T.exports.lua_toljsstring=I.lua_toljsstring,T.exports.lua_tolstring=I.lua_tolstring,T.exports.lua_tonumber=I.lua_tonumber,T.exports.lua_tonumberx=I.lua_tonumberx,T.exports.lua_topointer=I.lua_topointer,T.exports.lua_toproxy=I.lua_toproxy,T.exports.lua_tostring=I.lua_tostring,T.exports.lua_tothread=I.lua_tothread,T.exports.lua_touserdata=I.lua_touserdata,T.exports.lua_type=I.lua_type,T.exports.lua_typename=I.lua_typename,T.exports.lua_upvalueid=I.lua_upvalueid,T.exports.lua_upvaluejoin=I.lua_upvaluejoin,T.exports.lua_version=I.lua_version,T.exports.lua_xmove=I.lua_xmove,T.exports.lua_yield=P.lua_yield,T.exports.lua_yieldk=P.lua_yieldk,T.exports.lua_tocfunction=I.lua_tocfunction},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(26),P=U(10),M=U(7),K=U(11),V=U(12),F=U(8),H=U(9),Y=U(13),J=U(16),q=U(6),W=U(15),Q=I.constant_types,$=I.char,ee=Q.LUA_NUMTAGS,te=Q.LUA_NUMTAGS+1;class ae{constructor(je,Xe){this.type=je,this.value=Xe}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(je){return this.type===je}checktype(je){return this.ttnov()===je}ttisnumber(){return this.checktype(Q.LUA_TNUMBER)}ttisfloat(){return this.checktag(Q.LUA_TNUMFLT)}ttisinteger(){return this.checktag(Q.LUA_TNUMINT)}ttisnil(){return this.checktag(Q.LUA_TNIL)}ttisboolean(){return this.checktag(Q.LUA_TBOOLEAN)}ttislightuserdata(){return this.checktag(Q.LUA_TLIGHTUSERDATA)}ttisstring(){return this.checktype(Q.LUA_TSTRING)}ttisshrstring(){return this.checktag(Q.LUA_TSHRSTR)}ttislngstring(){return this.checktag(Q.LUA_TLNGSTR)}ttistable(){return this.checktag(Q.LUA_TTABLE)}ttisfunction(){return this.checktype(Q.LUA_TFUNCTION)}ttisclosure(){return(31&this.type)===Q.LUA_TFUNCTION}ttisCclosure(){return this.checktag(Q.LUA_TCCL)}ttisLclosure(){return this.checktag(Q.LUA_TLCL)}ttislcf(){return this.checktag(Q.LUA_TLCF)}ttisfulluserdata(){return this.checktag(Q.LUA_TUSERDATA)}ttisthread(){return this.checktag(Q.LUA_TTHREAD)}ttisdeadkey(){return this.checktag(te)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(je){this.type=Q.LUA_TNUMFLT,this.value=je}chgfltvalue(je){E(this.type==Q.LUA_TNUMFLT),this.value=je}setivalue(je){this.type=Q.LUA_TNUMINT,this.value=je}chgivalue(je){E(this.type==Q.LUA_TNUMINT),this.value=je}setnilvalue(){this.type=Q.LUA_TNIL,this.value=void 0}setfvalue(je){this.type=Q.LUA_TLCF,this.value=je}setpvalue(je){this.type=Q.LUA_TLIGHTUSERDATA,this.value=je}setbvalue(je){this.type=Q.LUA_TBOOLEAN,this.value=je}setsvalue(je){this.type=Q.LUA_TLNGSTR,this.value=je}setuvalue(je){this.type=Q.LUA_TUSERDATA,this.value=je}setthvalue(je){this.type=Q.LUA_TTHREAD,this.value=je}setclLvalue(je){this.type=Q.LUA_TLCL,this.value=je}setclCvalue(je){this.type=Q.LUA_TCCL,this.value=je}sethvalue(je){this.type=Q.LUA_TTABLE,this.value=je}setdeadvalue(){this.type=te,this.value=null}setfrom(je){this.type=je.type,this.value=je.value}tsvalue(){return E(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(je,Xe){return I.to_jsstring(this.svalue(),je,Xe)}}const _e=function(je,Xe,He){je.stack[Xe].setsvalue(He)},pe=new ae(Q.LUA_TNIL,null);Object.freeze(pe),T.exports.luaO_nilobject=pe;class ce{constructor(je,Xe){this.id=je.l_G.id_counter++,this.p=null,this.nupvalues=Xe,this.upvals=Array(Xe)}}class de{constructor(je,Xe,He){for(this.id=je.l_G.id_counter++,this.f=Xe,this.nupvalues=He,this.upvalue=Array(He);He--;)this.upvalue[He]=new ae(Q.LUA_TNIL,null)}}class ge{constructor(je,Xe){this.id=je.l_G.id_counter++,this.metatable=null,this.uservalue=new ae(Q.LUA_TNIL,null),this.len=Xe,this.data=Object.create(null)}}const Ae=I.to_luastring('...',!0),he=I.to_luastring('[string "'),Te=I.to_luastring('"]'),Oe=function(je){return N.lisdigit(je)?je-$[0]:_StringfromCharCode(je).toLowerCase().charCodeAt(0)-$.a+10},Ue=8,be=function(je){let Xe=0,He=$[Y.lua_getlocaledecpoint()],Ye=0,ze=0,Je=0,Ze=0,We=!1,qe;for(;N.lisspace(je[Xe]);)Xe++;if((qe=je[Xe]===$['-'])?Xe++:je[Xe]===$['+']&&Xe++,je[Xe]!==$[0]||je[Xe+1]!==$.x&&je[Xe+1]!==$.X)return null;for(Xe+=2;;Xe++)if(je[Xe]===He){if(We)break;else We=!0;}else if(N.lisxdigit(je[Xe]))0==ze&&je[Xe]===$[0]?Je++:30>=++ze?Ye=16*Ye+Oe(je[Xe]):Ze++,We&&Ze--;else break;if(0==Je+ze)return null;if(Ze*=4,je[Xe]===$.p||je[Xe]===$.P){let Qe=0,$e;if(Xe++,($e=je[Xe]===$['-'])?Xe++:je[Xe]===$['+']&&Xe++,!N.lisdigit(je[Xe]))return null;for(;N.lisdigit(je[Xe]);)Qe=10*Qe+je[Xe++]-$[0];$e&&(Qe=-Qe),Ze+=Qe}for(qe&&(Ye=-Ye);N.lisspace(je[Xe]);)Xe++;return Xe===je.length?Y.ldexp(Ye,Ze):null},ke=function(je){let Xe=I.to_jsstring(je);if(!/^[\t\v\f \n\r]*[\+\-]?([0-9]+\.?[0-9]*|\.[0-9]*)([eE][\+\-]?[0-9]+)?[\t\v\f \n\r]*$/.test(Xe))return null;let He=parseFloat(Xe);return isNaN(He)?null:He},Re=function(je,Xe){return'x'===Xe?be(je):ke(je)},Se=function(je){let Xe=/[.xXnN]/g.exec(_StringfromCharCode(...je));Xe=Xe?Xe.index:null;let He=Xe?je[Xe]:null,Ye=He?_StringfromCharCode(He).toLowerCase():0;if('n'===Ye)return null;let ze=Re(je,Ye);return null===ze,ze},Ie=_Mathfloor(q.MAX_INT/10),Ne=q.MAX_INT%10,Ce=function(je){let Xe=0,He=0,Ye=!0,ze;for(;N.lisspace(je[Xe]);)Xe++;if((ze=je[Xe]===$['-'])?Xe++:je[Xe]===$['+']&&Xe++,je[Xe]===$[0]&&(je[Xe+1]===$.x||je[Xe+1]===$.X))for(Xe+=2;N.lisxdigit(je[Xe]);Xe++)He=0|16*He+Oe(je[Xe]),Ye=!1;else for(;N.lisdigit(je[Xe]);Xe++){let Je=je[Xe]-$[0];if(He>=Ie&&(He>Ie||Je>Ne+ze))return null;He=0|10*He+Je,Ye=!1}for(;N.lisspace(je[Xe]);)Xe++;return Ye||Xe!==je.length?null:0|(ze?-He:He)},ye=function(je,Xe){let He;if(Xe.ttisinteger())He=I.to_luastring(Y.lua_integer2str(Xe.value));else{let Ye=Y.lua_number2str(Xe.value);He=I.to_luastring(Ye),/^[-0123456789]+$/.test(Ye)&&(He.push($[Y.lua_getlocaledecpoint()]),He.push($[0]))}Xe.setsvalue(F.luaS_bless(je,He))},De=function(je,Xe){M.luaD_inctop(je),_e(je,je.top-1,F.luaS_new(je,Xe))},Ke=function(je,Xe,He){let Ye=0,ze=0,Je=0,Ze;for(;Ze=Xe.indexOf($['%'],ze),-1!=Ze;){switch(De(je,Xe.slice(ze,Ze)),Xe[Ze+1]){case $.s:let qe=He[Je++];null===qe&&(qe=I.to_luastring('(null)',!0)),De(je,qe);break;case $.c:let We=He[Je++];N.lisprint(We)?De(je,[We]):Be(je,I.to_luastring('<\\%d>',!0),We);break;case $.d:case $.I:M.luaD_inctop(je),je.stack[je.top-1].setivalue(He[Je++]),ye(je,je.stack[je.top-1]);break;case $.f:M.luaD_inctop(je),je.stack[je.top-1].setfltvalue(He[Je++]),ye(je,je.stack[je.top-1]);break;case $.p:let Qe=He[Je++];Qe instanceof V.lua_State||Qe instanceof H.Table||Qe instanceof ge||Qe instanceof ce||Qe instanceof de||Qe instanceof K.UpVal?De(je,I.to_luastring('0x'+Qe.id.toString(16))):De(je,I.to_luastring('<id NYI>'));break;case $.U:De(je,I.to_luastring(_StringfromCodePoint(He[Je++])));break;case $['%']:De(je,[$['%']]);break;default:P.luaG_runerror(je,I.to_luastring('invalid option \'%%%c\' to \'lua_pushfstring\''),Xe[Ze+1]);}Ye+=2,ze=Ze+2}return M.luaD_checkstack(je,1),De(je,Xe.slice(ze)),0<Ye&&J.luaV_concat(je,Ye+1),je.stack[je.top-1].svalue()},Be=function(je,Xe,...He){return Ke(je,Xe,He)},Ge=function(je,Xe,He,Ye){switch(Xe){case I.LUA_OPADD:return 0|He+Ye;case I.LUA_OPSUB:return 0|He-Ye;case I.LUA_OPMUL:return _Mathimul(He,Ye);case I.LUA_OPMOD:return J.luaV_mod(je,He,Ye);case I.LUA_OPIDIV:return J.luaV_div(je,He,Ye);case I.LUA_OPBAND:return He&Ye;case I.LUA_OPBOR:return He|Ye;case I.LUA_OPBXOR:return He^Ye;case I.LUA_OPSHL:return J.luaV_shiftl(He,Ye);case I.LUA_OPSHR:return J.luaV_shiftl(He,-Ye);case I.LUA_OPUNM:return 0|0-He;case I.LUA_OPBNOT:return -1^He;default:E(0);}},Ve=function(je,Xe,He,Ye){switch(Xe){case I.LUA_OPADD:return He+Ye;case I.LUA_OPSUB:return He-Ye;case I.LUA_OPMUL:return He*Ye;case I.LUA_OPDIV:return He/Ye;case I.LUA_OPPOW:return _Mathpow(He,Ye);case I.LUA_OPIDIV:return _Mathfloor(He/Ye);case I.LUA_OPUNM:return-He;case I.LUA_OPMOD:return q.luai_nummod(je,He,Ye);default:E(0);}};T.exports.CClosure=de,T.exports.LClosure=ce,T.exports.LUA_TDEADKEY=te,T.exports.LUA_TPROTO=ee,T.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},T.exports.TValue=ae,T.exports.Udata=ge,T.exports.UTF8BUFFSZ=Ue,T.exports.luaO_arith=function(je,Xe,He,Ye,ze){let Je='number'==typeof ze?je.stack[ze]:ze;switch(Xe){case I.LUA_OPBAND:case I.LUA_OPBOR:case I.LUA_OPBXOR:case I.LUA_OPSHL:case I.LUA_OPSHR:case I.LUA_OPBNOT:{let Ze,qe;if(!1!==(Ze=J.tointeger(He))&&!1!==(qe=J.tointeger(Ye)))return void Je.setivalue(Ge(je,Xe,Ze,qe));break}case I.LUA_OPDIV:case I.LUA_OPPOW:{let Ze,qe;if(!1!==(Ze=J.tonumber(He))&&!1!==(qe=J.tonumber(Ye)))return void Je.setfltvalue(Ve(je,Xe,Ze,qe));break}default:{let Ze,qe;if(He.ttisinteger()&&Ye.ttisinteger())return void Je.setivalue(Ge(je,Xe,He.value,Ye.value));if(!1!==(Ze=J.tonumber(He))&&!1!==(qe=J.tonumber(Ye)))return void Je.setfltvalue(Ve(je,Xe,Ze,qe));break}}E(null!==je),W.luaT_trybinTM(je,He,Ye,ze,Xe-I.LUA_OPADD+W.TMS.TM_ADD)},T.exports.luaO_chunkid=function(je,Xe){let He=je.length,Ye;if(je[0]===$['='])Ye=He<Xe?je.slice(1):je.slice(1,Xe);else if(je[0]===$['@'])He<=Xe?Ye=je.slice(1):(Xe-=Ae.length,Ye=Ae.concat(je.slice(1+He-Xe)));else{let ze=je.indexOf($['\n']);Ye=he,Xe-=he.length+Ae.length+Te.length+1,He<Xe&&-1===ze?Ye=Ye.concat(je,Te):(-1!==ze&&(He=ze),He>Xe&&(He=Xe),Ye=Ye.concat(je.slice(0,He),Ae,Te))}return Ye},T.exports.luaO_hexavalue=Oe,T.exports.luaO_int2fb=function(je){let Xe=0;if(8>je)return je;for(;128<=je;)je=je+15>>4,Xe+=4;for(;16<=je;)je=je+1>>1,Xe++;return Xe+1<<3|je-8},T.exports.luaO_pushfstring=Be,T.exports.luaO_pushvfstring=Ke,T.exports.luaO_str2num=function(je){let Xe=Ce(je);return null===Xe?(Xe=Se(je),null!=Xe&&new ae(Q.LUA_TNUMFLT,Xe)):new ae(Q.LUA_TNUMINT,Xe)},T.exports.luaO_tostring=ye,T.exports.luaO_utf8desc=function(je,Xe){let He=1;if(E(1114111>=Xe),128>Xe)je[Ue-1]=Xe;else{let Ye=63;do je[Ue-He++]=128|63&Xe,Xe>>=6,Ye>>=1;while(Xe>Ye);je[Ue-He]=~Ye<<1|Xe}return He},T.exports.luaO_utf8esc=function(je){let Xe=[],He=1;if(E(1114111>=je),128>je)Xe[Ue-1]=je;else{let Ye=63;do Xe[Ue-He++]=128|63&je,je>>=6,Ye>>=1;while(je>Ye);Xe[Ue-He]=~Ye<<1|je}return{buff:Xe,n:He}},T.exports.numarith=Ve,T.exports.pushobj2s=function(je,Xe){je.stack[je.top++]=new ae(Xe.type,Xe.value)},T.exports.pushsvalue2s=function(je,Xe){je.stack[je.top++]=new ae(Q.LUA_TLNGSTR,Xe)},T.exports.setobjs2s=function(je,Xe,He){je.stack[Xe].setfrom(je.stack[He])},T.exports.setobj2s=function(je,Xe,He){je.stack[Xe].setfrom(He)},T.exports.setsvalue2s=_e},function(T){T.exports=function(){throw new Error('define cannot be used indirect')}},function(T,O,U){'use strict';(function(E){const I=U(2),N='_LOADED',M=I.to_luastring('FILE*',!0),K=72,F=10,H=11,Y=function(ht,Tt,xt){if(0===xt||!I.lua_istable(ht,-1))return 0;for(I.lua_pushnil(ht);I.lua_next(ht,-2);){if(I.lua_type(ht,-2)===I.LUA_TSTRING){if(I.lua_rawequal(ht,Tt,-1))return I.lua_pop(ht,1),1;if(Y(ht,Tt,xt-1))return I.lua_remove(ht,-2),I.lua_pushliteral(ht,'.'),I.lua_insert(ht,-2),I.lua_concat(ht,3),1}I.lua_pop(ht,1)}return 0},J=function(ht,Tt){let xt=I.lua_gettop(ht);if(I.lua_getinfo(ht,['f'.charCodeAt(0)],Tt),I.lua_getfield(ht,I.LUA_REGISTRYINDEX,I.to_luastring(N,!0)),Y(ht,xt+1,2)){let Ot=I.lua_tostring(ht,-1);return I.to_jsstring(Ot).startsWith('_G.')&&(I.lua_pushstring(ht,Ot.slice(3)),I.lua_remove(ht,-2)),I.lua_copy(ht,-1,xt+1),I.lua_pop(ht,2),1}return I.lua_settop(ht,xt),0},q=function(ht,Tt){J(ht,Tt)?(I.lua_pushfstring(ht,I.to_luastring('function \'%s\''),I.lua_tostring(ht,-1)),I.lua_remove(ht,-2)):0===Tt.namewhat.length?Tt.what&&Tt.what[0]==='m'.charCodeAt(0)?I.lua_pushliteral(ht,'main chunk'):Tt.what&&Tt.what[0]!='C'.charCodeAt(0)?I.lua_pushfstring(ht,I.to_luastring('function <%s:%d>'),Tt.short_src,Tt.linedefined):I.lua_pushliteral(ht,'?'):I.lua_pushfstring(ht,I.to_luastring('%s \'%s\''),Tt.namewhat,Tt.name)},W=function(ht){let Tt=new I.lua_Debug,xt=1,Ot=1;for(;I.lua_getstack(ht,Ot,Tt);)xt=Ot,Ot*=2;for(;xt<Ot;){let Ut=_Mathfloor((xt+Ot)/2);I.lua_getstack(ht,Ut,Tt)?xt=Ut+1:Ot=Ut}return Ot-1},$=function(ht){throw new Error(`PANIC: unprotected error in call to Lua API (${I.lua_tojsstring(ht,-1)})`)},ee=function(ht,Tt,xt){let Ot=new I.lua_Debug;return I.lua_getstack(ht,0,Ot)?(I.lua_getinfo(ht,['n'.charCodeAt(0)],Ot),'method'===I.to_jsstring(Ot.namewhat)&&(Tt--,0===Tt))?ue(ht,I.to_luastring('calling \'%s\' on bad self (%s)'),Ot.name,xt):(null===Ot.name&&(Ot.name=J(ht,Ot)?I.lua_tostring(ht,-1):['?'.charCodeAt(0)]),ue(ht,I.to_luastring('bad argument #%d to \'%s\' (%s)'),Tt,Ot.name,xt)):ue(ht,I.to_luastring('bad argument #%d (%s)'),Tt,xt)},te=function(ht,Tt,xt){let Ot=qe(ht,Tt,I.to_luastring('__name',!0))===I.LUA_TSTRING?I.lua_tostring(ht,-1):I.lua_type(ht,Tt)===I.LUA_TLIGHTUSERDATA?I.to_luastring('light userdata',!0):he(ht,Tt),Ut=I.lua_pushfstring(ht,I.to_luastring('%s expected, got %s'),xt,Ot);return ee(ht,Tt,Ut)},ae=function(ht,Tt){let xt=new I.lua_Debug;return I.lua_getstack(ht,Tt,xt)&&(I.lua_getinfo(ht,I.to_luastring('Sl',!0),xt),0<xt.currentline)?void I.lua_pushfstring(ht,I.to_luastring('%s:%d: '),xt.short_src,xt.currentline):void I.lua_pushstring(ht,[])},ue=function(ht,Tt,...xt){return ae(ht,1),I.lua_pushvfstring(ht,Tt,xt),I.lua_concat(ht,2),I.lua_error(ht)},se=function(ht,Tt,xt,Ot){return Tt?(I.lua_pushboolean(ht,1),1):(I.lua_pushnil(ht),xt?I.lua_pushstring(ht,I.to_luastring(`${I.to_jsstring(xt)}: ${Ot.message}`)):I.lua_pushstring(ht,I.to_luastring(Ot.message)),I.lua_pushinteger(ht,-Ot.errno),3)},oe=function(ht,Tt){return I.lua_getfield(ht,I.LUA_REGISTRYINDEX,Tt)},ce=function(ht,Tt,xt){let Ot=I.lua_touserdata(ht,Tt);return null!==Ot&&I.lua_getmetatable(ht,Tt)?(oe(ht,xt),I.lua_rawequal(ht,-1,-2)||(Ot=null),I.lua_pop(ht,2),Ot):null},Le=function(ht,Tt,xt){te(ht,Tt,I.lua_typename(ht,xt))},he=function(ht,Tt){return I.lua_typename(ht,I.lua_type(ht,Tt))},Ue=function(ht,Tt){return Ee(ht,Tt,null)},Ee=function(ht,Tt){let xt=I.lua_tolstring(ht,Tt);return(null===xt||void 0===xt)&&Le(ht,Tt,I.LUA_TSTRING),xt},ve=function(ht,Tt,xt){return 0>=I.lua_type(ht,Tt)?xt:Ee(ht,Tt)},be=ve,ke=function(ht,Tt){I.lua_isnumber(ht,Tt)?ee(ht,Tt,I.to_luastring('number has no integer representation',!0)):Le(ht,Tt,I.LUA_TNUMBER)},Re=function(ht,Tt){let xt=I.lua_tonumberx(ht,Tt);return!1===xt&&Le(ht,Tt,I.LUA_TNUMBER),xt},Ie=function(ht,Tt){let xt=I.lua_tointeger(ht,Tt);return!1===xt&&ke(ht,Tt),xt},Ce=function(ht){return ht},Pe=function(ht,Tt){Tt.L=ht,Tt.b=[]},Ke=function(ht,Tt,xt){ht.b=ht.b.concat(Tt.slice(0,xt))},Be=Ke,we=function(ht){let Tt=ht.L;I.lua_pushstring(Tt,ht.b)},Ve=function(ht,Tt){ht.n+=Tt},Xe=function(ht,Tt,xt,Ot){return 0>=I.lua_type(ht,xt)?Ot:Tt(ht,xt)},He=function(ht,Tt){let xt=Tt.string;return Tt.string=null,xt},Ye=function(ht,Tt,xt,Ot,Ut){return I.lua_load(ht,He,{string:Tt},Ot,Ut)},ze=function(ht,Tt,xt,Ot){return Ye(ht,Tt,xt,Ot,null)},Je=function(ht,Tt){return ze(ht,Tt,Tt.length,Tt)},qe=function(ht,Tt,xt){if(!I.lua_getmetatable(ht,Tt))return I.LUA_TNIL;I.lua_pushstring(ht,xt);let Ot=I.lua_rawget(ht,-2);return Ot===I.LUA_TNIL&&I.lua_pop(ht,2),Ot},We=function(ht,Tt,xt){return(Tt=I.lua_absindex(ht,Tt),qe(ht,Tt,xt)!==I.LUA_TNIL)&&(I.lua_pushvalue(ht,Tt),I.lua_call(ht,1,1),!0)},lt=function(ht,Tt,xt){var Ot=xt>>>0,Ut=Tt.length,Et=ht.length+1-Ut;loop:for(;Ot<Et;Ot++){for(let vt=0;vt<Ut;vt++)if(ht[Ot+vt]!==Tt[vt])continue loop;return Ot}return-1},st=function(ht,Tt,xt){return I.lua_getfield(ht,Tt,xt)===I.LUA_TTABLE||(I.lua_pop(ht,1),Tt=I.lua_absindex(ht,Tt),I.lua_newtable(ht),I.lua_pushvalue(ht,-1),I.lua_setfield(ht,Tt,xt),!1)},nt=function(ht,Tt,xt){for(let Ot in ot(ht,xt,I.to_luastring('too many upvalues',!0)),Tt){for(let Ut=0;Ut<xt;Ut++)I.lua_pushvalue(ht,-xt);I.lua_pushcclosure(ht,Tt[Ot],xt),I.lua_setfield(ht,-(xt+2),I.to_luastring(Ot))}I.lua_pop(ht,xt)},ot=function(ht,Tt,xt){I.lua_checkstack(ht,Tt)||(xt?ue(ht,I.to_luastring('stack overflow (%s)'),xt):ue(ht,I.to_luastring('stack overflow',!0)))},ct=-1;T.exports.LUA_FILEHANDLE=M,T.exports.LUA_LOADED_TABLE=N,T.exports.LUA_NOREF=-2,T.exports.LUA_PRELOAD_TABLE='_PRELOAD',T.exports.LUA_REFNIL=ct,T.exports.luaL_Buffer=class{constructor(){this.b=null,this.L=null}},T.exports.luaL_addchar=function(ht,Tt){ht.b.push(Tt)},T.exports.luaL_addlstring=Ke,T.exports.luaL_addsize=Ve,T.exports.luaL_addstring=Be,T.exports.luaL_addvalue=function(ht){let Tt=ht.L,xt=I.lua_tostring(Tt,-1);Be(ht,xt),I.lua_remove(Tt,-1)},T.exports.luaL_argcheck=function(ht,Tt,xt,Ot){Tt||ee(ht,xt,Ot)},T.exports.luaL_argerror=ee,T.exports.luaL_buffinit=Pe,T.exports.luaL_buffinitsize=function(ht,Tt){return Pe(ht,Tt),Tt},T.exports.luaL_callmeta=We,T.exports.luaL_checkany=function(ht,Tt){I.lua_type(ht,Tt)===I.LUA_TNONE&&ee(ht,Tt,I.to_luastring('value expected',!0))},T.exports.luaL_checkinteger=Ie,T.exports.luaL_checklstring=Ee,T.exports.luaL_checknumber=Re,T.exports.luaL_checkoption=function(ht,Tt,xt,Ot){let Ut=xt?be(ht,Tt,xt):Ue(ht,Tt);for(let Et=0;Ot[Et];Et++)if(Ot[Et].join('|')===Ut.join('|'))return Et;return ee(ht,Tt,I.lua_pushfstring(ht,I.to_luastring('invalid option \'%s\''),Ut))},T.exports.luaL_checkstack=ot,T.exports.luaL_checkstring=Ue,T.exports.luaL_checktype=function(ht,Tt,xt){I.lua_type(ht,Tt)!==xt&&Le(ht,Tt,xt)},T.exports.luaL_checkudata=function(ht,Tt,xt){let Ot=ce(ht,Tt,xt);return null===Ot&&te(ht,Tt,xt),Ot},T.exports.luaL_checkversion=function(ht){let Tt=I.LUA_VERSION_NUM,Ot=I.lua_version(ht);K!=K,Ot==I.lua_version(null)?Ot!==Tt&&ue(ht,I.to_luastring('version mismatch: app. needs %f, Lua core provides %f'),Tt,Ot):ue(ht,I.to_luastring('multiple Lua VMs detected'))},T.exports.luaL_dostring=function(ht,Tt){return Je(ht,Tt)||I.lua_pcall(ht,0,I.LUA_MULTRET,0)},T.exports.luaL_error=ue,T.exports.luaL_execresult=function(ht,Tt){let xt,Ot;if(null===Tt)return I.lua_pushboolean(ht,1),I.lua_pushliteral(ht,'exit'),I.lua_pushinteger(ht,0),3;if(Tt.status)xt='exit',Ot=Tt.status;else if(Tt.signal)xt='signal',Ot=Tt.signal;else return se(ht,0,null,Tt);return I.lua_pushnil(ht),I.lua_pushliteral(ht,xt),I.lua_pushinteger(ht,Ot),3},T.exports.luaL_fileresult=se,T.exports.luaL_getmetafield=qe,T.exports.luaL_getmetatable=oe,T.exports.luaL_getsubtable=st,T.exports.luaL_gsub=function(ht,Tt,xt,Ot){let Et=[],Ut;for(;0<=(Ut=lt(Tt,xt));)Et.push(...Tt.slice(0,Ut)),Et.push(...Ot),Tt=Tt.slice(Ut+xt.length);return Et.push(...Tt),I.lua_pushstring(ht,Et),I.lua_tostring(ht,-1)},T.exports.luaL_len=function(ht,Tt){I.lua_len(ht,Tt);let xt=I.lua_tointegerx(ht,-1);return!1===xt&&ue(ht,I.to_luastring('object length is not an integer',!0)),I.lua_pop(ht,1),xt},T.exports.luaL_loadbuffer=ze,T.exports.luaL_loadbufferx=Ye,T.exports.luaL_loadstring=Je,T.exports.luaL_newlib=function(ht,Tt){I.lua_createtable(ht),nt(ht,Tt,0)},T.exports.luaL_newlibtable=function(ht){I.lua_createtable(ht)},T.exports.luaL_newmetatable=function(ht,Tt){return oe(ht,Tt)===I.LUA_TNIL?(I.lua_pop(ht,1),I.lua_createtable(ht,0,2),I.lua_pushstring(ht,Tt),I.lua_setfield(ht,-2,I.to_luastring('__name')),I.lua_pushvalue(ht,-1),I.lua_setfield(ht,I.LUA_REGISTRYINDEX,Tt),1):0},T.exports.luaL_newstate=function(){let ht=I.lua_newstate();return ht&&I.lua_atpanic(ht,$),ht},T.exports.luaL_opt=Xe,T.exports.luaL_optinteger=function(ht,Tt,xt){return Xe(ht,Ie,Tt,xt)},T.exports.luaL_optlstring=ve,T.exports.luaL_optnumber=function(ht,Tt,xt){return Xe(ht,Re,Tt,xt)},T.exports.luaL_optstring=be,T.exports.luaL_prepbuffer=function(ht){return Ce(ht,8192)},T.exports.luaL_prepbuffsize=Ce,T.exports.luaL_pushresult=we,T.exports.luaL_pushresultsize=function(ht,Tt){Ve(ht,Tt),we(ht)},T.exports.luaL_ref=function(ht,Tt){let xt;return I.lua_isnil(ht,-1)?(I.lua_pop(ht,1),ct):(Tt=I.lua_absindex(ht,Tt),I.lua_rawgeti(ht,Tt,0),xt=I.lua_tointeger(ht,-1),I.lua_pop(ht,1),0===xt?xt=I.lua_rawlen(ht,Tt)+1:(I.lua_rawgeti(ht,Tt,xt),I.lua_rawseti(ht,Tt,0)),I.lua_rawseti(ht,Tt,xt),xt)},T.exports.luaL_requiref=function(ht,Tt,xt,Ot){st(ht,I.LUA_REGISTRYINDEX,I.to_luastring(N)),I.lua_getfield(ht,-1,Tt),I.lua_toboolean(ht,-1)||(I.lua_pop(ht,1),I.lua_pushcfunction(ht,xt),I.lua_pushstring(ht,Tt),I.lua_call(ht,1,1),I.lua_pushvalue(ht,-1),I.lua_setfield(ht,-3,Tt)),I.lua_remove(ht,-2),Ot&&(I.lua_pushvalue(ht,-1),I.lua_setglobal(ht,Tt))},T.exports.luaL_setfuncs=nt,T.exports.luaL_setmetatable=function(ht,Tt){oe(ht,Tt),I.lua_setmetatable(ht,-2)},T.exports.luaL_testudata=ce,T.exports.luaL_tolstring=function(ht,Tt){if(We(ht,Tt,I.to_luastring('__tostring',!0)))I.lua_isstring(ht,-1)||ue(ht,I.to_luastring('\'__tostring\' must return a string',!0));else{let xt=I.lua_type(ht,Tt);switch(xt){case I.LUA_TNUMBER:{I.lua_isinteger(ht,Tt)?I.lua_pushfstring(ht,I.to_luastring('%I'),I.lua_tointeger(ht,Tt)):I.lua_pushfstring(ht,I.to_luastring('%f'),I.lua_tonumber(ht,Tt));break}case I.LUA_TSTRING:I.lua_pushvalue(ht,Tt);break;case I.LUA_TBOOLEAN:I.lua_pushliteral(ht,I.lua_toboolean(ht,Tt)?'true':'false');break;case I.LUA_TNIL:I.lua_pushliteral(ht,'nil');break;default:let Ot=qe(ht,Tt,I.to_luastring('__name',!0)),Ut=Ot===I.LUA_TSTRING?I.lua_tostring(ht,-1):he(ht,Tt);I.lua_pushfstring(ht,I.to_luastring('%s: %p'),Ut,I.lua_topointer(ht,Tt)),Ot!==I.LUA_TNIL&&I.lua_remove(ht,-2);}}return I.lua_tolstring(ht,-1)},T.exports.luaL_traceback=function(ht,Tt,xt,Ot){let Ut=new I.lua_Debug,Et=I.lua_gettop(ht),vt=W(Tt),bt=vt-Ot>F+H?F:-1;for(xt&&I.lua_pushfstring(ht,I.to_luastring('%s\n'),xt),ot(ht,10,null),I.lua_pushliteral(ht,'stack traceback:');I.lua_getstack(Tt,Ot++,Ut);)0==bt--?(I.lua_pushliteral(ht,'\n\t...'),Ot=vt-H+1):(I.lua_getinfo(Tt,I.to_luastring('Slnt',!0),Ut),I.lua_pushfstring(ht,I.to_luastring('\n\t%s:'),Ut.short_src),0<Ut.currentline&&I.lua_pushliteral(ht,`${Ut.currentline}:`),I.lua_pushliteral(ht,' in '),q(ht,Ut),Ut.istailcall&&I.lua_pushliteral(ht,'\n\t(...tail calls..)'),I.lua_concat(ht,I.lua_gettop(ht)-Et));I.lua_concat(ht,I.lua_gettop(ht)-Et)},T.exports.luaL_typename=he,T.exports.luaL_unref=function(ht,Tt,xt){0<=xt&&(Tt=I.lua_absindex(ht,Tt),I.lua_rawgeti(ht,Tt,0),I.lua_rawseti(ht,Tt,xt),I.lua_pushinteger(ht,xt),I.lua_rawseti(ht,Tt,0))},T.exports.luaL_where=ae,T.exports.lua_writestringerror=function(ht){E.stderr?E.stderr.write(ht):console.error(ht)}}).call(O,U(19))},function(T){'use strict';T.exports.LUAI_MAXCCALLS=200,T.exports.LUA_MAXINTEGER=2147483647,T.exports.LUA_MININTEGER=-2147483648,T.exports.luai_nummod=function(V,F,H){let Y=F%H;return 0>Y*H&&(Y+=H),Y},T.exports.MAX_INT=2147483647,T.exports.MIN_INT=-2147483648},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(22),P=U(10),M=U(11),K=U(6),V=U(3),F=U(14),H=U(31),Y=U(12),J=U(8),q=U(15),W=U(13),Q=U(46),$=U(16),ee=U(20),te=I.constant_types,ae=I.thread_status,ue=function(Xe,He){if(Xe.top<He)for(;Xe.top<He;)Xe.stack[Xe.top++]=new V.TValue(te.LUA_TNIL,null);else for(;Xe.top>He;)delete Xe.stack[--Xe.top]},se=function(Xe,He,Ye){let ze=Xe.top;for(;Xe.top<Ye+1;)Xe.stack[Xe.top++]=new V.TValue(te.LUA_TNIL,null);switch(He){case ae.LUA_ERRMEM:{V.setsvalue2s(Xe,Ye,J.luaS_newliteral(Xe,'not enough memory'));break}case ae.LUA_ERRERR:{V.setsvalue2s(Xe,Ye,J.luaS_newliteral(Xe,'error in error handling'));break}default:V.setobjs2s(Xe,Ye,ze-1);}for(;Xe.top>Ye+1;)delete Xe.stack[--Xe.top]},ne=W.LUAI_MAXSTACK+200,oe=function(Xe,He){E(He<=W.LUAI_MAXSTACK||He==ne),E(Xe.stack_last==Xe.stack.length-Y.EXTRA_STACK),Xe.stack.length=He,Xe.stack_last=He-Y.EXTRA_STACK},_e=function(Xe,He){let Ye=Xe.stack.length;if(Ye>W.LUAI_MAXSTACK)be(Xe,ae.LUA_ERRERR);else{let ze=Xe.top+He+Y.EXTRA_STACK,Je=2*Ye;Je>W.LUAI_MAXSTACK&&(Je=W.LUAI_MAXSTACK),Je<ze&&(Je=ze),Je>W.LUAI_MAXSTACK?(oe(Xe,ne),P.luaG_runerror(Xe,I.to_luastring('stack overflow',!0))):oe(Xe,Je)}},pe=function(Xe,He){Xe.stack_last-Xe.top<=He&&_e(Xe,He)},ce=function(Xe){let He=Xe.top;for(let Ye=Xe.ci;null!==Ye;Ye=Ye.previous)He<Ye.top&&(He=Ye.top);return E(He<=Xe.stack_last),He+1},de=function(Xe){let He=ce(Xe),Ye=He+_Mathfloor(He/8)+2*Y.EXTRA_STACK;Ye>W.LUAI_MAXSTACK&&(Ye=W.LUAI_MAXSTACK),Xe.stack.length>W.LUAI_MAXSTACK&&Y.luaE_freeCI(Xe),He<=W.LUAI_MAXSTACK-Y.EXTRA_STACK&&Ye<Xe.stack.length&&oe(Xe,Ye)},Le=function(Xe,He,Ye){let ze=Xe.stack[He];switch(ze.type){case te.LUA_TCCL:case te.LUA_TLCF:{let Je=ze.type===te.LUA_TCCL?ze.value.f:ze.value;pe(Xe,I.LUA_MINSTACK);let Ze=Y.luaE_extendCI(Xe);Ze.funcOff=He,Ze.nresults=Ye,Ze.func=ze,Ze.top=Xe.top+I.LUA_MINSTACK,E(Ze.top<=Xe.stack_last),Ze.callstatus=0,Xe.hookmask&I.LUA_MASKCALL&&Te(Xe,I.LUA_HOOKCALL,-1);let qe=Je(Xe);return E('number'==typeof qe&&0<=qe&&(0|qe)===qe,'invalid return value from JS function (expected integer)'),E(qe<Xe.top-Xe.ci.funcOff,'not enough elements in the stack'),Ae(Xe,Ze,Xe.top-qe,qe),!0}case te.LUA_TLCL:{let Ze=ze.value.p,qe=Xe.top-He-1,We=Ze.maxstacksize,Je;if(pe(Xe,We),Ze.is_vararg)Je=Oe(Xe,Ze,qe);else{for(;qe<Ze.numparams;qe++)Xe.stack[Xe.top++]=new V.TValue(te.LUA_TNIL,null);Je=He+1}let Qe=Y.luaE_extendCI(Xe);return Qe.funcOff=He,Qe.nresults=Ye,Qe.func=ze,Qe.l_base=Je,Qe.top=Je+We,ue(Xe,Qe.top),Qe.l_code=Ze.code,Qe.l_savedpc=0,Qe.callstatus=Y.CIST_LUA,Xe.hookmask&I.LUA_MASKCALL&&xe(Xe,Qe),!1}default:return pe(Xe,1),Ue(Xe,He,ze),Le(Xe,He,Ye);}},Ae=function(Xe,He,Ye,ze){let Je=He.nresults;Xe.hookmask&(I.LUA_MASKRET|I.LUA_MASKLINE)&&(Xe.hookmask&I.LUA_MASKRET&&Te(Xe,I.LUA_HOOKRET,-1),Xe.oldpc=He.previous.l_savedpc);let Ze=He.funcOff;return Xe.ci=He.previous,Xe.ci.next=null,he(Xe,Ye,Ze,ze,Je)},he=function(Xe,He,Ye,ze,Je){switch(Je){case 0:break;case 1:{0===ze?Xe.stack[Ye].setnilvalue():V.setobjs2s(Xe,Ye,He);break}case I.LUA_MULTRET:{for(let qe=0;qe<ze;qe++)V.setobjs2s(Xe,Ye+qe,He+qe);for(let qe=Xe.top;qe>=Ye+ze;qe--)delete Xe.stack[qe];return Xe.top=Ye+ze,!1}default:{let qe;if(Je<=ze)for(qe=0;qe<Je;qe++)V.setobjs2s(Xe,Ye+qe,He+qe);else{for(qe=0;qe<ze;qe++)V.setobjs2s(Xe,Ye+qe,He+qe);for(;qe<Je;qe++)Ye+qe>=Xe.top?Xe.stack[Ye+qe]=new V.TValue(te.LUAT_NIL,null):Xe.stack[Ye+qe].setnilvalue()}break}}let Ze=Ye+Je;for(let qe=Xe.top;qe>=Ze;qe--)delete Xe.stack[qe];return Xe.top=Ze,!0},Te=function(Xe,He,Ye){let ze=Xe.hook;if(ze&&Xe.allowhook){let Je=Xe.ci,Ze=Xe.top,qe=Je.top,We=new I.lua_Debug;We.event=He,We.currentline=Ye,We.i_ci=Je,pe(Xe,I.LUA_MINSTACK),Je.top=Xe.top+I.LUA_MINSTACK,E(Je.top<=Xe.stack_last),Xe.allowhook=0,Je.callstatus|=Y.CIST_HOOKED,ze(Xe,We),E(!Xe.allowhook),Xe.allowhook=1,Je.top=qe,ue(Xe,Ze),Je.callstatus&=~Y.CIST_HOOKED}},xe=function(Xe,He){let Ye=I.LUA_HOOKCALL;He.l_savedpc++,He.previous.callstatus&Y.CIST_LUA&&He.previous.l_code[He.previous.l_savedpc-1].opcode==F.OpCodesI.OP_TAILCALL&&(He.callstatus|=Y.CIST_TAIL,Ye=I.LUA_HOOKTAILCALL),Te(Xe,Ye,-1),He.l_savedpc--},Oe=function(Xe,He,Ye){let ze=He.numparams,Je=Xe.top-Ye,Ze=Xe.top,qe;for(qe=0;qe<ze&&qe<Ye;qe++)V.pushobj2s(Xe,Xe.stack[Je+qe]),Xe.stack[Je+qe].setnilvalue();for(;qe<ze;qe++)Xe.stack[Xe.top++]=new V.TValue(te.LUA_TNIL,null);return Ze},Ue=function(Xe,He,Ye){let ze=q.luaT_gettmbyobj(Xe,Ye,q.TMS.TM_CALL);ze.ttisfunction(ze)||P.luaG_typeerror(Xe,Ye,I.to_luastring('call',!0)),V.pushobj2s(Xe,Xe.stack[Xe.top-1]);for(let Je=Xe.top-2;Je>He;Je--)V.setobjs2s(Xe,Je,Je-1);V.setobj2s(Xe,He,ze)},Ee=function(Xe){Xe.nCcalls===K.LUAI_MAXCCALLS?P.luaG_runerror(Xe,I.to_luastring('JS stack overflow',!0)):Xe.nCcalls>=K.LUAI_MAXCCALLS+(K.LUAI_MAXCCALLS>>3)&&be(Xe,ae.LUA_ERRERR)},ve=function(Xe,He,Ye){++Xe.nCcalls>=K.LUAI_MAXCCALLS&&Ee(Xe),Le(Xe,He,Ye)||$.luaV_execute(Xe),Xe.nCcalls--},be=function(Xe,He){if(Xe.errorJmp)throw Xe.errorJmp.status=He,Xe.errorJmp;else{let Ye=Xe.l_G;if(Xe.status=He,Ye.mainthread.errorJmp)Ye.mainthread.stack[Ye.mainthread.top++]=Xe.stack[Xe.top-1],be(Ye.mainthread,He);else{let ze=Ye.panic;throw ze&&(se(Xe,He,Xe.top),Xe.ci.top<Xe.top&&(Xe.ci.top=Xe.top),ze(Xe)),new Error(`Aborted ${He}`)}}},ke=function(Xe,He,Ye){let ze=Xe.nCcalls,Je={status:ae.LUA_OK,previous:Xe.errorJmp};Xe.errorJmp=Je;try{He(Xe,Ye)}catch(Ze){if(Je.status===ae.LUA_OK){let qe=Xe.l_G.atnativeerror;if(qe)try{if(Je.status=ae.LUA_OK,N.lua_pushcfunction(Xe,qe),N.lua_pushlightuserdata(Xe,Ze),we(Xe,Xe.top-2,1),0!==Xe.errfunc){let We=Xe.errfunc;V.pushobj2s(Xe,Xe.stack[Xe.top-1]),V.setobjs2s(Xe,Xe.top-2,We),we(Xe,Xe.top-2,1)}Je.status=ae.LUA_ERRRUN}catch(We){Je.status===ae.LUA_OK&&(Je.status=-1)}else Je.status=-1}}return Xe.errorJmp=Je.previous,Xe.nCcalls=ze,Je.status},Re=function(Xe,He){let Ye=Xe.ci;E(null!==Ye.c_k&&0===Xe.nny),E(Ye.callstatus&Y.CIST_YPCALL||He===ae.LUA_YIELD),Ye.callstatus&ae.CIST_YPCALL&&(Ye.callstatus&=~ae.CIST_YPCALL,Xe.errfunc=Ye.c_old_errfunc),Ye.nresults===I.LUA_MULTRET&&Xe.ci.top<Xe.top&&(Xe.ci.top=Xe.top);let ze=Ye.c_k,Je=ze(Xe,He,Ye.c_ctx);E(Je<Xe.top-Xe.ci.funcOff,'not enough elements in the stack'),Ae(Xe,Ye,Xe.top-Je,Je)},Se=function(Xe,He){for(null!==He&&Re(Xe,He);Xe.ci!==Xe.base_ci;)Xe.ci.callstatus&Y.CIST_LUA?($.luaV_finishOp(Xe),$.luaV_execute(Xe)):Re(Xe,ae.LUA_YIELD)},Ie=function(Xe){for(let He=Xe.ci;null!==He;He=He.previous)if(He.callstatus&Y.CIST_YPCALL)return He;return null},Ne=function(Xe,He){let Ye=Ie(Xe);if(null===Ye)return 0;let ze=Ye.extra;return M.luaF_close(Xe,ze),se(Xe,He,ze),Xe.ci=Ye,Xe.allowhook=Ye.callstatus&Y.CIST_OAH,Xe.nny=0,de(Xe),Xe.errfunc=Ye.c_old_errfunc,1},Ce=function(Xe,He,Ye){let ze=J.luaS_newliteral(Xe,He);if(0===Ye)V.pushsvalue2s(Xe,ze),E(Xe.top<=Xe.ci.top,'stack overflow');else{for(let Je=1;Je<Ye;Je++)delete Xe.stack[--Xe.top];V.setsvalue2s(Xe,Xe.top-1,ze)}return ae.LUA_ERRRUN},Pe=function(Xe,He){let Ye=Xe.top-He,ze=Xe.ci;Xe.status===ae.LUA_OK?!Le(Xe,Ye-1,I.LUA_MULTRET)&&$.luaV_execute(Xe):(E(Xe.status===ae.LUA_YIELD),Xe.status=ae.LUA_OK,ze.funcOff=ze.extra,ze.func=Xe.stack[ze.funcOff],ze.callstatus&Y.CIST_LUA?$.luaV_execute(Xe):(null!==ze.c_k&&(He=ze.c_k(Xe,ae.LUA_YIELD,ze.c_ctx),E(He<Xe.top-Xe.ci.funcOff,'not enough elements in the stack'),Ye=Xe.top-He),Ae(Xe,ze,Ye,He)),Se(Xe,null))},De=function(Xe,He,Ye,ze){let Je=Xe.ci;return E(He<Xe.top-Xe.ci.funcOff,'not enough elements in the stack'),0<Xe.nny&&(Xe===Xe.l_G.mainthread?P.luaG_runerror(Xe,I.to_luastring('attempt to yield from outside a coroutine',!0)):P.luaG_runerror(Xe,I.to_luastring('attempt to yield across a JS-call boundary',!0))),Xe.status=ae.LUA_YIELD,Je.extra=Je.funcOff,Je.callstatus&Y.CIST_LUA?E(null===ze,'hooks cannot continue after yielding'):(Je.c_k=ze,null!==ze&&(Je.c_ctx=Ye),Je.funcOff=Xe.top-He-1,Je.func=Xe.stack[Je.funcOff],be(Xe,ae.LUA_YIELD)),E(Je.callstatus&Y.CIST_HOOKED),0},Be=function(Xe,He,Ye,ze,Je){let Ze=Xe.ci,qe=Xe.allowhook,We=Xe.nny,Qe=Xe.errfunc;Xe.errfunc=Je;let $e=ke(Xe,He,Ye);return $e!==ae.LUA_OK&&(M.luaF_close(Xe,ze),se(Xe,$e,ze),Xe.ci=Ze,Xe.allowhook=qe,Xe.nny=We,de(Xe)),Xe.errfunc=Qe,$e},we=function(Xe,He,Ye){Xe.nny++,ve(Xe,He,Ye),Xe.nny--};class Ge{constructor(Xe,He,Ye){this.z=Xe,this.buff=new ee.MBuffer,this.dyd=new H.Dyndata,this.mode=Ye,this.name=He}}const Ve=function(Xe,He,Ye){He&&-1===He.indexOf(Ye[0])&&(N.lua_pushstring(Xe,I.to_luastring(`attempt to load a ${I.to_jsstring(Ye)} chunk (mode is '${I.to_jsstring(He)}')`)),be(Xe,ae.LUA_ERRSYNTAX))},Fe=function(Xe,He){let ze=He.z.zgetc(),Ye;ze===I.LUA_SIGNATURE.charCodeAt(0)?(Ve(Xe,He.mode,I.to_luastring('binary',!0)),Ye=Q.luaU_undump(Xe,He.z,He.name)):(Ve(Xe,He.mode,I.to_luastring('text',!0)),Ye=H.luaY_parser(Xe,He.z,He.buff,He.dyd,He.name,ze)),E(Ye.nupvalues===Ye.p.upvalues.length),M.luaF_initupvals(Xe,Ye)};T.exports.adjust_top=ue,T.exports.luaD_call=ve,T.exports.luaD_callnoyield=we,T.exports.luaD_checkstack=pe,T.exports.luaD_growstack=_e,T.exports.luaD_hook=Te,T.exports.luaD_inctop=function(Xe){pe(Xe,1),Xe.stack[Xe.top++]=new V.TValue(te.LUA_TNIL,null)},T.exports.luaD_pcall=Be,T.exports.luaD_poscall=Ae,T.exports.luaD_precall=Le,T.exports.luaD_protectedparser=function(Xe,He,Ye,ze){let Je=new Ge(He,Ye,ze);Xe.nny++;let Ze=Be(Xe,Fe,Je,Xe.top,Xe.errfunc);return Xe.nny--,Ze},T.exports.luaD_rawrunprotected=ke,T.exports.luaD_reallocstack=oe,T.exports.luaD_throw=be,T.exports.lua_isyieldable=function(Xe){return 0===Xe.nny},T.exports.lua_resume=function(Xe,He,Ye){let ze=Xe.nny;if(Xe.status===ae.LUA_OK){if(Xe.ci!==Xe.base_ci)return Ce(Xe,'cannot resume non-suspended coroutine',Ye);}else if(Xe.status!==ae.LUA_YIELD)return Ce(Xe,'cannot resume dead coroutine',Ye);if(Xe.nCcalls=He?He.nCcalls+1:1,Xe.nCcalls>=K.LUAI_MAXCCALLS)return Ce(Xe,'JS stack overflow',Ye);Xe.nny=0,E((Xe.status===ae.LUA_OK?Ye+1:Ye)<Xe.top-Xe.ci.funcOff,'not enough elements in the stack');let Je=ke(Xe,Pe,Ye);if(-1===Je)Je=ae.LUA_ERRRUN;else{for(;Je>ae.LUA_YIELD&&Ne(Xe,Je);)Je=ke(Xe,Se,Je);Je>ae.LUA_YIELD?(Xe.status=Je,se(Xe,Je,Xe.top),Xe.ci.top=Xe.top):E(Je===Xe.status)}return Xe.nny=ze,Xe.nCcalls--,E(Xe.nCcalls===(He?He.nCcalls:0)),Je},T.exports.lua_yield=function(Xe,He){De(Xe,He,0,null)},T.exports.lua_yieldk=De},function(T,O,U){'use strict';const E=U(0),I=U(1);class N{constructor(Y,J){this.hash=null,this.realstring=J}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const M=function(Y){return E(I.is_luastring(Y)),Y.map((J)=>`${J}|`).join('')},V=function(Y,J){return new N(Y,J)};T.exports.luaS_eqlngstr=function(Y,J){return E(Y instanceof N),E(J instanceof N),Y==J||Y.realstring.length==J.realstring.length&&Y.realstring.join()==J.realstring.join()},T.exports.luaS_hash=M,T.exports.luaS_hashlongstr=function(Y){return E(Y instanceof N),null===Y.hash&&(Y.hash=M(Y.getstr())),Y.hash},T.exports.luaS_bless=V,T.exports.luaS_new=function(Y,J){return V(Y,J.slice(0))},T.exports.luaS_newliteral=function(Y,J){return V(Y,I.to_luastring(J))},T.exports.TString=N},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(10),P=U(3),M=U(8),K=U(12),V=I.constant_types;let F=new WeakMap;const H=function(ge){let Le=F.get(ge);return Le||(Le={},F.set(ge,Le)),Le},Y=function(ge,Le){switch(Le.type){case V.LUA_TNIL:return N.luaG_runerror(ge,I.to_luastring('table index is nil',!0));case V.LUA_TNUMFLT:if(isNaN(Le.value))return N.luaG_runerror(ge,I.to_luastring('table index is NaN',!0));case V.LUA_TNUMINT:case V.LUA_TBOOLEAN:case V.LUA_TTABLE:case V.LUA_TLCL:case V.LUA_TLCF:case V.LUA_TCCL:case V.LUA_TUSERDATA:case V.LUA_TTHREAD:return Le.value;case V.LUA_TSHRSTR:case V.LUA_TLNGSTR:return M.luaS_hashlongstr(Le.tsvalue());case V.LUA_TLIGHTUSERDATA:let Ae=Le.value;switch(typeof Ae){case'string':return'*'+Ae;case'number':return'#'+Ae;case'boolean':return Ae?'?true':'?false';case'function':return H(Ae);case'object':if(Ae instanceof K.lua_State&&Ae.l_G===ge.l_G||Ae instanceof J||Ae instanceof P.Udata||Ae instanceof P.LClosure||Ae instanceof P.CClosure)return H(Ae);default:return Ae;}default:throw new Error('unknown key type: '+Le.type);}};class J{constructor(ge){this.id=ge.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}}const W=function(ge,Le,Ae,he){ge.dead_strong.clear(),ge.dead_weak=void 0;let Te=null,xe={key:Ae,value:he,p:Te=ge.l,n:void 0};ge.f||(ge.f=xe),Te&&(Te.n=xe),ge.strong.set(Le,xe),ge.l=xe},Q=function(ge){return'object'==typeof ge?null!==ge:'function'==typeof ge},$=function(ge,Le){let Ae=ge.strong.get(Le);if(Ae){Ae.key.setdeadvalue(),Ae.value=void 0;let he=Ae.n,Te=Ae.p;Ae.p=void 0,Te&&(Te.n=he),he&&(he.p=Te),ge.f===Ae&&(ge.f=he),ge.l===Ae&&(ge.l=Te),ge.strong.delete(Le),Q(Le)?(!ge.dead_weak&&(ge.dead_weak=new WeakMap),ge.dead_weak.set(Le,Ae)):ge.dead_strong.set(Le,Ae)}},te=function(ge,Le){let Ae=ge.strong.get(Le);return Ae?Ae.value:P.luaO_nilobject},ae=function(ge,Le){return E('number'==typeof Le&&(0|Le)===Le),te(ge,Le)},ne=function(ge,Le,Ae){let he=ge.strong.get(Le);if(he)return he.value;let Te=Ae.value;Ae=Ae.ttisfloat()&&(0|Te)===Te?new P.TValue(V.LUA_TNUMINT,Te):new P.TValue(Ae.type,Te);let xe=new P.TValue(V.LUA_TNIL,null);return W(ge,Le,Ae,xe),xe};T.exports.invalidateTMcache=function(ge){ge.flags=0},T.exports.luaH_delete=function(ge,Le,Ae){E(Ae instanceof P.TValue);let he=Y(ge,Ae);return $(Le,he)},T.exports.luaH_get=function(ge,Le,Ae){return E(Ae instanceof P.TValue),Ae.ttisnil()||Ae.ttisfloat()&&isNaN(Ae.value)?P.luaO_nilobject:te(Le,Y(ge,Ae))},T.exports.luaH_getint=ae,T.exports.luaH_getn=function(ge){let Le=0,Ae=ge.strong.size+1;for(;1<Ae-Le;){let he=_Mathfloor((Le+Ae)/2);ae(ge,he).ttisnil()?Ae=he:Le=he}return Le},T.exports.luaH_getstr=function(ge,Le){return E(Le instanceof M.TString),te(ge,M.luaS_hashlongstr(Le))},T.exports.luaH_set=function(ge,Le,Ae){E(Ae instanceof P.TValue);let he=Y(ge,Ae);return ne(Le,he,Ae)},T.exports.luaH_setint=function(ge,Le,Ae){E('number'==typeof Le&&(0|Le)===Le&&Ae instanceof P.TValue);let he=Le;if(Ae.ttisnil())return void $(ge,he);let Te=ge.strong.get(he);if(Te){let xe=Te.value;xe.setfrom(Ae)}else{let xe=new P.TValue(V.LUA_TNUMINT,Le),Oe=new P.TValue(Ae.type,Ae.value);W(ge,he,xe,Oe)}},T.exports.luaH_new=function(ge){return new J(ge)},T.exports.luaH_next=function(ge,Le,Ae){let he=ge.stack[Ae],Te;if(he.type!==V.LUA_TNIL){let xe=Y(ge,he);if(Te=Le.strong.get(xe),!Te){if(Te=Le.dead_weak&&Le.dead_weak.get(xe)||Le.dead_strong.get(xe),!Te)return N.luaG_runerror(ge,I.to_luastring('invalid key to \'next\''));do if(Te=Te.n,!Te)return!1;while(Te.key.ttisdeadkey())}else if(Te=Te.n,!Te)return!1}else if(Te=Le.f,!Te)return!1;return P.setobj2s(ge,Ae,Te.key),P.setobj2s(ge,Ae+1,Te.value),!0},T.exports.Table=J},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(7),P=U(11),M=U(3),K=U(14),V=U(12),F=U(9),H=U(15),Y=U(13),J=U(16),q=I.constant_types,W=I.thread_status,Q=function(Be){return E(Be.callstatus&V.CIST_LUA),Be.l_savedpc-1},$=function(Be){return 0===Be.func.value.p.lineinfo.length?-1:Be.func.value.p.lineinfo[Q(Be)]},ee=function(Be){if(Be.status===W.LUA_YIELD){let we=Be.ci,Ge=we.funcOff;we.func=Be.stack[we.extra],we.funcOff=we.extra,we.extra=Ge}},oe=function(Be,we){E(we<Be.upvalues.length);let Ge=Be.upvalues[we].name;return null===Ge?['?'.charCodeAt(0)]:Ge.getstr()},_e=function(Be,we){let Ge=Be.func.value.p.numparams;return we>=Be.l_base-Be.funcOff-Ge?null:{pos:Be.funcOff+Ge+we,name:I.to_luastring('(*vararg)',!0)}},pe=function(Be,we,Ge){let Fe=null,Ve;if(we.callstatus&V.CIST_LUA){if(0>Ge)return _e(we,-Ge);Ve=we.l_base,Fe=P.luaF_getlocalname(we.func.value.p,Ge,Q(we))}else Ve=we.funcOff+1;if(null===Fe){let je=we===Be.ci?Be.top:we.next.funcOff;if(je-Ve>=Ge&&0<Ge)Fe=I.to_luastring('(*temporary)',!0);else return null}return{pos:Ve+(Ge-1),name:Fe}},ge=function(Be,we){if(null===we||we instanceof M.CClosure)Be.source=I.to_luastring('=[JS]',!0),Be.linedefined=-1,Be.lastlinedefined=-1,Be.what=['J'.charCodeAt(0)];else{let Ge=we.p;Be.source=Ge.source?Ge.source.getstr():I.to_luastring('=?',!0),Be.linedefined=Ge.linedefined,Be.lastlinedefined=Ge.lastlinedefined,Be.what=0===Be.linedefined?I.to_luastring('main',!0):I.to_luastring('Lua',!0)}Be.short_src=M.luaO_chunkid(Be.source,Y.LUA_IDSIZE)},Le=function(Be,we){if(null===we||we instanceof M.CClosure)Be.stack[Be.top]=new M.TValue(q.LUA_TNIL,null),Be.top++,E(Be.top<=Be.ci.top,'stack overflow');else{let Ge=we.p.lineinfo,Ve=F.luaH_new(Be);Be.stack[Be.top]=new M.TValue(q.LUA_TTABLE,Ve),Be.top++,E(Be.top<=Be.ci.top,'stack overflow');let Fe=new M.TValue(q.LUA_TBOOLEAN,!0);for(let je=0;je<Ge.length;je++)F.luaH_setint(Ve,Ge[je],Fe)}},Ae=function(Be,we){let Ge={name:null,funcname:null};return null===we?null:we.callstatus&V.CIST_FIN?(Ge.name=I.to_luastring('__gc',!0),Ge.funcname=I.to_luastring('metamethod',!0),Ge):!(we.callstatus&V.CIST_TAIL)&&we.previous.callstatus&V.CIST_LUA?ve(Be,we.previous):null},he=function(Be,we,Ge,Ve,Fe){let je=1;for(;0<we.length;we=we.slice(1))switch(_StringfromCharCode(we[0])){case'S':{ge(Ge,Ve);break}case'l':{Ge.currentline=Fe&&Fe.callstatus&V.CIST_LUA?$(Fe):-1;break}case'u':{Ge.nups=null===Ve?0:Ve.nupvalues,null===Ve||Ve instanceof M.CClosure?(Ge.isvararg=!0,Ge.nparams=0):(Ge.isvararg=Ve.p.is_vararg,Ge.nparams=Ve.p.numparams);break}case't':{Ge.istailcall=Fe?Fe.callstatus&V.CIST_TAIL:0;break}case'n':{let Xe=Ae(Be,Fe);null===Xe?(Ge.namewhat=[],Ge.name=null):(Ge.namewhat=Xe.funcname,Ge.name=Xe.name);break}case'L':case'f':break;default:je=0;}return je},xe=function(Be,we,Ge){let Ve={name:null,funcname:null};if(K.ISK(Ge)){let Fe=Be.k[K.INDEXK(Ge)];if(Fe.ttisstring())return Ve.name=Fe.svalue(),Ve}else{let Fe=Ee(Be,we,Ge);if(Fe&&Fe.funcname[0]==='c'.charCodeAt(0))return Fe}return Ve.name=[I.char['?']],Ve},Oe=function(Be,we){return Be<we?-1:Be},Ue=function(Be,we,Ge){let Ve=-1,Fe=0,je=K.OpCodesI;for(let Xe=0;Xe<we;Xe++){let He=Be.code[Xe],Ye=He.A;switch(He.opcode){case je.OP_LOADNIL:{let ze=He.B;Ye<=Ge&&Ge<=Ye+ze&&(Ve=Oe(Xe,Fe));break}case je.OP_TFORCALL:{Ge>=Ye+2&&(Ve=Oe(Xe,Fe));break}case je.OP_CALL:case je.OP_TAILCALL:{Ge>=Ye&&(Ve=Oe(Xe,Fe));break}case je.OP_JMP:{let ze=He.sBx,Je=Xe+1+ze;Xe<Je&&Je<=we&&Je>Fe&&(Fe=Je);break}default:K.testAMode(He.opcode)&&Ge===Ye&&(Ve=Oe(Xe,Fe));}}return Ve},Ee=function(Be,we,Ge){let Ve={name:P.luaF_getlocalname(Be,Ge+1,we),funcname:null};if(Ve.name)return Ve.funcname=I.to_luastring('local',!0),Ve;let Fe=Ue(Be,we,Ge),je=K.OpCodesI;if(-1!==Fe){let Xe=Be.code[Fe];switch(Xe.opcode){case je.OP_MOVE:{let He=Xe.B;if(He<Xe.A)return Ee(Be,Fe,He);break}case je.OP_GETTABUP:case je.OP_GETTABLE:{let He=Xe.C,Ye=Xe.B,ze=Xe.opcode===je.OP_GETTABLE?P.luaF_getlocalname(Be,Ye+1,Fe):oe(Be,Ye);return Ve.name=xe(Be,Fe,He).name,Ve.funcname=ze&&'_ENV'===I.to_jsstring(ze)?I.to_luastring('global',!0):I.to_luastring('field',!0),Ve}case je.OP_GETUPVAL:return Ve.name=oe(Be,Xe.B),Ve.funcname=I.to_luastring('upvalue',!0),Ve;case je.OP_LOADK:case je.OP_LOADKX:{let He=Xe.opcode===je.OP_LOADK?Xe.Bx:Be.code[Fe+1].Ax;if(Be.k[He].ttisstring())return Ve.name=Be.k[He].svalue(),Ve.funcname=I.to_luastring('constant',!0),Ve;break}case je.OP_SELF:{let He=Xe.C;return Ve.name=xe(Be,Fe,He).name,Ve.funcname=I.to_luastring('method',!0),Ve}default:}}return null},ve=function(Be,we){let Ge={name:null,funcname:null},Ve=0,Fe=we.func.value.p,je=Q(we),Xe=Fe.code[je],He=K.OpCodesI;if(we.callstatus&V.CIST_HOOKED)return Ge.name=[I.char['?']],Ge.funcname=I.to_luastring('hook',!0),Ge;switch(Xe.opcode){case He.OP_CALL:case He.OP_TAILCALL:return Ee(Fe,je,Xe.A);case He.OP_TFORCALL:return Ge.name=I.to_luastring('for iterator',!0),Ge.funcname=I.to_luastring('for iterator',!0),Ge;case He.OP_SELF:case He.OP_GETTABUP:case He.OP_GETTABLE:Ve=H.TMS.TM_INDEX;break;case He.OP_SETTABUP:case He.OP_SETTABLE:Ve=H.TMS.TM_NEWINDEX;break;case He.OP_ADD:Ve=H.TMS.TM_ADD;break;case He.OP_SUB:Ve=H.TMS.TM_SUB;break;case He.OP_MUL:Ve=H.TMS.TM_MUL;break;case He.OP_MOD:Ve=H.TMS.TM_MOD;break;case He.OP_POW:Ve=H.TMS.TM_POW;break;case He.OP_DIV:Ve=H.TMS.TM_DIV;break;case He.OP_IDIV:Ve=H.TMS.TM_IDIV;break;case He.OP_BAND:Ve=H.TMS.TM_BAND;break;case He.OP_BOR:Ve=H.TMS.TM_BOR;break;case He.OP_BXOR:Ve=H.TMS.TM_BXOR;break;case He.OP_SHL:Ve=H.TMS.TM_SHL;break;case He.OP_SHR:Ve=H.TMS.TM_SHR;break;case He.OP_UNM:Ve=H.TMS.TM_UNM;break;case He.OP_BNOT:Ve=H.TMS.TM_BNOT;break;case He.OP_LEN:Ve=H.TMS.TM_LEN;break;case He.OP_CONCAT:Ve=H.TMS.TM_CONCAT;break;case He.OP_EQ:Ve=H.TMS.TM_EQ;break;case He.OP_LT:Ve=H.TMS.TM_LT;break;case He.OP_LE:Ve=H.TMS.TM_LE;break;default:return null;}return Ge.name=Be.l_G.tmname[Ve].getstr(),Ge.funcname=I.to_luastring('metamethod',!0),Ge},be=function(Be,we,Ge){for(let Ve=we.l_base;Ve<we.top;Ve++)if(Be.stack[Ve]===Ge)return Ve;return!1},ke=function(Be,we,Ge){let Ve=we.func.value;for(let Fe=0;Fe<Ve.nupvalues;Fe++)if(Ve.upvals[Fe].v===Ge)return{name:oe(Ve.p,Fe),funcname:I.to_luastring('upvalue',!0)};return null},Re=function(Be,we){let Ge=Be.ci,Ve=null;if(Ge.callstatus&V.CIST_LUA){Ve=ke(Be,Ge,we);let Fe=be(Be,Ge,we);!Ve&&Fe&&(Ve=Ee(Ge.func.value.p,Q(Ge),Fe-Ge.l_base))}return Ve?M.luaO_pushfstring(Be,I.to_luastring(' (%s \'%s\')',!0),Ve.funcname,Ve.name):I.to_luastring('',!0)},Se=function(Be,we,Ge){let Ve=H.luaT_objtypename(Be,we);Me(Be,I.to_luastring('attempt to %s a %s value%s',!0),Ge,Ve,Re(Be,we))},Pe=function(Be,we,Ge,Ve){let Fe;return Fe=Ge?M.luaO_chunkid(Ge.getstr(),Y.LUA_IDSIZE):['?'.charCodeAt(0)],M.luaO_pushfstring(Be,I.to_luastring('%s:%d: %s',!0),Fe,Ve,we)},Me=function(Be,we,...Ge){let Ve=Be.ci,Fe=M.luaO_pushvfstring(Be,we,Ge);Ve.callstatus&V.CIST_LUA&&Pe(Be,Fe,Ve.func.value.p.source,$(Ve)),ye(Be)},ye=function(Be){if(0!==Be.errfunc){let we=Be.errfunc;M.pushobj2s(Be,Be.stack[Be.top-1]),M.setobjs2s(Be,Be.top-2,we),N.luaD_callnoyield(Be,Be.top-2,1)}N.luaD_throw(Be,W.LUA_ERRRUN)};T.exports.luaG_addinfo=Pe,T.exports.luaG_concaterror=function(Be,we,Ge){(we.ttisstring()||J.cvt2str(we))&&(we=Ge),Se(Be,we,I.to_luastring('concatenate',!0))},T.exports.luaG_errormsg=ye,T.exports.luaG_opinterror=function(Be,we,Ge,Ve){!1===J.tonumber(we)&&(Ge=we),Se(Be,Ge,Ve)},T.exports.luaG_ordererror=function(Be,we,Ge){let Ve=H.luaT_objtypename(Be,we),Fe=H.luaT_objtypename(Be,Ge);Ve.join()===Fe.join()?Me(Be,I.to_luastring('attempt to compare two %s values',!0),Ve):Me(Be,I.to_luastring('attempt to compare %s with %s',!0),Ve,Fe)},T.exports.luaG_runerror=Me,T.exports.luaG_tointerror=function(Be,we,Ge){let Ve=J.tointeger(we);!1===Ve&&(Ge=we),Me(Be,I.to_luastring('number%s has no integer representation',!0),Re(Be,Ge))},T.exports.luaG_traceexec=function(Be){let we=Be.ci,Ge=Be.hookmask,Ve=0==--Be.hookcount&&Ge&I.LUA_MASKCOUNT;if(Ve)Be.hookcount=Be.basehookcount;else if(!(Ge&I.LUA_MASKLINE))return;if(we.callstatus&V.CIST_HOOKYIELD)return void(we.callstatus&=~V.CIST_HOOKYIELD);if(Ve&&N.luaD_hook(Be,I.LUA_HOOKCOUNT,-1),Ge&I.LUA_MASKLINE){let Fe=we.func.value.p,je=we.l_savedpc-1,Xe=0===Fe.lineinfo.length?-1:Fe.lineinfo[je];(0==je||we.l_savedpc<=Be.oldpc||Xe!==(0===Fe.lineinfo.length?-1:Fe.lineinfo[Be.oldpc-1]))&&N.luaD_hook(Be,I.LUA_HOOKLINE,Xe)}Be.oldpc=we.l_savedpc,Be.status===W.LUA_YIELD&&(Ve&&(Be.hookcount=1),we.l_savedpc--,we.callstatus|=V.CIST_HOOKYIELD,we.funcOff=Be.top-1,we.func=Be.stack[we.funcOff],N.luaD_throw(Be,W.LUA_YIELD))},T.exports.luaG_typeerror=Se,T.exports.lua_gethook=function(Be){return Be.hook},T.exports.lua_gethookcount=function(Be){return Be.basehookcount},T.exports.lua_gethookmask=function(Be){return Be.hookmask},T.exports.lua_getinfo=function(Be,we,Ge){let Ve,Fe,je,Xe;return ee(Be),we[0]==='>'.charCodeAt(0)?(je=null,Xe=Be.stack[Be.top-1],E(Be,Xe.ttisfunction(),'function expected'),we=we.slice(1),Be.top--):(je=Ge.i_ci,Xe=je.func,E(je.func.ttisfunction())),Fe=Xe.ttisclosure()?Xe.value:null,Ve=he(Be,we,Ge,Fe,je),0<=we.indexOf('f'.charCodeAt(0))&&(M.pushobj2s(Be,Xe),E(Be.top<=Be.ci.top,'stack overflow')),ee(Be),0<=we.indexOf('L'.charCodeAt(0))&&Le(Be,Fe),Ve},T.exports.lua_getlocal=function(Be,we,Ge){let Ve;if(ee(Be),null===we)Ve=Be.stack[Be.top-1].ttisLclosure()?P.luaF_getlocalname(Be.stack[Be.top-1].value.p,Ge,0):null;else{let Fe=pe(Be,we.i_ci,Ge);Fe?(Ve=Fe.name,M.pushobj2s(Be,Be.stack[Fe.pos]),E(Be.top<=Be.ci.top,'stack overflow')):Ve=null}return ee(Be),Ve},T.exports.lua_getstack=function(Be,we,Ge){let Ve,Fe;if(0>we)return 0;for(Ve=Be.ci;0<we&&Ve!==Be.base_ci;Ve=Ve.previous)we--;return 0===we&&Ve!==Be.base_ci?(Fe=1,Ge.i_ci=Ve):Fe=0,Fe},T.exports.lua_sethook=function(Be,we,Ge,Ve){(null===we||0===Ge)&&(Ge=0,we=null),Be.ci.callstatus&V.CIST_LUA&&(Be.oldpc=Be.ci.l_savedpc),Be.hook=we,Be.basehookcount=Ve,Be.hookcount=Be.basehookcount,Be.hookmask=Ge},T.exports.lua_setlocal=function(Be,we,Ge){let Ve;ee(Be);let Fe=pe(Be,we.i_ci,Ge);return Fe?(Ve=Fe.name,M.setobjs2s(Be,Fe.pos,Be.top-1),delete Be.stack[--Be.top]):Ve=null,ee(Be),Ve}},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(3),P=I.constant_types;class K{constructor(q){this.id=q.l_G.id_counter++,this.v=void 0,this.vOff=void 0,this.refcount=0,this.open_next=null}isopen(){return void 0!==this.vOff}}T.exports.MAXUPVAL=255,T.exports.Proto=class{constructor(q){this.id=q.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},T.exports.UpVal=K,T.exports.luaF_findupval=function(q,W){let $=q.openupval,Q;for(;null!==$&&$.vOff>=W;){if(E($.isopen()),$.vOff===W)return $;Q=$,$=$.open_next}let ee=new K(q);return ee.open_next=$,Q?Q.open_next=ee:q.openupval=ee,ee.v=q.stack[W],ee.vOff=W,ee},T.exports.luaF_close=function(q,W){for(;null!==q.openupval&&q.openupval.vOff>=W;){let Q=q.openupval;if(E(Q.isopen()),q.openupval=Q.open_next,0===Q.refcount)Q.v=void 0,Q.open_next=null;else{let $=Q.v;Q.v=new N.TValue($.type,$.value)}Q.vOff=void 0}},T.exports.luaF_getlocalname=function(q,W,Q){for(let $=0;$<q.locvars.length&&q.locvars[$].startpc<=Q;$++)if(Q<q.locvars[$].endpc&&(W--,0===W))return q.locvars[$].varname.getstr();return null},T.exports.luaF_initupvals=function(q,W){for(let Q=0,$;Q<W.nupvalues;Q++)$=new K(q),$.refcount=1,$.v=new N.TValue(P.LUA_TNIL,null),W.upvals[Q]=$},T.exports.luaF_newLclosure=function(q,W){let Q=new N.LClosure(q,W);return Q}},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(3),P=U(7),M=U(22),K=U(9),V=U(11),F=U(15),H=I.constant_types,Y=I.thread_status,J=H.LUA_NUMTAGS,q=5,W=2*I.LUA_MINSTACK;class Q{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class ${constructor(Le){this.id=Le.id_counter++,this.base_ci=new Q,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=Le,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.openupval=null,this.nny=1,this.status=Y.LUA_OK,this.errfunc=0}}class ee{constructor(){this.id_counter=0,this.mainthread=null,this.l_registry=new N.TValue(H.LUA_TNIL,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=Array(F.TMS.TM_N),this.mt=Array(J)}}const ae=function(Le){let Ae=Le.ci;Ae.next=null},ue=function(Le){Le.stack=Array(W),Le.top=0,Le.stack_last=W-q;let he=Le.base_ci;he.next=he.previous=null,he.callstatus=0,he.funcOff=Le.top,he.func=Le.stack[Le.top],Le.stack[Le.top++]=new N.TValue(H.LUA_TNIL,null),he.top=Le.top+I.LUA_MINSTACK,Le.ci=he},se=function(Le){Le.ci=Le.base_ci,ae(Le),Le.stack=null},ne=function(Le,Ae){let he=K.luaH_new(Le);Ae.l_registry.sethvalue(he),K.luaH_setint(he,I.LUA_RIDX_MAINTHREAD,new N.TValue(H.LUA_TTHREAD,Le)),K.luaH_setint(he,I.LUA_RIDX_GLOBALS,new N.TValue(H.LUA_TTABLE,K.luaH_new(Le)))},oe=function(Le){let Ae=Le.l_G;ue(Le,Le),ne(Le,Ae),F.luaT_init(Le),Ae.version=M.lua_version(null)},de=function(Le){V.luaF_close(Le,Le.stack),se(Le)};T.exports.lua_State=$,T.exports.CallInfo=Q,T.exports.CIST_OAH=1,T.exports.CIST_LUA=2,T.exports.CIST_HOOKED=4,T.exports.CIST_FRESH=8,T.exports.CIST_YPCALL=16,T.exports.CIST_TAIL=32,T.exports.CIST_HOOKYIELD=64,T.exports.CIST_LEQ=128,T.exports.CIST_FIN=256,T.exports.EXTRA_STACK=q,T.exports.lua_close=function(Le){Le=Le.l_G.mainthread,de(Le)},T.exports.lua_newstate=function(){let Le=new ee,Ae=new $(Le);return Le.mainthread=Ae,P.luaD_rawrunprotected(Ae,oe,null)!==Y.LUA_OK&&(Ae=null),Ae},T.exports.lua_newthread=function(Le){let Ae=Le.l_G,he=new $(Ae);return Le.stack[Le.top]=new N.TValue(H.LUA_TTHREAD,he),Le.top++,E(Le.top<=Le.ci.top,'stack overflow'),he.hookmask=Le.hookmask,he.basehookcount=Le.basehookcount,he.hook=Le.hook,he.hookcount=he.basehookcount,ue(he,Le),he},T.exports.luaE_extendCI=function(Le){let Ae=new Q;return Le.ci.next=Ae,Ae.previous=Le.ci,Ae.next=null,Le.ci=Ae,Ae},T.exports.luaE_freeCI=ae,T.exports.luaE_freethread=function(Le,Ae){V.luaF_close(Ae,Ae.stack),se(Ae)}},function(T,O,U){'use strict';const E=U(6),I=U(36).sprintf,F='',Y=`%${F}d`,J='%.14g',Q=function($,ee){for(var te=_Mathmin(3,_Mathceil(_Mathabs(ee)/1023)),ae=$,ue=0;ue<te;ue++)ae*=_Mathpow(2,_Mathfloor((ee+ue)/te));return ae};T.exports.frexp=function($){if(0===$)return[$,0];var ee=new DataView(new ArrayBuffer(8));ee.setFloat64(0,$);var te=2047&ee.getUint32(0)>>>20;0==te&&(ee.setFloat64(0,18446744073709552000*$),te=(2047&ee.getUint32(0)>>>20)-64);var ae=te-1022,ue=Q($,-ae);return[ue,ae]},T.exports.ldexp=Q,T.exports.LUAI_MAXSTACK=1e5,T.exports.LUA_IDSIZE=60,T.exports.LUA_INTEGER_FMT=Y,T.exports.LUA_INTEGER_FRMLEN=F,T.exports.LUA_NUMBER_FMT=J,T.exports.LUA_NUMBER_FRMLEN='',T.exports.lua_getlocaledecpoint=function(){return 1.1.toLocaleString().substring(1,2)},T.exports.lua_integer2str=function($){return I(Y,$)},T.exports.lua_number2str=function($){return I(J,$)},T.exports.lua_numbertointeger=function($){return $>=E.MIN_INT&&$<-E.MIN_INT&&$}},function(T){'use strict';const N=0,P=1,M=2,K=3,V=0,F=1,H=2,Y=3,J=[64|M<<4|N<<2|V,64|K<<4|N<<2|F,64|N<<4|N<<2|F,64|P<<4|P<<2|V,64|P<<4|N<<2|V,64|P<<4|N<<2|V,64|P<<4|K<<2|V,64|M<<4|K<<2|V,0|K<<4|K<<2|V,0|P<<4|N<<2|V,0|K<<4|K<<2|V,64|P<<4|P<<2|V,64|M<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|M<<4|N<<2|V,64|M<<4|N<<2|V,64|M<<4|N<<2|V,64|M<<4|N<<2|V,64|M<<4|M<<2|V,0|M<<4|N<<2|H,128|K<<4|K<<2|V,128|K<<4|K<<2|V,128|K<<4|K<<2|V,128|N<<4|P<<2|V,192|M<<4|P<<2|V,64|P<<4|P<<2|V,64|P<<4|P<<2|V,0|P<<4|N<<2|V,64|M<<4|N<<2|H,64|M<<4|N<<2|H,0|N<<4|P<<2|V,64|M<<4|N<<2|H,0|P<<4|P<<2|V,64|P<<4|N<<2|F,64|P<<4|N<<2|V,0|P<<4|P<<2|Y],te=9,ae=9,ue=te+ae,se=8,ne=te+ae+se,oe=6,_e=0,pe=_e+oe,ce=pe+se,de=ce+te,ge=ce,Le=pe,Ae=(1<<ue)-1,he=Ae>>1,xe=(1<<se)-1,Ee=1<<ae-1,Ie=function(Qe,$e){return~(-1<<Qe)<<$e},Ne=function(Qe,$e){return~Ie(Qe,$e)},Me=function(Qe,$e,at,lt){return Qe.code=Qe.code&Ne(lt,at)|$e<<at&Ie(lt,at),ze(Qe)},Fe=function(Qe,$e){return Me(Qe,$e,ge,ue)},ze=function(Qe){if('number'==typeof Qe)return{code:Qe,opcode:Qe>>_e&Ie(oe,0),A:Qe>>pe&Ie(se,0),B:Qe>>de&Ie(ae,0),C:Qe>>ce&Ie(te,0),Bx:Qe>>ge&Ie(ue,0),Ax:Qe>>Le&Ie(ne,0),sBx:(Qe>>ge&Ie(ue,0))-he};let $e=Qe.code;return Qe.opcode=$e>>_e&Ie(oe,0),Qe.A=$e>>pe&Ie(se,0),Qe.B=$e>>de&Ie(ae,0),Qe.C=$e>>ce&Ie(te,0),Qe.Bx=$e>>ge&Ie(ue,0),Qe.Ax=$e>>Le&Ie(ne,0),Qe.sBx=($e>>ge&Ie(ue,0))-he,Qe};T.exports.BITRK=Ee,T.exports.CREATE_ABC=function(Qe,$e,at,lt){return ze(Qe<<_e|$e<<pe|at<<de|lt<<ce)},T.exports.CREATE_ABx=function(Qe,$e,at){return ze(Qe<<_e|$e<<pe|at<<ge)},T.exports.CREATE_Ax=function(Qe,$e){return ze(Qe<<_e|$e<<Le)},T.exports.GET_OPCODE=function(Qe){return Qe.opcode},T.exports.GETARG_A=function(Qe){return Qe.A},T.exports.GETARG_B=function(Qe){return Qe.B},T.exports.GETARG_C=function(Qe){return Qe.C},T.exports.GETARG_Bx=function(Qe){return Qe.Bx},T.exports.GETARG_Ax=function(Qe){return Qe.Ax},T.exports.GETARG_sBx=function(Qe){return Qe.sBx},T.exports.INDEXK=function(Qe){return Qe&~Ee},T.exports.ISK=function(Qe){return Qe&Ee},T.exports.LFIELDS_PER_FLUSH=50,T.exports.MAXARG_A=xe,T.exports.MAXARG_Ax=(1<<ne)-1,T.exports.MAXARG_B=(1<<ae)-1,T.exports.MAXARG_Bx=Ae,T.exports.MAXARG_C=(1<<te)-1,T.exports.MAXARG_sBx=he,T.exports.MAXINDEXRK=Ee-1,T.exports.NO_REG=xe,T.exports.OpArgK=K,T.exports.OpArgN=N,T.exports.OpArgR=M,T.exports.OpArgU=P,T.exports.OpCodes=['MOVE','LOADK','LOADKX','LOADBOOL','LOADNIL','GETUPVAL','GETTABUP','GETTABLE','SETTABUP','SETUPVAL','SETTABLE','NEWTABLE','SELF','ADD','SUB','MUL','MOD','POW','DIV','IDIV','BAND','BOR','BXOR','SHL','SHR','UNM','BNOT','NOT','LEN','CONCAT','JMP','EQ','LT','LE','TEST','TESTSET','CALL','TAILCALL','RETURN','FORLOOP','FORPREP','TFORCALL','TFORLOOP','SETLIST','CLOSURE','VARARG','EXTRAARG'],T.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},T.exports.POS_A=pe,T.exports.POS_Ax=Le,T.exports.POS_B=de,T.exports.POS_Bx=ge,T.exports.POS_C=ce,T.exports.POS_OP=_e,T.exports.RKASK=function(Qe){return Qe|Ee},T.exports.SETARG_A=function(Qe,$e){return Me(Qe,$e,pe,se)},T.exports.SETARG_Ax=function(Qe,$e){return Me(Qe,$e,Le,ne)},T.exports.SETARG_B=function(Qe,$e){return Me(Qe,$e,de,ae)},T.exports.SETARG_Bx=Fe,T.exports.SETARG_C=function(Qe,$e){return Me(Qe,$e,ce,te)},T.exports.SETARG_sBx=function(Qe,$e){return Fe(Qe,$e+he)},T.exports.SET_OPCODE=function(Qe,$e){return Qe.code=Qe.code&Ne(oe,_e)|$e<<_e&Ie(oe,_e),ze(Qe)},T.exports.SIZE_A=se,T.exports.SIZE_Ax=ne,T.exports.SIZE_B=ae,T.exports.SIZE_Bx=ue,T.exports.SIZE_C=te,T.exports.SIZE_OP=oe,T.exports.fullins=ze,T.exports.getBMode=function(Qe){return 3&J[Qe]>>4},T.exports.getCMode=function(Qe){return 3&J[Qe]>>2},T.exports.getOpMode=function(Qe){return 3&J[Qe]},T.exports.iABC=V,T.exports.iABx=F,T.exports.iAsBx=H,T.exports.iAx=Y,T.exports.testAMode=function(Qe){return 64&J[Qe]},T.exports.testTMode=function(Qe){return 128&J[Qe]}},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(3),P=U(7),M=U(12),K=U(8),V=U(9),F=U(10),H=U(16),Y=I.constant_types,J=['no value','nil','boolean','userdata','number','string','table','function','userdata','thread','proto'].map((pe)=>I.to_luastring(pe)),q=function(pe){return J[pe+1]},W={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},$=I.to_luastring('__name',!0),te=function(pe,ce,de,ge,Le,Ae){let he=pe.top;if(N.pushobj2s(pe,ce),N.pushobj2s(pe,de),N.pushobj2s(pe,ge),Ae||N.pushobj2s(pe,Le),pe.ci.callstatus&M.CIST_LUA?P.luaD_call(pe,he,Ae):P.luaD_callnoyield(pe,he,Ae),Ae){let Te=pe.stack[pe.top-1];delete pe.stack[--pe.top],Le.setfrom(Te)}},ae=function(pe,ce,de,ge,Le){let Ae=_e(pe,ce,Le);return(Ae.ttisnil()&&(Ae=_e(pe,de,Le)),!Ae.ttisnil())&&(te(pe,Ae,ce,de,ge,1),!0)},oe=function(pe,ce,de){const ge=V.luaH_getstr(pe,de);return E(ce<=W.TM_EQ),ge.ttisnil()?(pe.flags|=1<<ce,null):ge},_e=function(pe,ce,de){let ge;switch(ce.ttnov()){case Y.LUA_TTABLE:case Y.LUA_TUSERDATA:ge=ce.value.metatable;break;default:ge=pe.l_G.mt[ce.ttnov()];}return ge?V.luaH_getstr(ge,pe.l_G.tmname[de]):N.luaO_nilobject};T.exports.fasttm=function(pe,ce,de){return null===ce?null:ce.flags&1<<de?null:oe(ce,de,pe.l_G.tmname[de])},T.exports.TMS=W,T.exports.luaT_callTM=te,T.exports.luaT_callbinTM=ae,T.exports.luaT_trybinTM=function(pe,ce,de,ge,Le){if(!ae(pe,ce,de,ge,Le))switch(Le){case W.TM_CONCAT:F.luaG_concaterror(pe,ce,de);case W.TM_BAND:case W.TM_BOR:case W.TM_BXOR:case W.TM_SHL:case W.TM_SHR:case W.TM_BNOT:{let Ae=H.tonumber(ce),he=H.tonumber(de);!1!==Ae&&!1!==he?F.luaG_tointerror(pe,ce,de):F.luaG_opinterror(pe,ce,de,I.to_luastring('perform bitwise operation on',!0))}default:F.luaG_opinterror(pe,ce,de,I.to_luastring('perform arithmetic on',!0));}},T.exports.luaT_callorderTM=function(pe,ce,de,ge){let Le=new N.TValue;return ae(pe,ce,de,Le,ge)?!Le.l_isfalse():null},T.exports.luaT_gettm=oe,T.exports.luaT_gettmbyobj=_e,T.exports.luaT_init=function(pe){pe.l_G.tmname[W.TM_INDEX]=new K.luaS_new(pe,I.to_luastring('__index',!0)),pe.l_G.tmname[W.TM_NEWINDEX]=new K.luaS_new(pe,I.to_luastring('__newindex',!0)),pe.l_G.tmname[W.TM_GC]=new K.luaS_new(pe,I.to_luastring('__gc',!0)),pe.l_G.tmname[W.TM_MODE]=new K.luaS_new(pe,I.to_luastring('__mode',!0)),pe.l_G.tmname[W.TM_LEN]=new K.luaS_new(pe,I.to_luastring('__len',!0)),pe.l_G.tmname[W.TM_EQ]=new K.luaS_new(pe,I.to_luastring('__eq',!0)),pe.l_G.tmname[W.TM_ADD]=new K.luaS_new(pe,I.to_luastring('__add',!0)),pe.l_G.tmname[W.TM_SUB]=new K.luaS_new(pe,I.to_luastring('__sub',!0)),pe.l_G.tmname[W.TM_MUL]=new K.luaS_new(pe,I.to_luastring('__mul',!0)),pe.l_G.tmname[W.TM_MOD]=new K.luaS_new(pe,I.to_luastring('__mod',!0)),pe.l_G.tmname[W.TM_POW]=new K.luaS_new(pe,I.to_luastring('__pow',!0)),pe.l_G.tmname[W.TM_DIV]=new K.luaS_new(pe,I.to_luastring('__div',!0)),pe.l_G.tmname[W.TM_IDIV]=new K.luaS_new(pe,I.to_luastring('__idiv',!0)),pe.l_G.tmname[W.TM_BAND]=new K.luaS_new(pe,I.to_luastring('__band',!0)),pe.l_G.tmname[W.TM_BOR]=new K.luaS_new(pe,I.to_luastring('__bor',!0)),pe.l_G.tmname[W.TM_BXOR]=new K.luaS_new(pe,I.to_luastring('__bxor',!0)),pe.l_G.tmname[W.TM_SHL]=new K.luaS_new(pe,I.to_luastring('__shl',!0)),pe.l_G.tmname[W.TM_SHR]=new K.luaS_new(pe,I.to_luastring('__shr',!0)),pe.l_G.tmname[W.TM_UNM]=new K.luaS_new(pe,I.to_luastring('__unm',!0)),pe.l_G.tmname[W.TM_BNOT]=new K.luaS_new(pe,I.to_luastring('__bnot',!0)),pe.l_G.tmname[W.TM_LT]=new K.luaS_new(pe,I.to_luastring('__lt',!0)),pe.l_G.tmname[W.TM_LE]=new K.luaS_new(pe,I.to_luastring('__le',!0)),pe.l_G.tmname[W.TM_CONCAT]=new K.luaS_new(pe,I.to_luastring('__concat',!0)),pe.l_G.tmname[W.TM_CALL]=new K.luaS_new(pe,I.to_luastring('__call',!0))},T.exports.luaT_objtypename=function(pe,ce){let de;if(ce.ttistable()&&null!==(de=ce.value.metatable)||ce.ttisfulluserdata()&&null!==(de=ce.value.metatable)){let ge=V.luaH_getstr(de,K.luaS_bless(pe,$));if(ge.ttisstring())return ge.svalue()}return q(ce.ttnov())},T.exports.ttypename=q},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(14),P=U(13),M=U(3),K=U(11),V=U(12),F=U(8),H=U(6),Y=U(7),J=U(15),q=U(9),W=U(10),Q=I.constant_types,$=I.LUA_MULTRET,te=function(Ge,Ve,Fe){return Ve+Fe.A},ae=function(Ge,Ve,Fe){return Ve+Fe.B},se=function(Ge,Ve,Fe,je){return N.ISK(je.B)?Fe[N.INDEXK(je.B)]:Ge.stack[Ve+je.B]},ne=function(Ge,Ve,Fe,je){return N.ISK(je.C)?Fe[N.INDEXK(je.C)]:Ge.stack[Ve+je.C]},_e=function(Ge,Ve,Fe,je){let Xe=Fe.A;0!==Xe&&K.luaF_close(Ge,Ve.l_base+Xe-1),Ve.l_savedpc+=Fe.sBx+je},pe=function(Ge,Ve){_e(Ge,Ve,Ve.l_code[Ve.l_savedpc],1)},ce=function(Ge,Ve,Fe){if(Ve.ttisnumber()&&Fe.ttisnumber())return Oe(Ve,Fe)?1:0;if(Ve.ttisstring()&&Fe.ttisstring())return 0>Ee(Ve.tsvalue(),Fe.tsvalue())?1:0;let je=J.luaT_callorderTM(Ge,Ve,Fe,J.TMS.TM_LT);return null===je&&W.luaG_ordererror(Ge,Ve,Fe),je?1:0},de=function(Ge,Ve,Fe){if(Ve.ttisnumber()&&Fe.ttisnumber())return Ue(Ve,Fe)?1:0;if(Ve.ttisstring()&&Fe.ttisstring())return 0>=Ee(Ve.tsvalue(),Fe.tsvalue())?1:0;let Xe=J.luaT_callorderTM(Ge,Ve,Fe,J.TMS.TM_LE);if(null!==Xe)return Xe?1:0;Ge.ci.callstatus|=V.CIST_LEQ;let je=J.luaT_callorderTM(Ge,Fe,Ve,J.TMS.TM_LT);return Ge.ci.callstatus^=V.CIST_LEQ,null===je&&W.luaG_ordererror(Ge,Ve,Fe),je?0:1},ge=function(Ge,Ve,Fe){if(Ve.ttype()!==Fe.ttype())return Ve.ttnov()!==Fe.ttnov()||Ve.ttnov()!==Q.LUA_TNUMBER?0:Ve.value===Fe.value?1:0;let je;switch(Ve.ttype()){case Q.LUA_TNIL:return 1;case Q.LUA_TBOOLEAN:return Ve.value==Fe.value?1:0;case Q.LUA_TLIGHTUSERDATA:case Q.LUA_TNUMINT:case Q.LUA_TNUMFLT:case Q.LUA_TLCF:return Ve.value===Fe.value?1:0;case Q.LUA_TSHRSTR:case Q.LUA_TLNGSTR:return F.luaS_eqlngstr(Ve.tsvalue(),Fe.tsvalue())?1:0;case Q.LUA_TUSERDATA:case Q.LUA_TTABLE:if(Ve.value===Fe.value)return 1;if(null===Ge)return 0;je=J.fasttm(Ge,Ve.value.metatable,J.TMS.TM_EQ),null===je&&(je=J.fasttm(Ge,Fe.value.metatable,J.TMS.TM_EQ));break;default:return Ve.value===Fe.value?1:0;}if(null===je)return 0;let Xe=new M.TValue;return J.luaT_callTM(Ge,je,Ve,Fe,Xe,1),Xe.l_isfalse()?0:1},Ae=function(Ge,Ve){let Fe=!1,je=he(Ge,0>Ve?2:1);if(!1===je){let Xe=xe(Ge);if(!1===Xe)return!1;0<Xe?(je=H.LUA_MAXINTEGER,0>Ve&&(Fe=!0)):(je=H.LUA_MININTEGER,0<=Ve&&(Fe=!0))}return{stopnow:Fe,ilimit:je}},he=function(Ge,Ve){if(Ge.ttisfloat()){let Fe=Ge.value,je=_Mathfloor(Fe);if(Fe!==je){if(0===Ve)return!1;1<Ve&&(je+=1)}return P.lua_numbertointeger(je)}if(Ge.ttisinteger())return Ge.value;if(Pe(Ge)){let Fe=M.luaO_str2num(Ge.svalue());if(!1!==Fe)return he(Fe,Ve)}return!1},Te=function(Ge){return Ge.ttisinteger()?Ge.value:he(Ge,0)},xe=function(Ge){if(Ge.ttnov()===Q.LUA_TNUMBER)return Ge.value;if(Pe(Ge)){let Ve=M.luaO_str2num(Ge.svalue());if(!1!==Ve)return Ve.value}return!1},Oe=function(Ge,Ve){return Ge.value<Ve.value},Ue=function(Ge,Ve){return Ge.value<=Ve.value},Ee=function(Ge,Ve){let Fe=F.luaS_hashlongstr(Ge),je=F.luaS_hashlongstr(Ve);return Fe===je?0:Fe<je?-1:1},ve=function(Ge,Ve,Fe){let je;switch(Fe.ttype()){case Q.LUA_TTABLE:{let Xe=Fe.value;if(je=J.fasttm(Ge,Xe.metatable,J.TMS.TM_LEN),null!==je)break;return void Ve.setivalue(q.luaH_getn(Xe))}case Q.LUA_TSHRSTR:case Q.LUA_TLNGSTR:return void Ve.setivalue(Fe.vslen());default:{je=J.luaT_gettmbyobj(Ge,Fe,J.TMS.TM_LEN),je.ttisnil()&&W.luaG_typeerror(Ge,Fe,I.to_luastring('get length of',!0));break}}J.luaT_callTM(Ge,je,Fe,Fe,Ve,1)},be=function(Ge,Ve,Fe){return 0===Fe&&W.luaG_runerror(Ge,I.to_luastring('attempt to divide by zero')),0|_Mathfloor(Ve/Fe)},ke=function(Ge,Ve,Fe){return 0===Fe&&W.luaG_runerror(Ge,I.to_luastring('attempt to perform \'n%%0\'')),0|Ve-_Mathfloor(Ve/Fe)*Fe},Re=32,Se=function(Ge,Ve){return 0>Ve?Ve<=-Re?0:Ge>>>-Ve:Ve>=Re?0:Ge<<Ve},Ie=function(Ge,Ve,Fe,je){let Xe=Ge.cache;if(null!==Xe){let He=Ge.upvalues,Ye=He.length;for(let ze=0,Je;ze<Ye;ze++)if(Je=He[ze].instack?Fe[je+He[ze].idx]:Ve[He[ze].idx].v,Xe.upvals[ze].v!==Je)return null}return Xe},Ne=function(Ge,Ve,Fe,je,Xe){let He=Ve.upvalues.length,Ye=Ve.upvalues,ze=new M.LClosure(Ge,He);ze.p=Ve,Ge.stack[Xe].setclLvalue(ze);for(let Je=0;Je<He;Je++)ze.upvals[Je]=Ye[Je].instack?K.luaF_findupval(Ge,je+Ye[Je].idx):Fe[Ye[Je].idx],ze.upvals[Je].refcount++;Ve.cache=ze},Ce=function(Ge){return Ge.ttisnumber()},Pe=function(Ge){return Ge.ttisstring()},Me=function(Ge,Ve){let Fe=Ge.stack[Ve];return!!Fe.ttisstring()||!!Ce(Fe)&&(M.luaO_tostring(Ge,Fe),!0)},ye=function(Ge){return Ge.ttisstring()&&0===Ge.vslen()},De=function(Ge,Ve){E(2<=Ve);do{let Fe=Ge.top,je=2;if(!(Ge.stack[Fe-2].ttisstring()||Ce(Ge.stack[Fe-2]))||!Me(Ge,Fe-1))J.luaT_trybinTM(Ge,Ge.stack[Fe-2],Ge.stack[Fe-1],Ge.stack[Fe-2],J.TMS.TM_CONCAT);else if(ye(Ge.stack[Fe-1]))Me(Ge,Fe-2);else if(ye(Ge.stack[Fe-2]))M.setobjs2s(Ge,Fe-2,Fe-1);else{let Xe=Array(Ve);for(Xe[Ve-1]=Ge.stack[Fe-1].svalue(),je=1;je<Ve;je++){if(!Me(Ge,Fe-je-1)){Xe=Xe.slice(Ve-je);break}Xe[Ve-je-1]=Ge.stack[Fe-je-1].svalue()}let He=F.luaS_bless(Ge,Array.prototype.concat.apply([],Xe));M.setsvalue2s(Ge,Fe-je,He)}for(Ve-=je-1;Ge.top>Fe-(je-1);)delete Ge.stack[--Ge.top]}while(1<Ve)},Ke=2e3,Be=function(Ge,Ve,Fe,je){for(let Xe=0;Xe<Ke;Xe++){let He;if(!Ve.ttistable())He=J.luaT_gettmbyobj(Ge,Ve,J.TMS.TM_INDEX),He.ttisnil()&&W.luaG_typeerror(Ge,Ve,I.to_luastring('index',!0));else{let Ye=q.luaH_get(Ge,Ve.value,Fe);if(!Ye.ttisnil())return void M.setobj2s(Ge,je,Ye);if(He=J.fasttm(Ge,Ve.value.metatable,J.TMS.TM_INDEX),null===He)return void Ge.stack[je].setnilvalue()}if(He.ttisfunction())return void J.luaT_callTM(Ge,He,Ve,Fe,Ge.stack[je],1);Ve=He}W.luaG_runerror(Ge,I.to_luastring('\'__index\' chain too long; possible loop',!0))},we=function(Ge,Ve,Fe,je){for(let Xe=0;Xe<Ke;Xe++){let He;if(Ve.ttistable()){let Ye=Ve.value,ze=q.luaH_set(Ge,Ye,Fe);if(!ze.ttisnil()||null===(He=J.fasttm(Ge,Ye.metatable,J.TMS.TM_NEWINDEX)))return je.ttisnil()?q.luaH_delete(Ge,Ye,Fe):ze.setfrom(je),void q.invalidateTMcache(Ye)}else(He=J.luaT_gettmbyobj(Ge,Ve,J.TMS.TM_NEWINDEX)).ttisnil()&&W.luaG_typeerror(Ge,Ve,I.to_luastring('index',!0));if(He.ttisfunction())return void J.luaT_callTM(Ge,He,Ve,Fe,je,0);Ve=He}W.luaG_runerror(Ge,I.to_luastring('\'__newindex\' chain too long; possible loop',!0))};T.exports.cvt2str=Ce,T.exports.cvt2num=Pe,T.exports.luaV_gettable=Be,T.exports.luaV_concat=De,T.exports.luaV_div=be,T.exports.luaV_equalobj=ge,T.exports.luaV_execute=function(Ge){const Ve=N.OpCodesI;let Fe=Ge.ci;Fe.callstatus|=V.CIST_FRESH;newframe:for(;;){E(Fe===Ge.ci);let je=Fe.func.value,Xe=je.p.k,He=Fe.l_base,Ye=Fe.l_code[Fe.l_savedpc++];Ge.hookmask&(I.LUA_MASKLINE|I.LUA_MASKCOUNT)&&W.luaG_traceexec(Ge);let ze=te(Ge,He,Ye),Je=Ye.opcode;switch(Je){case Ve.OP_MOVE:{M.setobjs2s(Ge,ze,ae(Ge,He,Ye));break}case Ve.OP_LOADK:{let Ze=Xe[Ye.Bx];M.setobj2s(Ge,ze,Ze);break}case Ve.OP_LOADKX:{E(Fe.l_code[Fe.l_savedpc].opcode===Ve.OP_EXTRAARG);let Ze=Xe[Fe.l_code[Fe.l_savedpc++].Ax];M.setobj2s(Ge,ze,Ze);break}case Ve.OP_LOADBOOL:{Ge.stack[ze].setbvalue(0!==Ye.B),0!==Ye.C&&Fe.l_savedpc++;break}case Ve.OP_LOADNIL:{for(let Ze=0;Ze<=Ye.B;Ze++)Ge.stack[ze+Ze].setnilvalue();break}case Ve.OP_GETUPVAL:{let Ze=Ye.B;M.setobj2s(Ge,ze,je.upvals[Ze].v);break}case Ve.OP_GETTABUP:{let Ze=je.upvals[Ye.B].v,qe=ne(Ge,He,Xe,Ye);Be(Ge,Ze,qe,ze);break}case Ve.OP_GETTABLE:{let Ze=Ge.stack[ae(Ge,He,Ye)],qe=ne(Ge,He,Xe,Ye);Be(Ge,Ze,qe,ze);break}case Ve.OP_SETTABUP:{let Ze=je.upvals[Ye.A].v,qe=se(Ge,He,Xe,Ye),We=ne(Ge,He,Xe,Ye);we(Ge,Ze,qe,We);break}case Ve.OP_SETUPVAL:{let Ze=je.upvals[Ye.B];Ze.v.setfrom(Ge.stack[ze]);break}case Ve.OP_SETTABLE:{let Ze=Ge.stack[ze],qe=se(Ge,He,Xe,Ye),We=ne(Ge,He,Xe,Ye);we(Ge,Ze,qe,We);break}case Ve.OP_NEWTABLE:{Ge.stack[ze].sethvalue(q.luaH_new(Ge));break}case Ve.OP_SELF:{let Ze=ae(Ge,He,Ye),qe=ne(Ge,He,Xe,Ye);M.setobjs2s(Ge,ze+1,Ze),Be(Ge,Ge.stack[Ze],qe,ze);break}case Ve.OP_ADD:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;Ze.ttisinteger()&&qe.ttisinteger()?Ge.stack[ze].setivalue(0|Ze.value+qe.value):!1!==(We=xe(Ze))&&!1!==(Qe=xe(qe))?Ge.stack[ze].setfltvalue(We+Qe):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_ADD);break}case Ve.OP_SUB:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;Ze.ttisinteger()&&qe.ttisinteger()?Ge.stack[ze].setivalue(0|Ze.value-qe.value):!1!==(We=xe(Ze))&&!1!==(Qe=xe(qe))?Ge.stack[ze].setfltvalue(We-Qe):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_SUB);break}case Ve.OP_MUL:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;Ze.ttisinteger()&&qe.ttisinteger()?Ge.stack[ze].setivalue(_Mathimul(Ze.value,qe.value)):!1!==(We=xe(Ze))&&!1!==(Qe=xe(qe))?Ge.stack[ze].setfltvalue(We*Qe):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_MUL);break}case Ve.OP_MOD:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;Ze.ttisinteger()&&qe.ttisinteger()?Ge.stack[ze].setivalue(ke(Ge,Ze.value,qe.value)):!1!==(We=xe(Ze))&&!1!==(Qe=xe(qe))?Ge.stack[ze].setfltvalue(H.luai_nummod(Ge,We,Qe)):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_MOD);break}case Ve.OP_POW:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;!1!==(We=xe(Ze))&&!1!==(Qe=xe(qe))?Ge.stack[ze].setfltvalue(_Mathpow(We,Qe)):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_POW);break}case Ve.OP_DIV:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;!1!==(We=xe(Ze))&&!1!==(Qe=xe(qe))?Ge.stack[ze].setfltvalue(We/Qe):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_DIV);break}case Ve.OP_IDIV:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;Ze.ttisinteger()&&qe.ttisinteger()?Ge.stack[ze].setivalue(be(Ge,Ze.value,qe.value)):!1!==(We=xe(Ze))&&!1!==(Qe=xe(qe))?Ge.stack[ze].setfltvalue(_Mathfloor(We/Qe)):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_IDIV);break}case Ve.OP_BAND:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;!1!==(We=Te(Ze))&&!1!==(Qe=Te(qe))?Ge.stack[ze].setivalue(We&Qe):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_BAND);break}case Ve.OP_BOR:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;!1!==(We=Te(Ze))&&!1!==(Qe=Te(qe))?Ge.stack[ze].setivalue(We|Qe):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_BOR);break}case Ve.OP_BXOR:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;!1!==(We=Te(Ze))&&!1!==(Qe=Te(qe))?Ge.stack[ze].setivalue(We^Qe):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_BXOR);break}case Ve.OP_SHL:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;!1!==(We=Te(Ze))&&!1!==(Qe=Te(qe))?Ge.stack[ze].setivalue(Se(We,Qe)):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_SHL);break}case Ve.OP_SHR:{let Ze=se(Ge,He,Xe,Ye),qe=ne(Ge,He,Xe,Ye),We,Qe;!1!==(We=Te(Ze))&&!1!==(Qe=Te(qe))?Ge.stack[ze].setivalue(Se(We,-Qe)):J.luaT_trybinTM(Ge,Ze,qe,Ge.stack[ze],J.TMS.TM_SHR);break}case Ve.OP_UNM:{let Ze=Ge.stack[ae(Ge,He,Ye)],qe;Ze.ttisinteger()?Ge.stack[ze].setivalue(0|-Ze.value):!1===(qe=xe(Ze))?J.luaT_trybinTM(Ge,Ze,Ze,Ge.stack[ze],J.TMS.TM_UNM):Ge.stack[ze].setfltvalue(-qe);break}case Ve.OP_BNOT:{let Ze=Ge.stack[ae(Ge,He,Ye)];Ze.ttisinteger()?Ge.stack[ze].setivalue(~Ze.value):J.luaT_trybinTM(Ge,Ze,Ze,Ge.stack[ze],J.TMS.TM_BNOT);break}case Ve.OP_NOT:{let Ze=Ge.stack[ae(Ge,He,Ye)];Ge.stack[ze].setbvalue(Ze.l_isfalse());break}case Ve.OP_LEN:{ve(Ge,Ge.stack[ze],Ge.stack[ae(Ge,He,Ye)]);break}case Ve.OP_CONCAT:{let Ze=Ye.B,qe=Ye.C;Ge.top=He+qe+1,De(Ge,qe-Ze+1),M.setobjs2s(Ge,ze,He+Ze),Y.adjust_top(Ge,Fe.top);break}case Ve.OP_JMP:{_e(Ge,Fe,Ye,0);break}case Ve.OP_EQ:{ge(Ge,se(Ge,He,Xe,Ye),ne(Ge,He,Xe,Ye))===Ye.A?pe(Ge,Fe):Fe.l_savedpc++;break}case Ve.OP_LT:{ce(Ge,se(Ge,He,Xe,Ye),ne(Ge,He,Xe,Ye))===Ye.A?pe(Ge,Fe):Fe.l_savedpc++;break}case Ve.OP_LE:{de(Ge,se(Ge,He,Xe,Ye),ne(Ge,He,Xe,Ye))===Ye.A?pe(Ge,Fe):Fe.l_savedpc++;break}case Ve.OP_TEST:{(Ye.C?Ge.stack[ze].l_isfalse():!Ge.stack[ze].l_isfalse())?Fe.l_savedpc++:pe(Ge,Fe);break}case Ve.OP_TESTSET:{let Ze=ae(Ge,He,Ye),qe=Ge.stack[Ze];(Ye.C?qe.l_isfalse():!qe.l_isfalse())?Fe.l_savedpc++:(M.setobjs2s(Ge,ze,Ze),pe(Ge,Fe));break}case Ve.OP_CALL:{let Ze=Ye.B,qe=Ye.C-1;if(0!==Ze&&Y.adjust_top(Ge,ze+Ze),Y.luaD_precall(Ge,ze,qe))0<=qe&&Y.adjust_top(Ge,Fe.top);else{Fe=Ge.ci;continue newframe}break}case Ve.OP_TAILCALL:{let Ze=Ye.B;if(0!==Ze&&Y.adjust_top(Ge,ze+Ze),Y.luaD_precall(Ge,ze,$));else{let qe=Ge.ci,We=qe.previous,Qe=qe.func,$e=qe.funcOff,at=We.funcOff,lt=qe.l_base+Qe.value.p.numparams;0<je.p.p.length&&K.luaF_close(Ge,We.l_base);for(let ut=0;$e+ut<lt;ut++)M.setobjs2s(Ge,at+ut,$e+ut);We.l_base=at+(qe.l_base-$e),We.top=at+(Ge.top-$e),Y.adjust_top(Ge,We.top),We.l_code=qe.l_code,We.l_savedpc=qe.l_savedpc,We.callstatus|=V.CIST_TAIL,We.next=null,Fe=Ge.ci=We,E(Ge.top===We.l_base+Ge.stack[at].value.p.maxstacksize);continue newframe}break}case Ve.OP_RETURN:{0<je.p.p.length&&K.luaF_close(Ge,He);let Ze=Y.luaD_poscall(Ge,Fe,ze,0===Ye.B?Ge.top-ze:Ye.B-1);if(Fe.callstatus&V.CIST_FRESH)return;Fe=Ge.ci,Ze&&Y.adjust_top(Ge,Fe.top),E(Fe.callstatus&V.CIST_LUA),E(Fe.l_code[Fe.l_savedpc-1].opcode===Ve.OP_CALL);continue newframe}case Ve.OP_FORLOOP:{if(Ge.stack[ze].ttisinteger()){let Ze=Ge.stack[ze+2].value,qe=0|Ge.stack[ze].value+Ze,We=Ge.stack[ze+1].value;(0<Ze?qe<=We:We<=qe)&&(Fe.l_savedpc+=Ye.sBx,Ge.stack[ze].chgivalue(qe),Ge.stack[ze+3].setivalue(qe))}else{let Ze=Ge.stack[ze+2].value,qe=Ge.stack[ze].value+Ze,We=Ge.stack[ze+1].value;(0<Ze?qe<=We:We<=qe)&&(Fe.l_savedpc+=Ye.sBx,Ge.stack[ze].chgfltvalue(qe),Ge.stack[ze+3].setfltvalue(qe))}break}case Ve.OP_FORPREP:{let Ze=Ge.stack[ze],qe=Ge.stack[ze+1],We=Ge.stack[ze+2],Qe;if(Ze.ttisinteger()&&We.ttisinteger()&&(Qe=Ae(qe,We.value))){let $e=Qe.stopnow?0:Ze.value;qe.value=Qe.ilimit,Ze.value=0|$e-We.value}else{let $e,at,lt;!1===($e=xe(qe))&&W.luaG_runerror(Ge,I.to_luastring('\'for\' limit must be a number',!0)),Ge.stack[ze+1].setfltvalue($e),!1===(at=xe(We))&&W.luaG_runerror(Ge,I.to_luastring('\'for\' step must be a number',!0)),Ge.stack[ze+2].setfltvalue(at),!1===(lt=xe(Ze))&&W.luaG_runerror(Ge,I.to_luastring('\'for\' initial value must be a number',!0)),Ge.stack[ze].setfltvalue(lt-at)}Fe.l_savedpc+=Ye.sBx;break}case Ve.OP_TFORCALL:{let Ze=ze+3;M.setobjs2s(Ge,Ze+2,ze+2),M.setobjs2s(Ge,Ze+1,ze+1),M.setobjs2s(Ge,Ze,ze),Y.adjust_top(Ge,Ze+3),Y.luaD_call(Ge,Ze,Ye.C),Y.adjust_top(Ge,Fe.top),Ye=Fe.l_code[Fe.l_savedpc++],ze=te(Ge,He,Ye),E(Ye.opcode===Ve.OP_TFORLOOP)}case Ve.OP_TFORLOOP:{Ge.stack[ze+1].ttisnil()||(M.setobjs2s(Ge,ze,ze+1),Fe.l_savedpc+=Ye.sBx);break}case Ve.OP_SETLIST:{let Ze=Ye.B,qe=Ye.C;0===Ze&&(Ze=Ge.top-ze-1),0===qe&&(E(Fe.l_code[Fe.l_savedpc].opcode===Ve.OP_EXTRAARG),qe=Fe.l_code[Fe.l_savedpc++].Ax);for(let We=Ge.stack[ze].value,Qe=(qe-1)*N.LFIELDS_PER_FLUSH+Ze;0<Ze;Ze--)q.luaH_setint(We,Qe--,Ge.stack[ze+Ze]);Y.adjust_top(Ge,Fe.top);break}case Ve.OP_CLOSURE:{let Ze=je.p.p[Ye.Bx],qe=Ie(Ze,je.upvals,Ge.stack,He);null===qe?Ne(Ge,Ze,je.upvals,He,ze):Ge.stack[ze].setclLvalue(qe);break}case Ve.OP_VARARG:{let Ze=Ye.B-1,qe=He-Fe.funcOff-je.p.numparams-1,We;for(0>qe&&(qe=0),0>Ze&&(Ze=qe,Y.luaD_checkstack(Ge,qe),Y.adjust_top(Ge,ze+qe)),We=0;We<Ze&&We<qe;We++)M.setobjs2s(Ge,ze+We,He-qe+We);for(;We<Ze;We++)Ge.stack[ze+We].setnilvalue();break}case Ve.OP_EXTRAARG:throw Error('invalid opcode');}}},T.exports.luaV_finishOp=function(Ge){let Ve=Ge.ci,Fe=N.OpCodesI,je=Ve.l_base,Xe=Ve.l_code[Ve.l_savedpc-1],He=Xe.opcode;switch(He){case Fe.OP_ADD:case Fe.OP_SUB:case Fe.OP_MUL:case Fe.OP_DIV:case Fe.OP_IDIV:case Fe.OP_BAND:case Fe.OP_BOR:case Fe.OP_BXOR:case Fe.OP_SHL:case Fe.OP_SHR:case Fe.OP_MOD:case Fe.OP_POW:case Fe.OP_UNM:case Fe.OP_BNOT:case Fe.OP_LEN:case Fe.OP_GETTABUP:case Fe.OP_GETTABLE:case Fe.OP_SELF:{M.setobjs2s(Ge,je+Xe.A,Ge.top-1),delete Ge.stack[--Ge.top];break}case Fe.OP_LE:case Fe.OP_LT:case Fe.OP_EQ:{let Ye=!Ge.stack[Ge.top-1].l_isfalse();delete Ge.stack[--Ge.top],Ve.callstatus&V.CIST_LEQ&&(E(He===Fe.OP_LE),Ve.callstatus^=V.CIST_LEQ,Ye=!Ye),E(Ve.l_code[Ve.l_savedpc].opcode===Fe.OP_JMP),Ye!=!!Xe.A&&Ve.l_savedpc++;break}case Fe.OP_CONCAT:{let Ye=Ge.top-1,ze=Xe.B,Je=Ye-1-(je+ze);M.setobjs2s(Ge,Ye-2,Ye),1<Je&&(Ge.top=Ye-1,De(Ge,Je)),M.setobjs2s(Ge,Ve.l_base+Xe.A,Ge.top-1),Y.adjust_top(Ge,Ve.top);break}case Fe.OP_TFORCALL:{E(Ve.l_code[Ve.l_savedpc].opcode===Fe.OP_TFORLOOP),Y.adjust_top(Ge,Ve.top);break}case Fe.OP_CALL:{0<=Xe.C-1&&Y.adjust_top(Ge,Ve.top);break}}},T.exports.luaV_lessequal=de,T.exports.luaV_lessthan=ce,T.exports.luaV_mod=ke,T.exports.luaV_objlen=ve,T.exports.luaV_rawequalobj=function(Ge,Ve){return ge(null,Ge,Ve)},T.exports.luaV_shiftl=Se,T.exports.luaV_tointeger=he,T.exports.settable=we,T.exports.tointeger=Te,T.exports.tonumber=xe},function(T,O){(function(U){T.exports=U}).call(O,{})},function(T){T.exports=function(U){return U.webpackPolyfill||(U.deprecate=function(){},U.paths=[],!U.children&&(U.children=[]),Object.defineProperty(U,'loaded',{enumerable:!0,get:function(){return U.l}}),Object.defineProperty(U,'id',{enumerable:!0,get:function(){return U.i}}),U.webpackPolyfill=1),U}},function(T){function U(){throw new Error('setTimeout has not been defined')}function E(){throw new Error('clearTimeout has not been defined')}function I($){if(H===setTimeout)return setTimeout($,0);if((H===U||!H)&&setTimeout)return H=setTimeout,setTimeout($,0);try{return H($,0)}catch(ee){try{return H.call(null,$,0)}catch(te){return H.call(this,$,0)}}}function N($){if(Y===clearTimeout)return clearTimeout($);if((Y===E||!Y)&&clearTimeout)return Y=clearTimeout,clearTimeout($);try{return Y($)}catch(ee){try{return Y.call(null,$)}catch(te){return Y.call(this,$)}}}function P(){q&&W&&(q=!1,W.length?J=W.concat(J):Q=-1,J.length&&M())}function M(){if(!q){var $=I(P);q=!0;for(var ee=J.length;ee;){for(W=J,J=[];++Q<ee;)W&&W[Q].run();Q=-1,ee=J.length}W=null,q=!1,N($)}}function K($,ee){this.fun=$,this.array=ee}function V(){}var F=T.exports={},H,Y;(function(){try{H='function'==typeof setTimeout?setTimeout:U}catch($){H=U}try{Y='function'==typeof clearTimeout?clearTimeout:E}catch($){Y=E}})();var J=[],q=!1,Q=-1,W;F.nextTick=function($){var ee=Array(arguments.length-1);if(1<arguments.length)for(var te=1;te<arguments.length;te++)ee[te-1]=arguments[te];J.push(new K($,ee)),1!==J.length||q||I(M)},K.prototype.run=function(){this.fun.apply(null,this.array)},F.title='browser',F.browser=!0,F.env={},F.argv=[],F.version='',F.versions={},F.on=V,F.addListener=V,F.once=V,F.off=V,F.removeListener=V,F.removeAllListeners=V,F.emit=V,F.prependListener=V,F.prependOnceListener=V,F.listeners=function(){return[]},F.binding=function(){throw new Error('process.binding is not supported')},F.cwd=function(){return'/'},F.chdir=function(){throw new Error('process.chdir is not supported')},F.umask=function(){return 0}},function(T,O,U){'use strict';const E=U(0),K=-1,V=function(H){let J=H.reader(H.L,H.data),Y;return null===J?K:(J instanceof DataView?(H.buffer=new Uint8Array(J.buffer,J.byteOffset,J.byteLength),H.off=0,Y=J.byteLength-J.byteOffset):(E('string'!=typeof J,'Should only load binary of array of bytes'),H.buffer=J,H.off=0,Y=J.length),0===Y)?K:(H.n=Y-1,H.buffer[H.off++])};T.exports.EOZ=K,T.exports.luaZ_buffremove=function(H,Y){H.n-=Y},T.exports.luaZ_fill=V,T.exports.luaZ_read=function(H,Y,J,q){for(;q;){if(0===H.n){if(V(H)===K)return q;H.n++,H.off--}let W=q<=H.n?q:H.n;for(let Q=0;Q<W;Q++)Y[J++]=H.buffer[H.off++];H.n-=W,0===H.n&&(H.buffer=null),q-=W}return 0},T.exports.luaZ_resetbuffer=function(H){H.n=0,H.buffer=[]},T.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},T.exports.ZIO=class{constructor(H,Y,J){this.L=H,E('function'==typeof Y,'ZIO requires a reader'),this.reader=Y,this.data=J,this.n=0,this.buffer=null,this.off=0}zgetc(){return 0<this.n--?this.buffer[this.off++]:V(this)}}},function(T){var U=function(){return this}();try{U=U||Function('return this')()||(1,eval)('this')}catch(E){'object'==typeof window&&(U=window)}T.exports=U},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(10),P=U(7),M=U(44),K=U(11),V=U(3),F=U(12),H=U(8),Y=U(15),J=U(13),q=U(16),W=U(9),Q=U(20),$=K.MAXUPVAL,ee=I.constant_types,te=I.thread_status,ae=V.TValue,ue=V.CClosure,se=function(Ra){return Ra!==V.luaO_nilobject},pe=function(Ra,Sa){let Ia=Ra.ci;if(0<Sa){let Na=Ia.funcOff+Sa;return E(Sa<=Ia.top-(Ia.funcOff+1),'unacceptable index'),Na>=Ra.top?V.luaO_nilobject:Ra.stack[Na]}return Sa>I.LUA_REGISTRYINDEX?(E(0!=Sa&&-Sa<=Ra.top,'invalid index'),Ra.stack[Ra.top+Sa]):Sa===I.LUA_REGISTRYINDEX?Ra.l_G.l_registry:(Sa=I.LUA_REGISTRYINDEX-Sa,E(Sa<=$+1,'upvalue index too large'),Ia.func.ttislcf()?V.luaO_nilobject:Sa<=Ia.func.value.nupvalues?Ia.func.value.upvalue[Sa-1]:V.luaO_nilobject)},ce=function(Ra,Sa){let Ia=Ra.ci;if(0<Sa){let Na=Ia.funcOff+Sa;return E(Sa<=Ia.top-(Ia.funcOff+1),'unacceptable index'),Na>=Ra.top?null:Na}if(Sa>I.LUA_REGISTRYINDEX)return E(0!=Sa&&-Sa<=Ra.top,'invalid index'),Ra.top+Sa;throw Error('attempt to use pseudo-index')},Te=function(Ra,Sa){let Ia=Ra.ci.funcOff,Na;0<=Sa?(E(Sa<=Ra.stack_last-(Ia+1),'new top too large'),Na=Ia+1+Sa):(E(-(Sa+1)<=Ra.top-(Ia+1),'invalid new top'),Na=Ra.top+Sa+1),P.adjust_top(Ra,Na)},xe=function(Ra,Sa){Te(Ra,-Sa-1)},Oe=function(Ra,Sa,Ia){for(;Sa<Ia;Sa++,Ia--){let Na=Ra.stack[Sa],Ca=new ae(Na.type,Na.value);V.setobjs2s(Ra,Sa,Ia),V.setobj2s(Ra,Ia,Ca)}},Ue=function(Ra,Sa,Ia){let Na=Ra.top-1,Ca=ce(Ra,Sa),Pa=Ra.stack[Ca];E(se(Pa)&&Sa>I.LUA_REGISTRYINDEX,'index not in the stack'),E((0<=Ia?Ia:-Ia)<=Na-Ca+1,'invalid \'n\'');let Ma=0<=Ia?Na-Ia:Ca-Ia-1;Oe(Ra,Ca,Ma),Oe(Ra,Ma+1,Ra.top-1),Oe(Ra,Ca,Ra.top-1)},Ee=function(Ra,Sa,Ia){let Na=pe(Ra,Sa);pe(Ra,Ia).setfrom(Na)},De=function(Ra,Sa,Ia){if(E('function'==typeof Sa),E('number'==typeof Ia),0===Ia)Ra.stack[Ra.top]=new ae(ee.LUA_TLCF,Sa);else{E(Ia<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),E(Ia<=$,'upvalue index too large');let Na=new ue(Ra,Sa,Ia);for(let Ca=0;Ca<Ia;Ca++)Na.upvalue[Ca].setfrom(Ra.stack[Ra.top-Ia+Ca]);for(let Ca=1;Ca<Ia;Ca++)delete Ra.stack[--Ra.top];0<Ia&&--Ra.top,Ra.stack[Ra.top].setclCvalue(Na)}Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},Be=function(Ra,Sa){De(Ra,Sa,0)},Xe=function(Ra,Sa,Ia){E(I.is_luastring(Ia),'key must be an array of bytes');let Na=H.luaS_new(Ra,Ia);E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),V.pushsvalue2s(Ra,Na),E(Ra.top<=Ra.ci.top,'stack overflow'),q.settable(Ra,Sa,Ra.stack[Ra.top-1],Ra.stack[Ra.top-2]),delete Ra.stack[--Ra.top],delete Ra.stack[--Ra.top]},He=function(Ra,Sa){Xe(Ra,W.luaH_getint(Ra.l_G.l_registry.value,I.LUA_RIDX_GLOBALS),Sa)},$e=function(Ra,Sa,Ia){E(I.is_luastring(Ia),'key must be an array of bytes');let Na=H.luaS_new(Ra,Ia);return V.pushsvalue2s(Ra,Na),E(Ra.top<=Ra.ci.top,'stack overflow'),q.luaV_gettable(Ra,Sa,Ra.stack[Ra.top-1],Ra.top-1),Ra.stack[Ra.top-1].ttnov()},at=function(Ra,Sa,Ia){let Na=pe(Ra,Sa);return E(Na.ttistable(),'table expected'),V.pushobj2s(Ra,W.luaH_getint(Na.value,Ia)),E(Ra.top<=Ra.ci.top,'stack overflow'),Ra.stack[Ra.top-1].ttnov()},st=function(Ra){let Na=new V.TValue(ee.LUA_TTABLE,W.luaH_new(Ra));Ra.stack[Ra.top]=Na,Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},nt=function(Ra,Sa){return new V.Udata(Ra,Sa)},_t=function(Ra,Sa,Ia){switch(Sa.ttype()){case ee.LUA_TCCL:{let Na=Sa.value;return 1<=Ia&&Ia<=Na.nupvalues?{name:[],val:Na.upvalue[Ia-1]}:null}case ee.LUA_TLCL:{let Na=Sa.value,Ca=Na.p;if(!(1<=Ia&&Ia<=Ca.upvalues.length))return null;let Pa=Ca.upvalues[Ia-1].name;return{name:Pa?Pa.getstr():I.to_luastring('(*no name)',!0),val:Na.upvals[Ia-1].v}}default:return null;}},Ut=function(Ra,Sa){let Ia=pe(Ra,Sa);if(!Ia.ttisstring()){if(!q.cvt2str(Ia))return null;V.luaO_tostring(Ra,Ia)}return Ia.svalue()},vt=function(Ra,Sa){let Ia=pe(Ra,Sa);if(!Ia.ttisstring()){if(!q.cvt2str(Ia))return null;V.luaO_tostring(Ra,Ia)}return Ia.jsstring()},Dt=new WeakMap,Bt=function(Ra,Sa,Ia){let Na=function(Ca){E(Ca instanceof F.lua_State&&Ra===Ca.l_G,'must be from same global state'),Ca.stack[Ca.top]=new ae(Sa,Ia),Ca.top++,E(Ca.top<=Ca.ci.top,'stack overflow')};return Dt.set(Na,Ra),Na},jt=function(Ra,Sa){P.luaD_callnoyield(Ra,Sa.funcOff,Sa.nresults)},Xt=function(Ra,Sa){let Ia=pe(Ra,Sa);return se(Ia)?Ia.ttnov():ee.LUA_TNONE},ca=function(Ra,Sa,Ia,Na,Ca){E(null===Ca||!(Ra.ci.callstatus&F.CIST_LUA),'cannot use continuations inside hooks'),E(Sa+1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),E(Ra.status===te.LUA_OK,'cannot do calls on non-normal thread'),E(Sa===I.LUA_MULTRET||Ra.ci.top-Ra.top>=Sa-Ia,'results from function overflow current stack size');let Pa=Ra.top-(Sa+1);null!==Ca&&0===Ra.nny?(Ra.ci.c_k=Ca,Ra.ci.c_ctx=Na,P.luaD_call(Ra,Pa,Ia)):P.luaD_callnoyield(Ra,Pa,Ia),Ia===I.LUA_MULTRET&&Ra.ci.top<Ra.top&&(Ra.ci.top=Ra.top)},fa=function(Ra,Sa,Ia,Na,Ca,Pa){E(Sa+1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),E(Ra.status===te.LUA_OK,'cannot do calls on non-normal thread'),E(Sa===I.LUA_MULTRET||Ra.ci.top-Ra.top>=Sa-Ia,'results from function overflow current stack size');let Ma={func:null,funcOff:NaN,nresults:NaN},ya,Da;if(Da=0===Na?0:ce(Ra,Na),Ma.funcOff=Ra.top-(Sa+1),Ma.func=Ra.stack[Ma.funcOff],null===Pa||0<Ra.nny)Ma.nresults=Ia,ya=P.luaD_pcall(Ra,jt,Ma,Ma.funcOff,Da);else{let Ka=Ra.ci;Ka.c_k=Pa,Ka.c_ctx=Ca,Ka.extra=Ma.funcOff,Ka.c_old_errfunc=Ra.errfunc,Ra.errfunc=Da,Ka.callstatus&=~F.CIST_OAH|Ra.allowhook,Ka.callstatus|=F.CIST_YPCALL,P.luaD_call(Ra,Ma.funcOff,Ia),Ka.callstatus&=~F.CIST_YPCALL,Ra.errfunc=Ka.c_old_errfunc,ya=te.LUA_OK}return Ia===I.LUA_MULTRET&&Ra.ci.top<Ra.top&&(Ra.ci.top=Ra.top),ya},xa=function(Ra,Sa,Ia){let Na=pe(Ra,Sa);E(Na.ttisLclosure(),'Lua function expected');let Ca=Na.value;return E(1<=Ia&&Ia<=Ca.p.upvalues.length,'invalid upvalue index'),{closure:Ca,upval:Ca.upvals[Ia-1],upvalOff:Ia-1}};T.exports.index2addr=pe,T.exports.index2addr_=ce,T.exports.lua_absindex=function(Ra,Sa){return 0<Sa||Sa<=I.LUA_REGISTRYINDEX?Sa:Ra.top-Ra.ci.funcOff+Sa},T.exports.lua_arith=function(Ra,Sa){Sa!==I.LUA_OPUNM&&Sa!==I.LUA_OPBNOT?E(2<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'):(E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),V.pushobj2s(Ra,Ra.stack[Ra.top-1]),E(Ra.top<=Ra.ci.top,'stack overflow')),V.luaO_arith(Ra,Sa,Ra.stack[Ra.top-2],Ra.stack[Ra.top-1],Ra.stack[Ra.top-2]),delete Ra.stack[--Ra.top]},T.exports.lua_atpanic=function(Ra,Sa){let Ia=Ra.l_G.panic;return Ra.l_G.panic=Sa,Ia},T.exports.lua_atnativeerror=function(Ra,Sa){let Ia=Ra.l_G.atnativeerror;return Ra.l_G.atnativeerror=Sa,Ia},T.exports.lua_call=function(Ra,Sa,Ia){ca(Ra,Sa,Ia,0,null)},T.exports.lua_callk=ca,T.exports.lua_checkstack=function(Ra,Sa){let Na=Ra.ci,Ia;if(E(0<=Sa,'negative \'n\''),Ra.stack_last-Ra.top>Sa)Ia=!0;else{let Ca=Ra.top+F.EXTRA_STACK;Ca>J.LUAI_MAXSTACK-Sa?Ia=!1:(P.luaD_growstack(Ra,Sa),Ia=!0)}return Ia&&Na.top<Ra.top+Sa&&(Na.top=Ra.top+Sa),Ia},T.exports.lua_compare=function(Ra,Sa,Ia,Na){let Ca=pe(Ra,Sa),Pa=pe(Ra,Ia),Ma=0;return se(Ca)&&se(Pa)&&(Na===I.LUA_OPEQ?Ma=q.luaV_equalobj(Ra,Ca,Pa):Na===I.LUA_OPLT?Ma=q.luaV_lessthan(Ra,Ca,Pa):Na===I.LUA_OPLE?Ma=q.luaV_lessequal(Ra,Ca,Pa):E(!1,'invalid option')),Ma},T.exports.lua_concat=function(Ra,Sa){E(Sa<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),2<=Sa?q.luaV_concat(Ra,Sa):0==Sa&&(V.pushsvalue2s(Ra,H.luaS_bless(Ra,[])),E(Ra.top<=Ra.ci.top,'stack overflow'))},T.exports.lua_copy=Ee,T.exports.lua_createtable=st,T.exports.lua_dump=function(Ra,Sa,Ia,Na){E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Ca=Ra.stack[Ra.top-1];return Ca.ttisLclosure()?M.luaU_dump(Ra,Ca.value.p,Sa,Ia,Na):1},T.exports.lua_error=function(Ra){E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),N.luaG_errormsg(Ra)},T.exports.lua_gc=function(){},T.exports.lua_getallocf=function(){return console.warn('lua_getallocf is not available'),0},T.exports.lua_getextraspace=function(){return console.warn('lua_getextraspace is not available'),0},T.exports.lua_getfield=function(Ra,Sa,Ia){return $e(Ra,pe(Ra,Sa),Ia)},T.exports.lua_getglobal=function(Ra,Sa){return $e(Ra,W.luaH_getint(Ra.l_G.l_registry.value,I.LUA_RIDX_GLOBALS),Sa)},T.exports.lua_geti=function(Ra,Sa,Ia){E('number'==typeof Ia&&(0|Ia)===Ia);let Na=pe(Ra,Sa);return Ra.stack[Ra.top]=new ae(ee.LUA_TNUMINT,Ia),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),q.luaV_gettable(Ra,Na,Ra.stack[Ra.top-1],Ra.top-1),Ra.stack[Ra.top-1].ttnov()},T.exports.lua_getmetatable=function(Ra,Sa){let Ia=pe(Ra,Sa),Ca=!1,Na;switch(Ia.ttnov()){case ee.LUA_TTABLE:case ee.LUA_TUSERDATA:Na=Ia.value.metatable;break;default:Na=Ra.l_G.mt[Ia.ttnov()];}return null!==Na&&void 0!==Na&&(Ra.stack[Ra.top]=new ae(ee.LUA_TTABLE,Na),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),Ca=!0),Ca},T.exports.lua_gettable=function(Ra,Sa){let Ia=pe(Ra,Sa);return q.luaV_gettable(Ra,Ia,Ra.stack[Ra.top-1],Ra.top-1),Ra.stack[Ra.top-1].ttnov()},T.exports.lua_gettop=function(Ra){return Ra.top-(Ra.ci.funcOff+1)},T.exports.lua_getupvalue=function(Ra,Sa,Ia){let Na=_t(Ra,pe(Ra,Sa),Ia);if(Na){let Ca=Na.name,Pa=Na.val;return V.pushobj2s(Ra,Pa),E(Ra.top<=Ra.ci.top,'stack overflow'),Ca}return null},T.exports.lua_getuservalue=function(Ra,Sa){let Ia=pe(Ra,Sa);E(Ra,Ia.ttisfulluserdata(),'full userdata expected');let Na=Ia.value.uservalue;return Ra.stack[Ra.top]=new ae(Na.type,Na.value),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),Ra.stack[Ra.top-1].ttnov()},T.exports.lua_insert=function(Ra,Sa){Ue(Ra,Sa,1)},T.exports.lua_isboolean=function(Ra,Sa){return Xt(Ra,Sa)===ee.LUA_TBOOLEAN},T.exports.lua_iscfunction=function(Ra,Sa){let Ia=pe(Ra,Sa);return Ia.ttislcf(Ia)||Ia.ttisCclosure()},T.exports.lua_isfunction=function(Ra,Sa){return Xt(Ra,Sa)===ee.LUA_TFUNCTION},T.exports.lua_isinteger=function(Ra,Sa){return pe(Ra,Sa).ttisinteger()},T.exports.lua_islightuserdata=function(Ra,Sa){return Xt(Ra,Sa)===ee.LUA_TLIGHTUSERDATA},T.exports.lua_isnil=function(Ra,Sa){return Xt(Ra,Sa)===ee.LUA_TNIL},T.exports.lua_isnone=function(Ra,Sa){return Xt(Ra,Sa)===ee.LUA_TNONE},T.exports.lua_isnoneornil=function(Ra,Sa){return 0>=Xt(Ra,Sa)},T.exports.lua_isnumber=function(Ra,Sa){return!1!==q.tonumber(pe(Ra,Sa))},T.exports.lua_isproxy=function(Ra,Sa){let Ia=Dt.get(Ra);return!!Ia&&(null===Sa||Sa.l_G===Ia)},T.exports.lua_isstring=function(Ra,Sa){let Ia=pe(Ra,Sa);return Ia.ttisstring()||q.cvt2str(Ia)},T.exports.lua_istable=function(Ra,Sa){return pe(Ra,Sa).ttistable()},T.exports.lua_isthread=function(Ra,Sa){return Xt(Ra,Sa)===ee.LUA_TTHREAD},T.exports.lua_isuserdata=function(Ra,Sa){let Ia=pe(Ra,Sa);return Ia.ttisfulluserdata(Ia)||Ia.ttislightuserdata()},T.exports.lua_len=function(Ra,Sa){let Ia=pe(Ra,Sa),Na=new ae;q.luaV_objlen(Ra,Na,Ia),Ra.stack[Ra.top]=Na,Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},T.exports.lua_load=function(Ra,Sa,Ia,Na,Ca){E(I.is_luastring(Na),'lua_load expect an array of byte as chunkname'),E(!Ca||I.is_luastring(Ca),'lua_load expect an array of byte as mode'),Na||(Na=[I.char['?']]);let Pa=new Q.ZIO(Ra,Sa,Ia),Ma=P.luaD_protectedparser(Ra,Pa,Na,Ca);if(Ma===te.LUA_OK){let ya=Ra.stack[Ra.top-1].value;if(1<=ya.nupvalues){let Da=W.luaH_getint(Ra.l_G.l_registry.value,I.LUA_RIDX_GLOBALS);ya.upvals[0].v.setfrom(Da)}}return Ma},T.exports.lua_newtable=function(Ra){st(Ra,0,0)},T.exports.lua_newuserdata=function(Ra,Sa){let Ia=nt(Ra,Sa);return Ra.stack[Ra.top]=new V.TValue(ee.LUA_TUSERDATA,Ia),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),Ia.data},T.exports.lua_next=function(Ra,Sa){let Ia=pe(Ra,Sa);E(Ia.ttistable(),'table expected'),Ra.stack[Ra.top]=new ae;let Na=W.luaH_next(Ra,Ia.value,Ra.top-1);return Na?(Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),1):(delete Ra.stack[Ra.top],delete Ra.stack[--Ra.top],0)},T.exports.lua_pcall=function(Ra,Sa,Ia,Na){return fa(Ra,Sa,Ia,Na,0,null)},T.exports.lua_pcallk=fa,T.exports.lua_pop=xe,T.exports.lua_pushboolean=function(Ra,Sa){Ra.stack[Ra.top]=new ae(ee.LUA_TBOOLEAN,!!Sa),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},T.exports.lua_pushcclosure=De,T.exports.lua_pushcfunction=Be,T.exports.lua_pushfstring=function(Ra,Sa,...Ia){return E(I.is_luastring(Sa)),V.luaO_pushvfstring(Ra,Sa,Ia)},T.exports.lua_pushglobaltable=function(Ra){at(Ra,I.LUA_REGISTRYINDEX,I.LUA_RIDX_GLOBALS)},T.exports.lua_pushinteger=function(Ra,Sa){E('number'==typeof Sa&&(0|Sa)===Sa),Ra.stack[Ra.top]=new ae(ee.LUA_TNUMINT,Sa),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},T.exports.lua_pushjsclosure=De,T.exports.lua_pushjsfunction=Be,T.exports.lua_pushlightuserdata=function(Ra,Sa){Ra.stack[Ra.top]=new ae(ee.LUA_TLIGHTUSERDATA,Sa),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},T.exports.lua_pushliteral=function(Ra,Sa){if(E('string'==typeof Sa||void 0===Sa||null===Sa,'lua_pushliteral expects a JS string'),void 0===Sa||null===Sa)Ra.stack[Ra.top]=new ae(ee.LUA_TNIL,null),Ra.top++;else{let Ia=H.luaS_newliteral(Ra,Sa);V.pushsvalue2s(Ra,Ia),Sa=Ia.getstr()}return E(Ra.top<=Ra.ci.top,'stack overflow'),Sa},T.exports.lua_pushlstring=function(Ra,Sa,Ia){E('number'==typeof Ia);let Na;return 0===Ia?Na=H.luaS_bless(Ra,[]):(E(I.is_luastring(Sa)&&Sa.length>=Ia,'lua_pushlstring expects array of byte'),Na=H.luaS_bless(Ra,Sa.slice(0,Ia))),V.pushsvalue2s(Ra,Na),E(Ra.top<=Ra.ci.top,'stack overflow'),Na.value},T.exports.lua_pushnil=function(Ra){Ra.stack[Ra.top]=new ae(ee.LUA_TNIL,null),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},T.exports.lua_pushnumber=function(Ra,Sa){E('number'==typeof Sa),Ra.stack[Ra.top]=new ae(ee.LUA_TNUMFLT,Sa),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow')},T.exports.lua_pushstring=function(Ra,Sa){if(E(I.is_luastring(Sa)||void 0===Sa||null===Sa,'lua_pushstring expects array of byte'),void 0===Sa||null===Sa)Ra.stack[Ra.top]=new ae(ee.LUA_TNIL,null),Ra.top++;else{let Ia=H.luaS_new(Ra,Sa);V.pushsvalue2s(Ra,Ia),Sa=Ia.getstr()}return E(Ra.top<=Ra.ci.top,'stack overflow'),Sa},T.exports.lua_pushthread=function(Ra){return Ra.stack[Ra.top]=new ae(ee.LUA_TTHREAD,Ra),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),Ra.l_G.mainthread===Ra},T.exports.lua_pushvalue=function(Ra,Sa){V.pushobj2s(Ra,pe(Ra,Sa)),E(Ra.top<=Ra.ci.top,'stack overflow')},T.exports.lua_pushvfstring=function(Ra,Sa,Ia){return E(I.is_luastring(Sa)),V.luaO_pushvfstring(Ra,Sa,Ia)},T.exports.lua_rawequal=function(Ra,Sa,Ia){let Na=pe(Ra,Sa),Ca=pe(Ra,Ia);return se(Na)&&se(Ca)?q.luaV_equalobj(null,Na,Ca):0},T.exports.lua_rawget=function(Ra,Sa){let Ia=pe(Ra,Sa);return E(Ia.ttistable(Ia),'table expected'),V.setobj2s(Ra,Ra.top-1,W.luaH_get(Ra,Ia.value,Ra.stack[Ra.top-1])),Ra.stack[Ra.top-1].ttnov()},T.exports.lua_rawgeti=at,T.exports.lua_rawgetp=function(Ra,Sa,Ia){let Na=pe(Ra,Sa);E(Na.ttistable(),'table expected');let Ca=new ae(ee.LUA_TLIGHTUSERDATA,Ia);return V.pushobj2s(Ra,W.luaH_get(Ra,Na.value,Ca)),E(Ra.top<=Ra.ci.top,'stack overflow'),Ra.stack[Ra.top-1].ttnov()},T.exports.lua_rawlen=function(Ra,Sa){let Ia=pe(Ra,Sa);switch(Ia.ttype()){case ee.LUA_TSHRSTR:case ee.LUA_TLNGSTR:return Ia.vslen();case ee.LUA_TUSERDATA:return Ia.value.len;case ee.LUA_TTABLE:return W.luaH_getn(Ia.value);default:return 0;}},T.exports.lua_rawset=function(Ra,Sa){E(2<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Ia=pe(Ra,Sa);E(Ia.ttistable(),'table expected');let Na=Ra.stack[Ra.top-2],Ca=Ra.stack[Ra.top-1];if(Ca.ttisnil())W.luaH_delete(Ra,Ia.value,Na);else{let Pa=W.luaH_set(Ra,Ia.value,Na);Pa.setfrom(Ca)}W.invalidateTMcache(Ia.value),delete Ra.stack[--Ra.top],delete Ra.stack[--Ra.top]},T.exports.lua_rawseti=function(Ra,Sa,Ia){E(2<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Na=pe(Ra,Sa);E(Na.ttistable(),'table expected'),W.luaH_setint(Na.value,Ia,Ra.stack[Ra.top-1]),delete Ra.stack[--Ra.top]},T.exports.lua_rawsetp=function(Ra,Sa,Ia){E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Na=pe(Ra,Sa);E(Ra,Na.ttistable(),'table expected');let Ca=new ae(ee.LUA_TLIGHTUSERDATA,Ia),Pa=Ra.stack[Ra.top-1];if(Pa.ttisnil())W.luaH_delete(Ra,Na.value,Ca);else{let Ma=W.luaH_set(Ra,Na.value,Ca);Ma.setfrom(Pa)}delete Ra.stack[--Ra.top]},T.exports.lua_register=function(Ra,Sa,Ia){Be(Ra,Ia),He(Ra,Sa)},T.exports.lua_remove=function(Ra,Sa){Ue(Ra,Sa,-1),xe(Ra,1)},T.exports.lua_replace=function(Ra,Sa){Ee(Ra,-1,Sa),xe(Ra,1)},T.exports.lua_rotate=Ue,T.exports.lua_setallocf=function(){return console.warn('lua_setallocf is not available'),0},T.exports.lua_setfield=function(Ra,Sa,Ia){Xe(Ra,pe(Ra,Sa),Ia)},T.exports.lua_setglobal=He,T.exports.lua_seti=function(Ra,Sa,Ia){E('number'==typeof Ia&&(0|Ia)===Ia),E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Na=pe(Ra,Sa);Ra.stack[Ra.top]=new ae(ee.LUA_TNUMINT,Ia),Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),q.settable(Ra,Na,Ra.stack[Ra.top-1],Ra.stack[Ra.top-2]),delete Ra.stack[--Ra.top],delete Ra.stack[--Ra.top]},T.exports.lua_setmetatable=function(Ra,Sa){E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Na=pe(Ra,Sa),Ia;switch(Ra.stack[Ra.top-1].ttisnil()?Ia=null:(E(Ra.stack[Ra.top-1].ttistable(),'table expected'),Ia=Ra.stack[Ra.top-1].value),Na.ttnov()){case ee.LUA_TUSERDATA:case ee.LUA_TTABLE:{Na.value.metatable=Ia;break}default:{Ra.l_G.mt[Na.ttnov()]=Ia;break}}return delete Ra.stack[--Ra.top],!0},T.exports.lua_settable=function(Ra,Sa){E(2<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Ia=pe(Ra,Sa);q.settable(Ra,Ia,Ra.stack[Ra.top-2],Ra.stack[Ra.top-1]),delete Ra.stack[--Ra.top],delete Ra.stack[--Ra.top]},T.exports.lua_settop=Te,T.exports.lua_setupvalue=function(Ra,Sa,Ia){let Na=pe(Ra,Sa);E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Ca=_t(Ra,Na,Ia);if(Ca){let Pa=Ca.name,Ma=Ca.val;return Ma.setfrom(Ra.stack[Ra.top-1]),delete Ra.stack[--Ra.top],Pa}return null},T.exports.lua_setuservalue=function(Ra,Sa){E(1<Ra.top-Ra.ci.funcOff,'not enough elements in the stack');let Ia=pe(Ra,Sa);E(Ra,Ia.ttisfulluserdata(),'full userdata expected'),Ia.value.uservalue.setfrom(Ra.stack[Ra.top-1]),delete Ra.stack[--Ra.top]},T.exports.lua_status=function(Ra){return Ra.status},T.exports.lua_stringtonumber=function(Ra,Sa){let Ia=V.luaO_str2num(Sa);return Ia?(Ra.stack[Ra.top]=Ia,Ra.top++,E(Ra.top<=Ra.ci.top,'stack overflow'),Sa.length+1):0},T.exports.lua_toboolean=function(Ra,Sa){let Ia=pe(Ra,Sa);return!Ia.l_isfalse()},T.exports.lua_tocfunction=function(Ra,Sa){let Ia=pe(Ra,Sa);return Ia.ttislcf()||Ia.ttisCclosure()?Ia.value:null},T.exports.lua_todataview=function(Ra,Sa){let Ia=pe(Ra,Sa);if(!Ia.ttisstring()){if(!q.cvt2str(Ia))return null;V.luaO_tostring(Ra,Ia)}let Na=new DataView(new ArrayBuffer(Ia.vslen()));return Ia.svalue().forEach((Ca,Pa)=>Na.setUint8(Pa,Ca,!0)),Na},T.exports.lua_tointeger=function(Ra,Sa){return q.tointeger(pe(Ra,Sa))},T.exports.lua_tointegerx=function(Ra,Sa){return q.tointeger(pe(Ra,Sa))},T.exports.lua_tojsstring=vt,T.exports.lua_toljsstring=vt,T.exports.lua_tolstring=Ut,T.exports.lua_tonumber=function(Ra,Sa){let Ia=q.tonumber(pe(Ra,Sa));return!1===Ia?0:Ia},T.exports.lua_tonumberx=function(Ra,Sa){return q.tonumber(pe(Ra,Sa))},T.exports.lua_topointer=function(Ra,Sa){let Ia=pe(Ra,Sa);switch(Ia.ttype()){case ee.LUA_TTABLE:case ee.LUA_TLCL:case ee.LUA_TCCL:case ee.LUA_TLCF:case ee.LUA_TTHREAD:case ee.LUA_TUSERDATA:case ee.LUA_TLIGHTUSERDATA:return Ia.value;default:return null;}},T.exports.lua_toproxy=function(Ra,Sa){let Ia=pe(Ra,Sa);return Bt(Ra.l_G,Ia.type,Ia.value)},T.exports.lua_tostring=Ut,T.exports.lua_tothread=function(Ra,Sa){let Ia=pe(Ra,Sa);return Ia.ttisthread()?Ia.value:null},T.exports.lua_touserdata=function(Ra,Sa){let Ia=pe(Ra,Sa);switch(Ia.ttnov()){case ee.LUA_TUSERDATA:return Ia.value.data;case ee.LUA_TLIGHTUSERDATA:return Ia.value;default:return null;}},T.exports.lua_type=Xt,T.exports.lua_typename=function(Ra,Sa){return E(ee.LUA_TNONE<=Sa&&Sa<ee.LUA_NUMTAGS,'invalid tag'),Y.ttypename(Sa)},T.exports.lua_upvalueid=function(Ra,Sa,Ia){let Na=pe(Ra,Sa);switch(Na.ttype()){case ee.LUA_TLCL:return xa(Ra,Sa,Ia).upval;case ee.LUA_TCCL:{let Ca=Na.value;return E(1<=Ia&&Ia<=Ca.nupvalues,'invalid upvalue index'),Ca.upvalue[Ia-1]}default:return E(!1,'closure expected'),null;}},T.exports.lua_upvaluejoin=function(Ra,Sa,Ia,Na,Ca){let Pa=xa(Ra,Sa,Ia),Ma=xa(Ra,Na,Ca),ya=Pa.upval,Da=Ma.upval,Ka=Pa.closure;E(0<ya.refcount),ya.refcount--,Ka.upvals[Pa.upvalOff]=Da,Da.refcount++},T.exports.lua_version=function(Ra){return null===Ra?I.LUA_VERSION_NUM:Ra.l_G.version},T.exports.lua_xmove=function(Ra,Sa,Ia){if(Ra!==Sa){E(Ia<Ra.top-Ra.ci.funcOff,'not enough elements in the stack'),E(Ra.l_G===Sa.l_G,'moving among independent states'),E(Sa.ci.top-Sa.top>=Ia,'stack overflow'),Ra.top-=Ia;for(let Na=0;Na<Ia;Na++)Sa.stack[Sa.top]=new V.TValue,V.setobj2s(Sa,Sa.top,Ra.stack[Ra.top+Na]),delete Ra.stack[Ra.top+Na],Sa.top++}}},function(T,O,U){'use strict';const E=U(2),I=U(5),N=U(34);T.exports.lua=E,T.exports.lauxlib=I,T.exports.lualib=N},function(T,O,U){'use strict';const E=U(2),I=U(5),N=function($){let ee=E.lua_tothread($,1);return I.luaL_argcheck($,ee,1,E.to_luastring('thread expected',!0)),ee},P=function($,ee,te){if(!E.lua_checkstack(ee,te))return E.lua_pushliteral($,'too many arguments to resume'),-1;if(E.lua_status(ee)===E.LUA_OK&&0===E.lua_gettop(ee))return E.lua_pushliteral($,'cannot resume dead coroutine'),-1;E.lua_xmove($,ee,te);let ae=E.lua_resume(ee,$,te);if(ae===E.LUA_OK||ae===E.LUA_YIELD){let ue=E.lua_gettop(ee);return E.lua_checkstack($,ue+1)?(E.lua_xmove(ee,$,ue),ue):(E.lua_pop(ee,ue),E.lua_pushliteral($,'too many results to resume'),-1)}return E.lua_xmove(ee,$,1),-1},K=function($){let ee=E.lua_tothread($,E.lua_upvalueindex(1)),te=P($,ee,E.lua_gettop($));return 0>te?(E.lua_type($,-1)===E.LUA_TSTRING&&(I.luaL_where($,1),E.lua_insert($,-2),E.lua_concat($,2)),E.lua_error($)):te},V=function($){I.luaL_checktype($,1,E.LUA_TFUNCTION);let ee=E.lua_newthread($);return E.lua_pushvalue($,1),E.lua_xmove($,ee,1),1},W={create:V,isyieldable:function($){return E.lua_pushboolean($,E.lua_isyieldable($)),1},resume:function($){let ee=N($),te=P($,ee,E.lua_gettop($)-1);return 0>te?(E.lua_pushboolean($,0),E.lua_insert($,-2),2):(E.lua_pushboolean($,1),E.lua_insert($,-(te+1)),te+1)},running:function($){return E.lua_pushboolean($,E.lua_pushthread($)),2},status:function($){let ee=N($);if($===ee)E.lua_pushliteral($,'running');else switch(E.lua_status(ee)){case E.LUA_YIELD:E.lua_pushliteral($,'suspended');break;case E.LUA_OK:{let te=new E.lua_Debug;0<E.lua_getstack(ee,0,te)?E.lua_pushliteral($,'normal'):0===E.lua_gettop(ee)?E.lua_pushliteral($,'dead'):E.lua_pushliteral($,'suspended');break}default:E.lua_pushliteral($,'dead');}return 1},wrap:function($){return V($),E.lua_pushcclosure($,K,1),1},yield:function($){return E.lua_yield($,E.lua_gettop($))}};T.exports.luaopen_coroutine=function($){return I.luaL_newlib($,W),1}},function(T,O,U){'use strict';const E=U(0),I=U(2),N=U(5),P=function(Ue,Ee,ve){Ue===Ee||I.lua_checkstack(Ee,ve)||N.luaL_error(Ue,I.to_luastring('stack overflow',!0))},Y=function(Ue){return I.lua_isthread(Ue,1)?{arg:1,thread:I.lua_tothread(Ue,1)}:{arg:0,thread:Ue}},J=function(Ue,Ee,ve){I.lua_pushstring(Ue,ve),I.lua_setfield(Ue,-2,Ee)},q=function(Ue,Ee,ve){I.lua_pushinteger(Ue,ve),I.lua_setfield(Ue,-2,Ee)},W=function(Ue,Ee,ve){I.lua_pushboolean(Ue,ve),I.lua_setfield(Ue,-2,Ee)},Q=function(Ue,Ee,ve){Ue==Ee?I.lua_rotate(Ue,-2,1):I.lua_xmove(Ee,Ue,1),I.lua_setfield(Ue,-2,ve)},ae=function(Ue,Ee){let ve=N.luaL_checkinteger(Ue,2);N.luaL_checktype(Ue,1,I.LUA_TFUNCTION);let be=Ee?I.lua_getupvalue(Ue,1,ve):I.lua_setupvalue(Ue,1,ve);return null===be?0:(I.lua_pushstring(Ue,be),I.lua_insert(Ue,-(Ee+1)),Ee+1)},ne=function(Ue,Ee,ve){let be=N.luaL_checkinteger(Ue,ve);return N.luaL_checktype(Ue,Ee,I.LUA_TFUNCTION),N.luaL_argcheck(Ue,null!==I.lua_getupvalue(Ue,Ee,be),ve,I.to_luastring('invalid upvalue index',!0)),be},pe=I.to_luastring('__hooks__',!0),ce=['call','return','line','count','tail call'].map((Ue)=>I.to_luastring(Ue)),de=function(Ue,Ee){I.lua_rawgetp(Ue,I.LUA_REGISTRYINDEX,pe),I.lua_pushthread(Ue),I.lua_rawget(Ue,-2)===I.LUA_TFUNCTION&&(I.lua_pushstring(Ue,ce[Ee.event]),0<=Ee.currentline?I.lua_pushinteger(Ue,Ee.currentline):I.lua_pushnil(Ue),E(I.lua_getinfo(Ue,['l'.charCodeAt(0),'S'.charCodeAt(0)],Ee)),I.lua_call(Ue,2,0))},ge=function(Ue,Ee){let ve=0;return-1<Ue.indexOf('c'.charCodeAt(0))&&(ve|=I.LUA_MASKCALL),-1<Ue.indexOf('r'.charCodeAt(0))&&(ve|=I.LUA_MASKRET),-1<Ue.indexOf('l'.charCodeAt(0))&&(ve|=I.LUA_MASKLINE),0<Ee&&(ve|=I.LUA_MASKCOUNT),ve},Le=function(Ue,Ee){let ve=0;return Ue&I.LUA_MASKCALL&&(Ee[ve++]='c'.charCodeAt(0)),Ue&I.LUA_MASKRET&&(Ee[ve++]='r'.charCodeAt(0)),Ue&I.LUA_MASKLINE&&(Ee[ve++]='l'.charCodeAt(0)),Ee},xe={gethook:function(Ue){let Ee=Y(Ue),ve=Ee.thread,ke=I.lua_gethookmask(ve),Re=I.lua_gethook(ve);return null===Re?I.lua_pushnil(Ue):Re===de?(I.lua_rawgetp(Ue,I.LUA_REGISTRYINDEX,pe),P(Ue,ve,1),I.lua_pushthread(ve),I.lua_xmove(ve,Ue,1),I.lua_rawget(Ue,-2),I.lua_remove(Ue,-2)):I.lua_pushliteral(Ue,'external hook'),I.lua_pushstring(Ue,Le(ke,[])),I.lua_pushinteger(Ue,I.lua_gethookcount(ve)),3},getinfo:function(Ue){let Ee=new I.lua_Debug,ve=Y(Ue),be=ve.arg,ke=ve.thread,Re=N.luaL_optstring(Ue,be+2,I.to_luastring('flnStu',!0));if(P(Ue,ke,3),I.lua_isfunction(Ue,be+1))Re=I.lua_pushfstring(Ue,I.to_luastring('>%s'),Re),I.lua_pushvalue(Ue,be+1),I.lua_xmove(Ue,ke,1);else if(!I.lua_getstack(ke,N.luaL_checkinteger(Ue,be+1),Ee))return I.lua_pushnil(Ue),1;return I.lua_getinfo(ke,Re,Ee)||N.luaL_argerror(Ue,be+2,I.to_luastring('invalid option',!0)),I.lua_newtable(Ue),-1<Re.indexOf('S'.charCodeAt(0))&&(J(Ue,I.to_luastring('source',!0),Ee.source),J(Ue,I.to_luastring('short_src',!0),Ee.short_src),q(Ue,I.to_luastring('linedefined',!0),Ee.linedefined),q(Ue,I.to_luastring('lastlinedefined',!0),Ee.lastlinedefined),J(Ue,I.to_luastring('what',!0),Ee.what)),-1<Re.indexOf('l'.charCodeAt(0))&&q(Ue,I.to_luastring('currentline',!0),Ee.currentline),-1<Re.indexOf('u'.charCodeAt(0))&&(q(Ue,I.to_luastring('nups',!0),Ee.nups),q(Ue,I.to_luastring('nparams',!0),Ee.nparams),W(Ue,I.to_luastring('isvararg',!0),Ee.isvararg)),-1<Re.indexOf('n'.charCodeAt(0))&&(J(Ue,I.to_luastring('name',!0),Ee.name),J(Ue,I.to_luastring('namewhat',!0),Ee.namewhat)),-1<Re.indexOf('t'.charCodeAt(0))&&W(Ue,I.to_luastring('istailcall',!0),Ee.istailcall),-1<Re.indexOf('L'.charCodeAt(0))&&Q(Ue,ke,I.to_luastring('activelines',!0)),-1<Re.indexOf('f'.charCodeAt(0))&&Q(Ue,ke,I.to_luastring('func',!0)),1},getlocal:function(Ue){let Ee=Y(Ue),ve=Ee.thread,be=Ee.arg,ke=new I.lua_Debug,Re=N.luaL_checkinteger(Ue,be+2);if(I.lua_isfunction(Ue,be+1))return I.lua_pushvalue(Ue,be+1),I.lua_pushstring(Ue,I.lua_getlocal(Ue,null,Re)),1;let Se=N.luaL_checkinteger(Ue,be+1);if(!I.lua_getstack(ve,Se,ke))return N.luaL_argerror(Ue,be+1,I.to_luastring('level out of range',!0));P(Ue,ve,1);let Ie=I.lua_getlocal(ve,ke,Re);return Ie?(I.lua_xmove(ve,Ue,1),I.lua_pushstring(Ue,Ie),I.lua_rotate(Ue,-2,1),2):(I.lua_pushnil(Ue),1)},getmetatable:function(Ue){return N.luaL_checkany(Ue,1),I.lua_getmetatable(Ue,1)||I.lua_pushnil(Ue),1},getregistry:function(Ue){return I.lua_pushvalue(Ue,I.LUA_REGISTRYINDEX),1},getupvalue:function(Ue){return ae(Ue,1)},getuservalue:function(Ue){return I.lua_type(Ue,1)===I.LUA_TUSERDATA?I.lua_getuservalue(Ue,1):I.lua_pushnil(Ue),1},sethook:function(Ue){let ke=Y(Ue),Re=ke.thread,Se=ke.arg,Ee,ve,be;if(I.lua_isnoneornil(Ue,Se+1))I.lua_settop(Ue,Se+1),be=null,Ee=0,ve=0;else{const Ie=N.luaL_checkstring(Ue,Se+2);N.luaL_checktype(Ue,Se+1,I.LUA_TFUNCTION),ve=N.luaL_optinteger(Ue,Se+3,0),be=de,Ee=ge(Ie,ve)}return I.lua_rawgetp(Ue,I.LUA_REGISTRYINDEX,pe)===I.LUA_TNIL&&(I.lua_createtable(Ue,0,2),I.lua_pushvalue(Ue,-1),I.lua_rawsetp(Ue,I.LUA_REGISTRYINDEX,pe),I.lua_pushstring(Ue,['k'.charCodeAt(0)]),I.lua_setfield(Ue,-2,I.to_luastring('__mode',!0)),I.lua_pushvalue(Ue,-1),I.lua_setmetatable(Ue,-2)),P(Ue,Re,1),I.lua_pushthread(Re),I.lua_xmove(Re,Ue,1),I.lua_pushvalue(Ue,Se+1),I.lua_rawset(Ue,-3),I.lua_sethook(Re,be,Ee,ve),0},setlocal:function(Ue){let Ee=Y(Ue),ve=Ee.thread,be=Ee.arg,ke=new I.lua_Debug,Re=N.luaL_checkinteger(Ue,be+1),Se=N.luaL_checkinteger(Ue,be+2);if(!I.lua_getstack(ve,Re,ke))return N.luaL_argerror(Ue,be+1,'level out of range');N.luaL_checkany(Ue,be+3),I.lua_settop(Ue,be+3),P(Ue,ve,1),I.lua_xmove(Ue,ve,1);let Ie=I.lua_setlocal(ve,ke,Se);return null===Ie&&I.lua_pop(ve,1),I.lua_pushstring(Ue,Ie),1},setmetatable:function(Ue){const Ee=I.lua_type(Ue,2);return N.luaL_argcheck(Ue,Ee==I.LUA_TNIL||Ee==I.LUA_TTABLE,2,I.to_luastring('nil or table expected',!0)),I.lua_settop(Ue,2),I.lua_setmetatable(Ue,1),1},setupvalue:function(Ue){return N.luaL_checkany(Ue,3),ae(Ue,0)},setuservalue:function(Ue){return N.luaL_checktype(Ue,1,I.LUA_TUSERDATA),N.luaL_checkany(Ue,2),I.lua_settop(Ue,2),I.lua_setuservalue(Ue,1),1},traceback:function(Ue){let Ee=Y(Ue),ve=Ee.thread,be=Ee.arg,ke=I.lua_tostring(Ue,be+1);if(null===ke&&!I.lua_isnoneornil(Ue,be+1))I.lua_pushvalue(Ue,be+1);else{let Re=N.luaL_optinteger(Ue,be+2,Ue===ve?1:0);N.luaL_traceback(Ue,ve,ke,Re)}return 1},upvalueid:function(Ue){let Ee=ne(Ue,1,2);return I.lua_pushlightuserdata(Ue,I.lua_upvalueid(Ue,1,Ee)),1},upvaluejoin:function(Ue){let Ee=ne(Ue,1,2),ve=ne(Ue,3,4);return N.luaL_argcheck(Ue,!I.lua_iscfunction(Ue,1),1,I.to_luastring('Lua function expected',!0)),N.luaL_argcheck(Ue,!I.lua_iscfunction(Ue,3),3,I.to_luastring('Lua function expected',!0)),I.lua_upvaluejoin(Ue,1,Ee,3,ve),0}};T.exports.luaopen_debug=function(Ue){return N.luaL_newlib(Ue,xe),1}},function(T){'use strict';T.exports.lisdigit=function(V){return /^\d$/.test(_StringfromCharCode(V))},T.exports.lislalnum=function(V){return /^[_a-zA-Z0-9]$/.test(_StringfromCharCode(V))},T.exports.lislalpha=function(V){return /^[_a-zA-Z]$/.test(_StringfromCharCode(V))},T.exports.lisprint=function(V){return /^[\x20-\x7E]$/.test(_StringfromCharCode(V))},T.exports.lisspace=function(V){return /^\s$/.test(_StringfromCharCode(V))},T.exports.lisxdigit=function(V){return /^[0-9a-fA-F]$/.test(_StringfromCharCode(V))}},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(10),P=U(7),M=U(26),K=U(3),V=U(8),F=U(9),H=U(6),Y=U(20),J=I.thread_status,q=I.char,W=257,Q={TK_AND:W,TK_BREAK:W+1,TK_DO:W+2,TK_ELSE:W+3,TK_ELSEIF:W+4,TK_END:W+5,TK_FALSE:W+6,TK_FOR:W+7,TK_FUNCTION:W+8,TK_GOTO:W+9,TK_IF:W+10,TK_IN:W+11,TK_LOCAL:W+12,TK_NIL:W+13,TK_NOT:W+14,TK_OR:W+15,TK_REPEAT:W+16,TK_RETURN:W+17,TK_THEN:W+18,TK_TRUE:W+19,TK_UNTIL:W+20,TK_WHILE:W+21,TK_IDIV:W+22,TK_CONCAT:W+23,TK_DOTS:W+24,TK_EQ:W+25,TK_GE:W+26,TK_LE:W+27,TK_NE:W+28,TK_SHL:W+29,TK_SHR:W+30,TK_DBCOLON:W+31,TK_EOS:W+32,TK_FLT:W+33,TK_INT:W+34,TK_NAME:W+35,TK_STRING:W+36},$=Q,ee=['and','break','do','else','elseif','end','false','for','function','goto','if','in','local','nil','not','or','repeat','return','then','true','until','while','//','..','...','==','>=','<=','~=','<<','>>','::','<eof>','<number>','<integer>','<name>','<string>'];class te{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class ae{constructor(){this.token=NaN,this.seminfo=new te}}const se=function(Ke,Be){let we=Ke.buff;we.n+1>we.buffer.length&&we.buffer.length>=H.MAX_INT/2&&xe(Ke,I.to_luastring('lexical element too long',!0),0),we.buffer[we.n++]=0>Be?255+Be+1:Be},ne=function(Ke,Be){if(Be<W)return K.luaO_pushfstring(Ke.L,I.to_luastring('\'%c\'',!0),Be);let we=ee[Be-W];return Be<$.TK_EOS?K.luaO_pushfstring(Ke.L,I.to_luastring('\'%s\'',!0),I.to_luastring(we)):I.to_luastring(we)},oe=function(Ke){return Ke.current===q['\n']||Ke.current===q['\r']},_e=function(Ke){Ke.current=Ke.z.zgetc()},pe=function(Ke){se(Ke,Ke.current),_e(Ke)},ce=function(Ke,Be){let we=Ke.L,Ge=V.luaS_new(we,Be),Ve=F.luaH_set(we,Ke.h,new K.TValue(I.CT.LUA_TLNGSTR,Ge));if(Ve.ttisnil())Ve.setbvalue(!0);else{let Fe=Ke.h.strong.get(V.luaS_hashlongstr(Ge));E(Fe.value==Ve),Ge=Fe.key.tsvalue()}return Ge},de=function(Ke){let Be=Ke.current;E(oe(Ke)),_e(Ke),oe(Ke)&&Ke.current!==Be&&_e(Ke),++Ke.linenumber>=H.MAX_INT&&xe(Ke,I.to_luastring('chunk has too many lines',!0),0)},Le=function(Ke,Be){return Ke.current===Be.charCodeAt(0)&&(_e(Ke),!0)},Ae=function(Ke,Be){return(Ke.current===Be[0].charCodeAt(0)||Ke.current===Be[1].charCodeAt(0))&&(pe(Ke),!0)},he=function(Ke,Be){let we='Ee',Ge=Ke.current;for(E(M.lisdigit(Ke.current)),pe(Ke),Ge===q[0]&&Ae(Ke,'xX')&&(we='Pp');;)if(Ae(Ke,we)&&Ae(Ke,'-+'),M.lisxdigit(Ke.current))pe(Ke);else if(Ke.current===q['.'])pe(Ke);else break;let Ve=K.luaO_str2num(Ke.buff.buffer);return!1===Ve&&xe(Ke,I.to_luastring('malformed number',!0),$.TK_FLT),Ve.ttisinteger()?(Be.i=Ve.value,$.TK_INT):(E(Ve.ttisfloat()),Be.r=Ve.value,$.TK_FLT)},Te=function(Ke,Be){return Be===$.TK_NAME||Be===$.TK_STRING||Be===$.TK_FLT||Be===$.TK_INT?K.luaO_pushfstring(Ke.L,I.to_luastring('\'%s\'',!0),Ke.buff.buffer):ne(Ke,Be)},xe=function(Ke,Be,we){Be=N.luaG_addinfo(Ke.L,Be,Ke.source,Ke.linenumber),we&&K.luaO_pushfstring(Ke.L,I.to_luastring('%s near %s'),Be,Te(Ke,we)),P.luaD_throw(Ke.L,J.LUA_ERRSYNTAX)},Ue=function(Ke){let Be=0,we=Ke.current;for(E(we===q['[']||we===q[']']),pe(Ke);Ke.current===q['='];)pe(Ke),Be++;return Ke.current===we?Be:-Be-1},Ee=function(Ke,Be,we){let Ge=Ke.linenumber;pe(Ke),oe(Ke)&&de(Ke);for(let Ve=!1;!Ve;)switch(Ke.current){case Y.EOZ:{let Fe=Be?'string':'comment',je=`unfinished long ${Fe} (starting at line ${Ge})`;xe(Ke,I.to_luastring(je),$.TK_EOS);break}case q[']']:{Ue(Ke)===we&&(pe(Ke),Ve=!0);break}case q['\n']:case q['\r']:{se(Ke,q['\n']),de(Ke),Be||Y.luaZ_resetbuffer(Ke.buff);break}default:Be?pe(Ke):_e(Ke);}Be&&(Be.ts=ce(Ke,Ke.buff.buffer.slice(2+we,2+we-2*(2+we))))},ve=function(Ke,Be,we){Be||(Ke.current!==Y.EOZ&&pe(Ke),xe(Ke,we,$.TK_STRING))},be=function(Ke){return pe(Ke),ve(Ke,M.lisxdigit(Ke.current),I.to_luastring('hexadecimal digit expected',!0)),K.luaO_hexavalue(Ke.current)},ke=function(Ke){let Be=be(Ke);return Be=(Be<<4)+be(Ke),Y.luaZ_buffremove(Ke.buff,2),Be},Re=function(Ke){let Be=4;pe(Ke),ve(Ke,Ke.current===q['{'],I.to_luastring('missing \'{\'',!0));let we=be(Ke);for(pe(Ke);M.lisxdigit(Ke.current);)Be++,we=(we<<4)+K.luaO_hexavalue(Ke.current),ve(Ke,1114111>=we,I.to_luastring('UTF-8 value too large',!0)),pe(Ke);return ve(Ke,Ke.current===q['}'],I.to_luastring('missing \'}\'',!0)),_e(Ke),Y.luaZ_buffremove(Ke.buff,Be),we},Se=function(Ke){let Be=K.luaO_utf8esc(Re(Ke)),we=Be.buff;for(let Ge=Be.n;0<Ge;Ge--)se(Ke,we[K.UTF8BUFFSZ-Ge])},Ie=function(Ke){let Be=0,we;for(we=0;3>we&&M.lisdigit(Ke.current);we++)Be=10*Be+Ke.current-q[0],pe(Ke);return ve(Ke,255>=Be,I.to_luastring('decimal escape too large',!0)),Y.luaZ_buffremove(Ke.buff,we),Be},Ne=function(Ke,Be,we){for(pe(Ke);Ke.current!==Be;)switch(Ke.current){case Y.EOZ:xe(Ke,I.to_luastring('unfinished string',!0),$.TK_EOS);break;case q['\n']:case q['\r']:xe(Ke,I.to_luastring('unfinished string',!0),$.TK_STRING);break;case q['\\']:{pe(Ke);let Ge,Ve;switch(Ke.current){case q.a:Ve=7,Ge='read_save';break;case q.b:Ve=q['\b'],Ge='read_save';break;case q.f:Ve=q['\f'],Ge='read_save';break;case q.n:Ve=q['\n'],Ge='read_save';break;case q.r:Ve=q['\r'],Ge='read_save';break;case q.t:Ve=q['\t'],Ge='read_save';break;case q.v:Ve=q['\x0B'],Ge='read_save';break;case q.x:Ve=ke(Ke),Ge='read_save';break;case q.u:Se(Ke),Ge='no_save';break;case q['\n']:case q['\r']:de(Ke),Ve=q['\n'],Ge='only_save';break;case q['\\']:case q['"']:case q['\'']:Ve=Ke.current,Ge='read_save';break;case Y.EOZ:Ge='no_save';break;case q.z:{for(Y.luaZ_buffremove(Ke.buff,1),_e(Ke);M.lisspace(Ke.current);)oe(Ke)?de(Ke):_e(Ke);Ge='no_save';break}default:{ve(Ke,M.lisdigit(Ke.current),I.to_luastring('invalid escape sequence',!0)),Ve=Ie(Ke),Ge='only_save';break}}'read_save'===Ge&&_e(Ke),('read_save'===Ge||'only_save'===Ge)&&(Y.luaZ_buffremove(Ke.buff,1),se(Ke,Ve));break}default:pe(Ke);}pe(Ke),we.ts=ce(Ke,Ke.buff.buffer.slice(1,Ke.buff.n-1))},Ce=Object.create(null);ee.forEach((Ke,Be)=>Ce[V.luaS_hash(I.to_luastring(Ke))]=Be);const Me=function(Ke,Be){for(Y.luaZ_resetbuffer(Ke.buff);;)switch(E('number'==typeof Ke.current),Ke.current){case q['\n']:case q['\r']:{de(Ke);break}case q[' ']:case q['\f']:case q['\t']:case q['\x0B']:{_e(Ke);break}case q['-']:{if(_e(Ke),Ke.current!==q['-'])return q['-'];if(_e(Ke),Ke.current===q['[']){let we=Ue(Ke);if(Y.luaZ_resetbuffer(Ke.buff),0<=we){Ee(Ke,null,we),Y.luaZ_resetbuffer(Ke.buff);break}}for(;!oe(Ke)&&Ke.current!==Y.EOZ;)_e(Ke);break}case q['[']:{let we=Ue(Ke);return 0<=we?(Ee(Ke,Be,we),$.TK_STRING):(-1!==we&&xe(Ke,I.to_luastring('invalid long string delimiter',!0),$.TK_STRING),q['['])}case q['=']:return _e(Ke),Le(Ke,'=')?$.TK_EQ:q['='];case q['<']:return _e(Ke),Le(Ke,'=')?$.TK_LE:Le(Ke,'<')?$.TK_SHL:q['<'];case q['>']:return _e(Ke),Le(Ke,'=')?$.TK_GE:Le(Ke,'>')?$.TK_SHR:q['>'];case q['/']:return _e(Ke),Le(Ke,'/')?$.TK_IDIV:q['/'];case q['~']:return _e(Ke),Le(Ke,'=')?$.TK_NE:q['~'];case q[':']:return _e(Ke),Le(Ke,':')?$.TK_DBCOLON:q[':'];case q['"']:case q['\'']:return Ne(Ke,Ke.current,Be),$.TK_STRING;case q['.']:return pe(Ke),Le(Ke,'.')?Le(Ke,'.')?$.TK_DOTS:$.TK_CONCAT:M.lisdigit(Ke.current)?he(Ke,Be):q['.'];case q[0]:case q[1]:case q[2]:case q[3]:case q[4]:case q[5]:case q[6]:case q[7]:case q[8]:case q[9]:return he(Ke,Be);case Y.EOZ:return $.TK_EOS;default:{if(M.lislalpha(Ke.current)){do pe(Ke);while(M.lislalnum(Ke.current));let we=ce(Ke,Ke.buff.buffer);Be.ts=we;let Ge=Ce[V.luaS_hashlongstr(we)];return void 0!==Ge&&22>=Ge?Ge+W:$.TK_NAME}let we=Ke.current;return _e(Ke),we}}};T.exports.FIRST_RESERVED=W,T.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new ae,this.lookahead=new ae,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},T.exports.RESERVED=Q,T.exports.isreserved=function(Ke){let Be=Ce[V.luaS_hashlongstr(Ke)];return void 0!==Be&&22>=Be},T.exports.luaX_lookahead=function(Ke){return E(Ke.lookahead.token===$.TK_EOS),Ke.lookahead.token=Me(Ke,Ke.lookahead.seminfo),Ke.lookahead.token},T.exports.luaX_newstring=ce,T.exports.luaX_next=function(Ke){Ke.lastline=Ke.linenumber,Ke.lookahead.token===$.TK_EOS?Ke.t.token=Me(Ke,Ke.t.seminfo):(Ke.t.token=Ke.lookahead.token,Ke.t.seminfo.i=Ke.lookahead.seminfo.i,Ke.t.seminfo.r=Ke.lookahead.seminfo.r,Ke.t.seminfo.ts=Ke.lookahead.seminfo.ts,Ke.lookahead.token=$.TK_EOS)},T.exports.luaX_setinput=function(Ke,Be,we,Ge,Ve){Be.t={token:0,seminfo:new te},Be.L=Ke,Be.current=Ve,Be.lookahead={token:$.TK_EOS,seminfo:new te},Be.z=we,Be.fs=null,Be.linenumber=1,Be.lastline=1,Be.source=Ge,Be.envn=V.luaS_newliteral(Ke,'_ENV')},T.exports.luaX_syntaxerror=function(Ke,Be){xe(Ke,Be,Ke.t.token)},T.exports.luaX_token2str=ne,T.exports.luaX_tokens=ee},function(T,O,U){'use strict';const E=U(49),I=U(2),N=U(5),P=U(6),M=U(13);var K=E();const te=function(Oe,Ue){let Ee=M.lua_numbertointeger(Ue);!1===Ee?I.lua_pushnumber(Oe,Ue):I.lua_pushinteger(Oe,Ee)},Te={abs:function(Oe){if(I.lua_isinteger(Oe,1)){let Ue=I.lua_tointeger(Oe,1);0>Ue&&(Ue=0|-Ue),I.lua_pushinteger(Oe,Ue)}else I.lua_pushnumber(Oe,_Mathabs(N.luaL_checknumber(Oe,1)));return 1},acos:function(Oe){return I.lua_pushnumber(Oe,Math.acos(N.luaL_checknumber(Oe,1))),1},asin:function(Oe){return I.lua_pushnumber(Oe,Math.asin(N.luaL_checknumber(Oe,1))),1},atan:function(Oe){let Ue=N.luaL_checknumber(Oe,1),Ee=N.luaL_optnumber(Oe,2,1);return I.lua_pushnumber(Oe,Math.atan2(Ue,Ee)),1},ceil:function(Oe){return I.lua_isinteger(Oe,1)?I.lua_settop(Oe,1):te(Oe,_Mathceil(N.luaL_checknumber(Oe,1))),1},cos:function(Oe){return I.lua_pushnumber(Oe,Math.cos(N.luaL_checknumber(Oe,1))),1},deg:function(Oe){return I.lua_pushnumber(Oe,N.luaL_checknumber(Oe,1)*(180/_MathPI)),1},exp:function(Oe){return I.lua_pushnumber(Oe,Math.exp(N.luaL_checknumber(Oe,1))),1},floor:function(Oe){return I.lua_isinteger(Oe,1)?I.lua_settop(Oe,1):te(Oe,_Mathfloor(N.luaL_checknumber(Oe,1))),1},fmod:function(Oe){if(I.lua_isinteger(Oe,1)&&I.lua_isinteger(Oe,2)){let Ue=I.lua_tointeger(Oe,2);0===Ue?N.luaL_argerror(Oe,2,I.to_luastring('zero',!0)):I.lua_pushinteger(Oe,0|I.lua_tointeger(Oe,1)%Ue)}else{let Ue=N.luaL_checknumber(Oe,1),Ee=N.luaL_checknumber(Oe,2);I.lua_pushnumber(Oe,Ue%Ee)}return 1},log:function(Oe){let Ue=N.luaL_checknumber(Oe,1),Ee;if(I.lua_isnoneornil(Oe,2))Ee=_Mathlog(Ue);else{let ve=N.luaL_checknumber(Oe,2);Ee=2===ve?Math.log2(Ue):10===ve?Math.log10(Ue):_Mathlog(Ue)/_Mathlog(ve)}return I.lua_pushnumber(Oe,Ee),1},max:function(Oe){let Ue=I.lua_gettop(Oe),Ee=1;N.luaL_argcheck(Oe,1<=Ue,1,I.to_luastring('value expected',!0));for(let ve=2;ve<=Ue;ve++)I.lua_compare(Oe,Ee,ve,I.LUA_OPLT)&&(Ee=ve);return I.lua_pushvalue(Oe,Ee),1},min:function(Oe){let Ue=I.lua_gettop(Oe),Ee=1;N.luaL_argcheck(Oe,1<=Ue,1,I.to_luastring('value expected',!0));for(let ve=2;ve<=Ue;ve++)I.lua_compare(Oe,ve,Ee,I.LUA_OPLT)&&(Ee=ve);return I.lua_pushvalue(Oe,Ee),1},modf:function(Oe){if(I.lua_isinteger(Oe,1))I.lua_settop(Oe,1),I.lua_pushnumber(Oe,0);else{let Ue=N.luaL_checknumber(Oe,1),Ee=0>Ue?_Mathceil(Ue):_Mathfloor(Ue);te(Oe,Ee),I.lua_pushnumber(Oe,Ue===Ee?0:Ue-Ee)}return 2},rad:function(Oe){return I.lua_pushnumber(Oe,N.luaL_checknumber(Oe,1)*(_MathPI/180)),1},random:function(Oe){let ve=K(),Ue,Ee;switch(I.lua_gettop(Oe)){case 0:return I.lua_pushnumber(Oe,ve),1;case 1:{Ue=1,Ee=N.luaL_checkinteger(Oe,1);break}case 2:{Ue=N.luaL_checkinteger(Oe,1),Ee=N.luaL_checkinteger(Oe,2);break}default:return N.luaL_error(Oe,I.to_luastring('wrong number of arguments',!0));}return N.luaL_argcheck(Oe,Ue<=Ee,1,I.to_luastring('interval is empty',!0)),N.luaL_argcheck(Oe,0<=Ue||Ee<=P.MAX_INT+Ue,1,I.to_luastring('interval too large',!0)),ve*=Ee-Ue+1,I.lua_pushinteger(Oe,_Mathfloor(ve)+Ue),1},randomseed:function(Oe){return K=E(_Mathabs(N.luaL_checknumber(Oe,1))),0},sin:function(Oe){return I.lua_pushnumber(Oe,Math.sin(N.luaL_checknumber(Oe,1))),1},sqrt:function(Oe){return I.lua_pushnumber(Oe,Math.sqrt(N.luaL_checknumber(Oe,1))),1},tan:function(Oe){return I.lua_pushnumber(Oe,Math.tan(N.luaL_checknumber(Oe,1))),1},tointeger:function(Oe){let Ue=I.lua_tointegerx(Oe,1);return!1===Ue?(N.luaL_checkany(Oe,1),I.lua_pushnil(Oe)):I.lua_pushinteger(Oe,Ue),1},type:function(Oe){return I.lua_type(Oe,1)===I.LUA_TNUMBER?I.lua_isinteger(Oe,1)?I.lua_pushliteral(Oe,'integer'):I.lua_pushliteral(Oe,'float'):(N.luaL_checkany(Oe,1),I.lua_pushnil(Oe)),1},ult:function(Oe){let Ue=N.luaL_checkinteger(Oe,1),Ee=N.luaL_checkinteger(Oe,2);return I.lua_pushboolean(Oe,0<=Ue?0>Ee||Ue<Ee:0>Ee&&Ue<Ee),1}};T.exports.luaopen_math=function(Oe){return N.luaL_newlib(Oe,Te),I.lua_pushnumber(Oe,Math.PI),I.lua_setfield(Oe,-2,I.to_luastring('pi',!0)),I.lua_pushnumber(Oe,Infinity),I.lua_setfield(Oe,-2,I.to_luastring('huge',!0)),I.lua_pushinteger(Oe,P.MAX_INT),I.lua_setfield(Oe,-2,I.to_luastring('maxinteger',!0)),I.lua_pushinteger(Oe,P.MIN_INT),I.lua_setfield(Oe,-2,I.to_luastring('mininteger',!0)),1}},function(T,O,U){'use strict';(function(E){const I=U(2),N=U(5),P=['-'.charCodeAt(0)],M=I.to_luastring('__CLIBS__',!0),F=I.LUA_DIRSEP,H=I.LUA_DIRSEP,Y=I.to_luastring('luaopen_'),J=I.to_luastring('_'),W=[1],Q=function(Me,ye){try{return ye=I.to_jsstring(ye),ye.startsWith('.')&&(ye=`${E.env.PWD}/${ye}`),!function(){var Ke=new Error('Cannot find module "."');throw Ke.code='MODULE_NOT_FOUND',Ke}()}catch(De){return I.lua_pushstring(Me,I.to_luastring(De.message)),null}},$=function(Me,ye,De){let Ke=ye[I.to_jsstring(De)];return Ke&&'function'==typeof Ke?Ke:(I.lua_pushfstring(Me,I.to_luastring('undefined symbol: %s'),De),null)},ee=function(Me){I.lua_getfield(Me,I.LUA_REGISTRYINDEX,I.to_luastring('LUA_NOENV'));let ye=I.lua_toboolean(Me,-1);return I.lua_pop(Me,1),ye};let te=function(){return!1};const ae=1,ue=2,se=function(Me,ye,De){let Ke=_e(Me,ye);if(null===Ke){if(Ke=Q(Me,ye,De[0]==='*'.charCodeAt(0)),null===Ke)return ae;pe(Me,ye,Ke)}if(De[0]==='*'.charCodeAt(0))return I.lua_pushboolean(Me,1),0;let Be=$(Me,Ke,De);return null===Be?ue:(I.lua_pushcfunction(Me,Be),0)},oe=function(Me,ye,De,Ke){let Be=I.lua_pushstring(Me,I.to_luastring(`${De}${I.LUA_VERSUFFIX}`,!0)),we=E.env[Be];void 0===we&&(we=E.env[De]),void 0===we||ee(Me)?I.lua_pushstring(Me,I.to_luastring(Ke,!0)):(we=N.luaL_gsub(Me,I.to_luastring(we),I.to_luastring(I.LUA_PATH_SEP+I.LUA_PATH_SEP,!0),I.to_luastring(I.LUA_PATH_SEP,!0).concat(W).concat(I.to_luastring(I.LUA_PATH_SEP,!0))),N.luaL_gsub(Me,we,W,I.to_luastring(Ke)),I.lua_remove(Me,-2)),I.lua_setfield(Me,-3,ye),I.lua_pop(Me,1)},_e=function(Me,ye){I.lua_rawgetp(Me,I.LUA_REGISTRYINDEX,M),I.lua_getfield(Me,-1,ye);let De=I.lua_touserdata(Me,-1);return I.lua_pop(Me,2),De},pe=function(Me,ye,De){I.lua_rawgetp(Me,I.LUA_REGISTRYINDEX,M),I.lua_pushlightuserdata(Me,De),I.lua_pushvalue(Me,-1),I.lua_setfield(Me,-3,ye),I.lua_rawseti(Me,-2,N.luaL_len(Me,-2)+1),I.lua_pop(Me,1)},ce=function(Me,ye){for(;ye[0]===I.LUA_PATH_SEP.charCodeAt(0);)ye=ye.slice(1);if(0===ye.length)return null;let De=ye.indexOf(I.LUA_PATH_SEP.charCodeAt(0));return 0>De&&(De=ye.length),I.lua_pushlstring(Me,ye,De),ye.slice(De)},de=function(Me,ye,De,Ke,Be){let we=new N.luaL_Buffer;for(N.luaL_buffinit(Me,we),0!==Ke[0]&&(ye=N.luaL_gsub(Me,ye,Ke,Be));null!==(De=ce(Me,De));){let Ge=N.luaL_gsub(Me,I.lua_tostring(Me,-1),I.to_luastring(I.LUA_PATH_MARK,!0),ye);if(I.lua_remove(Me,-2),te(Ge))return Ge;I.lua_pushfstring(Me,I.to_luastring('\n\tno file \'%s\''),Ge),I.lua_remove(Me,-2),N.luaL_addvalue(we)}return N.luaL_pushresult(we),null},Le=function(Me,ye,De,Ke){I.lua_getfield(Me,I.lua_upvalueindex(1),De);let Be=I.lua_tostring(Me,-1);return null===Be&&N.luaL_error(Me,I.to_luastring('\'package.%s\' must be a string'),De),de(Me,ye,Be,['.'.charCodeAt(0)],Ke)},Ae=function(Me,ye,De){return ye?(I.lua_pushstring(Me,De),2):N.luaL_error(Me,I.to_luastring('error loading module \'%s\' from file \'%s\':\n\t%s'),I.lua_tostring(Me,1),De,I.lua_tostring(Me,-1))},he=function(Me){let ye=N.luaL_checkstring(Me,1),De=Le(Me,ye,I.to_luastring('path',!0),I.to_luastring(H,!0));return null===De?1:Ae(Me,N.luaL_loadfile(Me,De)===I.LUA_OK,De)},Te=function(Me,ye,De){let Ke;De=N.luaL_gsub(Me,De,['.'.charCodeAt(0)],J);let Be=De.indexOf(P[0]);if(0<=Be){Ke=I.lua_pushlstring(Me,De,Be),Ke=I.lua_pushfstring(Me,I.to_luastring('%s%s'),Y,Ke);let we=se(Me,ye,Ke);if(we!==ue)return we;De=Be+1}return Ke=I.lua_pushfstring(Me,I.to_luastring('%s%s'),Y,De),se(Me,ye,Ke)},xe=function(Me){let ye=N.luaL_checkstring(Me,1),De=Le(Me,ye,I.to_luastring('cpath',!0),I.to_luastring(F,!0));return null===De?1:Ae(Me,0===Te(Me,De,ye),De)},Oe=function(Me){let ye=N.luaL_checkstring(Me,1),De=ye.indexOf('.'.charCodeAt(0)),Ke;if(0>De)return 0;I.lua_pushlstring(Me,ye,De);let Be=Le(Me,I.lua_tostring(Me,-1),I.to_luastring('cpath',!0),I.to_luastring(F,!0));return null===Be?1:0===(Ke=Te(Me,Be,ye))?(I.lua_pushstring(Me,Be),2):Ke==ue?(I.lua_pushstring(Me,I.to_luastring(`\n\tno module '${I.to_jsstring(ye)}' in file '${I.to_jsstring(Be)}'`)),1):Ae(Me,0,Be)},Ue=function(Me){let ye=N.luaL_checkstring(Me,1);return I.lua_getfield(Me,I.LUA_REGISTRYINDEX,I.to_luastring(N.LUA_PRELOAD_TABLE,!0)),I.lua_getfield(Me,-1,ye)===I.LUA_TNIL&&I.lua_pushliteral(Me,`\n\tno field package.preload['${I.to_jsstring(ye)}']`),1},Ee=function(Me,ye,De,Ke){let Be=new N.luaL_Buffer;return N.luaL_buffinit(Me,Be),I.lua_getfield(Me,I.lua_upvalueindex(1),I.to_luastring('searchers',!0))!==I.LUA_TTABLE&&N.luaL_error(Me,I.to_luastring('\'package.searchers\' must be a table')),ve(Me,I.LUA_OK,{name:ye,i:1,msg:Be,ctx:De,k:Ke})},ve=function(Me,ye,De){for(;;De.i++)if(ye===I.LUA_OK?(I.lua_rawgeti(Me,3,De.i)===I.LUA_TNIL&&(I.lua_pop(Me,1),N.luaL_pushresult(De.msg),N.luaL_error(Me,I.to_luastring('module \'%s\' not found:%s'),De.name,I.lua_tostring(Me,-1))),I.lua_pushstring(Me,De.name),I.lua_callk(Me,1,2,De,ve)):ye=I.LUA_OK,I.lua_isfunction(Me,-2))break;else I.lua_isstring(Me,-2)?(I.lua_pop(Me,1),N.luaL_addvalue(De.msg)):I.lua_pop(Me,2);return De.k(Me,I.LUA_OK,De.ctx)},ke=function(Me,ye,De){return I.lua_pushstring(Me,De),I.lua_insert(Me,-2),I.lua_callk(Me,2,1,De,Re),Re(Me,I.LUA_OK,De)},Re=function(Me,ye,De){let Ke=De;return I.lua_isnil(Me,-1)||I.lua_setfield(Me,2,Ke),I.lua_getfield(Me,2,Ke)==I.LUA_TNIL&&(I.lua_pushboolean(Me,1),I.lua_pushvalue(Me,-1),I.lua_setfield(Me,2,Ke)),1},Se={loadlib:function(Me){let ye=N.luaL_checkstring(Me,1),De=N.luaL_checkstring(Me,2),Ke=se(Me,ye,De);return 0===Ke?1:(I.lua_pushnil(Me),I.lua_insert(Me,-2),I.lua_pushliteral(Me,Ke===ae?'open':'init'),3)},searchpath:function(Me){let ye=de(Me,N.luaL_checkstring(Me,1),N.luaL_checkstring(Me,2),N.luaL_optstring(Me,3,['.'.charCodeAt(0)]),N.luaL_optstring(Me,4,[I.LUA_DIRSEP.charCodeAt(0)]));return null===ye?(I.lua_pushnil(Me),I.lua_insert(Me,-2),2):1}},Ie={require:function(Me){let ye=N.luaL_checkstring(Me,1);return(I.lua_settop(Me,1),I.lua_getfield(Me,I.LUA_REGISTRYINDEX,I.to_luastring(N.LUA_LOADED_TABLE,!0)),I.lua_getfield(Me,2,ye),I.lua_toboolean(Me,-1))?1:(I.lua_pop(Me,1),Ee(Me,ye,ye,ke))}},Ne=function(Me){let ye=[Ue,he,xe,Oe,null];I.lua_createtable(Me);for(let De=0;ye[De];De++)I.lua_pushvalue(Me,-2),I.lua_pushcclosure(Me,ye[De],1),I.lua_rawseti(Me,-2,De+1);I.lua_setfield(Me,-2,I.to_luastring('searchers',!0))},Ce=function(Me){I.lua_newtable(Me),I.lua_createtable(Me,0,1),I.lua_setmetatable(Me,-2),I.lua_rawsetp(Me,I.LUA_REGISTRYINDEX,M)};T.exports.luaopen_package=function(Me){return Ce(Me),N.luaL_newlib(Me,Se),Ne(Me),oe(Me,I.to_luastring('path',!0),'LUA_PATH',I.LUA_PATH_DEFAULT),oe(Me,I.to_luastring('cpath',!0),'LUA_CPATH',I.LUA_CPATH_DEFAULT),I.lua_pushliteral(Me,I.LUA_DIRSEP+'\n'+I.LUA_PATH_SEP+'\n'+I.LUA_PATH_MARK+'\n'+I.LUA_EXEC_DIR+'\n'+P+'\n'),I.lua_setfield(Me,-2,I.to_luastring('config',!0)),N.luaL_getsubtable(Me,I.LUA_REGISTRYINDEX,I.to_luastring(N.LUA_LOADED_TABLE,!0)),I.lua_setfield(Me,-2,I.to_luastring('loaded',!0)),N.luaL_getsubtable(Me,I.LUA_REGISTRYINDEX,I.to_luastring(N.LUA_PRELOAD_TABLE,!0)),I.lua_setfield(Me,-2,I.to_luastring('preload',!0)),I.lua_pushglobaltable(Me),I.lua_pushvalue(Me,-2),N.luaL_setfuncs(Me,Ie,1),I.lua_pop(Me,1),1}}).call(O,U(19))},function(T,O,U){'use strict';(function(E){const I=U(2),N=U(5),P=U(6),M=U(57),K=I.to_luastring('aAbBcdHIjmMpSUwWxXyYZ%',!0),V=I.to_luastring('aAbBcCdDeFgGhHIjmMnprRStTuUVwWxXyYzZ%||EcECExEXEyEYOdOeOHOIOmOMOSOuOUOVOwOWOy',!0),F=I.to_luastring('aAbBcdHIjmMpSUwWxXyYzZ%||#c#x#d#H#I#j#m#M#S#U#w#W#y#Y',!0),Y=function(oe,_e,pe){I.lua_pushinteger(oe,pe),I.lua_setfield(oe,-2,I.to_luastring(_e,!0))},J=function(oe,_e,pe){Y(oe,'sec',pe?_e.getUTCSeconds():_e.getSeconds()),Y(oe,'min',pe?_e.getUTCMinutes():_e.getMinutes()),Y(oe,'hour',pe?_e.getUTCHours():_e.getHours()),Y(oe,'day',pe?_e.getUTCDate():_e.getDate()),Y(oe,'month',pe?_e.getUTCMonth():_e.getMonth()),Y(oe,'year',pe?_e.getUTCFullYear():_e.getFullYear()),Y(oe,'wday',pe?_e.getUTCDay():_e.getDay());let ce=new Date;Y(oe,'yday',_Mathfloor((ce-new Date(ce.getFullYear(),0,0))/86400000))},q=P.MAX_INT/2,W=function(oe,_e,pe,ce){let de=I.lua_getfield(oe,-1,I.to_luastring(_e,!0)),ge=I.lua_tointegerx(oe,-1);if(!1===ge){if(de!==I.LUA_TNIL)return N.luaL_error(oe,I.to_luastring('field \'%s\' is not an integer'),_e);if(0>pe)return N.luaL_error(oe,I.to_luastring('field \'%s\' missing in date table'),_e);ge=pe}else{if(!(-q<=ge&&ge<=q))return N.luaL_error(oe,I.to_luastring('field \'%s\' is out-of-bound'),_e);ge-=ce}return I.lua_pop(oe,1),ge},Q=function(oe,_e,pe){for(let ce=K,de=1;0<ce.length&&de<=_e.length;ce=ce.slice(de))if(ce[0]==='|'.charCodeAt(0))de++;else if(I.to_jsstring(_e.slice(0,de))===I.to_jsstring(ce.slice(0,de)))return pe.push(..._e.slice(0,de)),_e.slice(de);N.luaL_argerror(oe,1,I.lua_pushliteral(oe,`invalid conversion specifier '%${_e}'`,_e))},ae=function(oe,_e){let pe=N.luaL_checkinteger(oe,_e);return pe},se={date:function(oe){let _e=N.luaL_optlstring(oe,1,'%c'),pe=1e3*N.luaL_opt(oe,ae,2,new Date().getTime()/1e3),ce=new Date(pe),de=!1;if(_e[0]==='!'.charCodeAt(0)&&(de=!0,_e=_e.slice(1)),null===ce&&N.luaL_error(oe,I.to_luastring('time result cannot be represented in this installation',!0)),'*t'===I.to_jsstring(_e))I.lua_createtable(oe,0,9),J(oe,ce,de);else{let Le=[],ge;for(;0<_e.length;)ge=['%'.charCodeAt(0)],_e[0]==='%'.charCodeAt(0)?(_e=_e.slice(1),_e=Q(oe,_e,ge),Le.push(...I.to_luastring(M(I.to_jsstring(ge),ce)))):(Le.push(_e[0]),_e=_e.slice(1));I.lua_pushstring(oe,Le)}return 1},difftime:function(oe){let _e=ae(oe,1),pe=ae(oe,2);return I.lua_pushnumber(oe,new Date(_e)-new Date(pe)),1},time:function(oe){let _e=new Date;return I.lua_isnoneornil(oe,1)||(N.luaL_checktype(oe,1,I.LUA_TTABLE),I.lua_settop(oe,1),_e.setSeconds(W(oe,'sec',0,0)),_e.setMinutes(W(oe,'min',0,0)),_e.setHours(W(oe,'hour',12,0)),_e.setDate(W(oe,'day',-1,0)),_e.setMonth(W(oe,'month',-1,1)),_e.setFullYear(W(oe,'year',-1,0)),J(oe,_e)),I.lua_pushinteger(oe,_Mathfloor(_e/1e3)),1}};E&&E.exit&&E.env&&E.uptime&&(se.clock=function(ce){return I.lua_pushnumber(ce,E.uptime()),1},se.exit=function(ce){let de;return de=I.lua_isboolean(ce,1)?I.lua_toboolean(ce,1)?0:1:N.luaL_optinteger(ce,1,0),I.lua_toboolean(ce,2)&&I.lua_close(ce),ce&&E.exit(de),0},se.getenv=function(ce){return I.lua_pushliteral(ce,E.env[I.to_jsstring(N.luaL_checkstring(ce,1))]),1}),T.exports.luaopen_os=function(oe){return N.luaL_newlib(oe,se),1}}).call(O,U(19))},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(43),P=U(7),M=U(11),K=U(27),V=U(6),F=U(3),H=U(14),Y=U(8),J=U(9),q=N.BinOpr,W=H.OpCodesI,Q=M.Proto,$=K.RESERVED,ee=N.UnOpr,te=I.char,ue=function(ia){return ia===oe.VCALL||ia===oe.VVARARG},se=function(ia,pa){return Y.luaS_eqlngstr(ia,pa)};class ne{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const oe={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},_e=function(ia){return oe.VLOCAL<=ia&&ia<=oe.VINDEXED};class ce{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(ia){this.k=ia.k,this.u=ia.u,this.t=ia.t,this.f=ia.f}}class de{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class ge{constructor(){this.idx=NaN}}class Le{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}}class Ae{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const Te=function(ia,pa){ia.t.token=0,K.luaX_syntaxerror(ia,pa)},xe=function(ia,pa){K.luaX_syntaxerror(ia,F.luaO_pushfstring(ia.L,I.to_luastring('%s expected',!0),K.luaX_token2str(ia,pa)))},Oe=function(ia,pa,ca){let da=ia.ls.L,fa=ia.f.linedefined,ga=0===fa?I.to_luastring('main function',!0):F.luaO_pushfstring(da,I.to_luastring('function at line %d',!0),fa),La=F.luaO_pushfstring(da,I.to_luastring('too many %s (limit is %d) in %s',!0),ca,pa,ga);K.luaX_syntaxerror(ia.ls,La)},Ue=function(ia,pa,ca,da){pa>ca&&Oe(ia,ca,da)},Ee=function(ia,pa){return ia.t.token===pa&&(K.luaX_next(ia),!0)},ve=function(ia,pa){ia.t.token!==pa&&xe(ia,pa)},be=function(ia,pa){ve(ia,pa),K.luaX_next(ia)},ke=function(ia,pa,ca){pa||K.luaX_syntaxerror(ia,ca)},Re=function(ia,pa,ca,da){Ee(ia,pa)||(da===ia.linenumber?xe(ia,pa):K.luaX_syntaxerror(ia,F.luaO_pushfstring(ia.L,I.to_luastring('%s expected (to close %s at line %d)'),K.luaX_token2str(ia,pa),K.luaX_token2str(ia,ca),da)))},Se=function(ia){ve(ia,$.TK_NAME);let pa=ia.t.seminfo.ts;return K.luaX_next(ia),pa},Ie=function(ia,pa,ca){ia.f=ia.t=N.NO_JUMP,ia.k=pa,ia.u.info=ca},Ne=function(ia,pa,ca){Ie(pa,oe.VK,N.luaK_stringK(ia.fs,ca))},Ce=function(ia,pa){Ne(ia,pa,Se(ia))},Pe=function(ia,pa){let ca=ia.fs,da=ca.f;return da.locvars[ca.nlocvars]=new F.LocVar,da.locvars[ca.nlocvars].varname=pa,ca.nlocvars++},Me=function(ia,pa){let ca=ia.fs,da=ia.dyd,fa=Pe(ia,pa);Ue(ca,da.actvar.n+1-ca.firstlocal,200,I.to_luastring('local variables',!0)),da.actvar.arr[da.actvar.n]=new ge,da.actvar.arr[da.actvar.n].idx=fa,da.actvar.n++},ye=function(ia,pa){Me(ia,K.luaX_newstring(ia,I.to_luastring(pa,!0)))},De=function(ia,pa){let ca=ia.ls.dyd.actvar.arr[ia.firstlocal+pa].idx;return E(ca<ia.nlocvars),ia.f.locvars[ca]},Ke=function(ia,pa){let ca=ia.fs;for(ca.nactvar+=pa;pa;pa--)De(ca,ca.nactvar-pa).startpc=ca.pc},Be=function(ia,pa){for(ia.ls.dyd.actvar.n-=ia.nactvar-pa;ia.nactvar>pa;)De(ia,--ia.nactvar).endpc=ia.pc},we=function(ia,pa){let ca=ia.f.upvalues;for(let da=0;da<ia.nups;da++)if(se(ca[da].name,pa))return da;return-1},Ge=function(ia,pa,ca){let da=ia.f;return Ue(ia,ia.nups+1,M.MAXUPVAL,I.to_luastring('upvalues',!0)),da.upvalues[ia.nups]={instack:ca.k===oe.VLOCAL,idx:ca.u.info,name:pa},ia.nups++},Ve=function(ia,pa){for(let ca=ia.nactvar-1;0<=ca;ca--)if(se(pa,De(ia,ca).varname))return ca;return-1},Fe=function(ia,pa){let ca=ia.bl;for(;ca.nactvar>pa;)ca=ca.previous;ca.upval=1},je=function(ia,pa,ca,da){if(null===ia)Ie(ca,oe.VVOID,0);else{let fa=Ve(ia,pa);if(0<=fa)Ie(ca,oe.VLOCAL,fa),da||Fe(ia,fa);else{let ga=we(ia,pa);if(0>ga){if(je(ia.prev,pa,ca,0),ca.k===oe.VVOID)return;ga=Ge(ia,pa,ca)}Ie(ca,oe.VUPVAL,ga)}}},Xe=function(ia,pa){let ca=Se(ia),da=ia.fs;if(je(da,ca,pa,1),pa.k===oe.VVOID){let fa=new ce;je(da,ia.envn,pa,1),E(pa.k!==oe.VVOID),Ne(ia,fa,ca),N.luaK_indexed(da,pa,fa)}},He=function(ia,pa,ca,da){let fa=ia.fs,ga=pa-ca;if(ue(da.k))ga++,0>ga&&(ga=0),N.luaK_setreturns(fa,da,ga),1<ga&&N.luaK_reserveregs(fa,ga-1);else if(da.k!==oe.VVOID&&N.luaK_exp2nextreg(fa,da),0<ga){let La=fa.freereg;N.luaK_reserveregs(fa,ga),N.luaK_nil(fa,La,ga)}ca>pa&&(ia.fs.freereg-=ca-pa)},Ye=function(ia){let pa=ia.L;++pa.nCcalls,Ue(ia.fs,pa.nCcalls,V.LUAI_MAXCCALLS,I.to_luastring('JS levels',!0))},ze=function(ia){return ia.L.nCcalls--},Je=function(ia,pa,ca){let da=ia.fs,fa=ia.dyd.gt,ga=fa.arr[pa];if(E(se(ga.name,ca.name)),ga.nactvar<ca.nactvar){let La=De(da,ga.nactvar).varname,Aa=F.luaO_pushfstring(ia.L,I.to_luastring('<goto %s> at line %d jumps into the scope of local \'%s\''),ga.name.getstr(),ga.line,La.getstr());Te(ia,Aa)}N.luaK_patchlist(da,ga.pc,ca.pc);for(let La=pa;La<fa.n-1;La++)fa.arr[La]=fa.arr[La+1];fa.n--},Ze=function(ia,pa){let ca=ia.fs.bl,da=ia.dyd,fa=da.gt.arr[pa];for(let ga=ca.firstlabel,La;ga<da.label.n;ga++)if(La=da.label.arr[ga],se(La.name,fa.name))return fa.nactvar>La.nactvar&&(ca.upval||da.label.n>ca.firstlabel)&&N.luaK_patchclose(ia.fs,fa.pc,La.nactvar),Je(ia,pa,La),!0;return!1},qe=function(ia,pa,ca,da,fa){let ga=pa.n;return pa.arr[ga]=new Le,pa.arr[ga].name=ca,pa.arr[ga].line=da,pa.arr[ga].nactvar=ia.fs.nactvar,pa.arr[ga].pc=fa,pa.n=ga+1,ga},We=function(ia,pa){for(let ca=ia.dyd.gt,da=ia.fs.bl.firstgoto;da<ca.n;)se(ca.arr[da].name,pa.name)?Je(ia,da,pa):da++},Qe=function(ia,pa){for(let ca=pa.firstgoto,da=ia.ls.dyd.gt,fa;ca<da.n;)fa=da.arr[ca],fa.nactvar>pa.nactvar&&(pa.upval&&N.luaK_patchclose(ia,fa.pc,pa.nactvar),fa.nactvar=pa.nactvar),Ze(ia.ls,ca)||ca++},$e=function(ia,pa,ca){pa.isloop=ca,pa.nactvar=ia.nactvar,pa.firstlabel=ia.ls.dyd.label.n,pa.firstgoto=ia.ls.dyd.gt.n,pa.upval=0,pa.previous=ia.bl,ia.bl=pa,E(ia.freereg===ia.nactvar)},at=function(ia){let pa=Y.luaS_newliteral(ia.L,'break'),ca=qe(ia,ia.dyd.label,pa,0,ia.fs.pc);We(ia,ia.dyd.label.arr[ca])},lt=function(ia,pa){let ca=K.isreserved(pa.name)?'<%s> at line %d not inside a loop':'no visible label \'%s\' for <goto> at line %d';ca=F.luaO_pushfstring(ia.L,I.to_luastring(ca),pa.name.getstr(),pa.line),Te(ia,ca)},ut=function(ia){let pa=ia.L,ca=new Q(pa),da=ia.fs,fa=da.f;return fa.p[da.np++]=ca,ca},st=function(ia,pa){let ca=ia.fs.prev;Ie(pa,oe.VRELOCABLE,N.luaK_codeABx(ca,W.OP_CLOSURE,0,ca.np-1)),N.luaK_exp2nextreg(ca,pa)},nt=function(ia,pa,ca){pa.prev=ia.fs,pa.ls=ia,ia.fs=pa,pa.pc=0,pa.lasttarget=0,pa.jpc=N.NO_JUMP,pa.freereg=0,pa.nk=0,pa.np=0,pa.nups=0,pa.nlocvars=0,pa.nactvar=0,pa.firstlocal=ia.dyd.actvar.n,pa.bl=null;let da=new Q(ia.L);da=pa.f,da.source=ia.source,da.maxstacksize=2,$e(pa,ca,!1)},ot=function(ia){let pa=ia.bl,ca=ia.ls;if(pa.previous&&pa.upval){let da=N.luaK_jump(ia);N.luaK_patchclose(ia,da,pa.nactvar),N.luaK_patchtohere(ia,da)}pa.isloop&&at(ca),ia.bl=pa.previous,Be(ia,pa.nactvar),E(pa.nactvar===ia.nactvar),ia.freereg=ia.nactvar,ca.dyd.label.n=pa.firstlabel,pa.previous?Qe(ia,pa):pa.firstgoto<ca.dyd.gt.n&&lt(ca,ca.dyd.gt.arr[pa.firstgoto])},_t=function(ia){let pa=ia.fs;N.luaK_ret(pa,0,0),ot(pa),E(null===pa.bl),ia.fs=pa.prev},it=function(ia,pa){switch(ia.t.token){case $.TK_ELSE:case $.TK_ELSEIF:case $.TK_END:case $.TK_EOS:return!0;case $.TK_UNTIL:return pa;default:return!1;}},pt=function(ia){for(;!it(ia,1);){if(ia.t.token===$.TK_RETURN)return void na(ia);na(ia)}},ct=function(ia,pa){let ca=ia.fs,da=new ce;N.luaK_exp2anyregup(ca,pa),K.luaX_next(ia),Ce(ia,da),N.luaK_indexed(ca,pa,da)},dt=function(ia,pa){K.luaX_next(ia),yt(ia,pa),N.luaK_exp2val(ia.fs,pa),be(ia,te[']'])};class ft{constructor(){this.v=new ce,this.t=new ce,this.nh=NaN,this.na=NaN,this.tostore=NaN}}const Lt=function(ia,pa){let ca=ia.fs,da=ia.fs.freereg,fa=new ce,ga=new ce;ia.t.token===$.TK_NAME?(Ue(ca,pa.nh,V.MAX_INT,I.to_luastring('items in a constructor',!0)),Ce(ia,fa)):dt(ia,fa),pa.nh++,be(ia,te['=']);let La=N.luaK_exp2RK(ca,fa);yt(ia,ga),N.luaK_codeABC(ca,W.OP_SETTABLE,pa.t.u.info,La,N.luaK_exp2RK(ca,ga)),ca.freereg=da},At=function(ia,pa){pa.v.k===oe.VVOID||(N.luaK_exp2nextreg(ia,pa.v),pa.v.k=oe.VVOID,pa.tostore===H.LFIELDS_PER_FLUSH&&(N.luaK_setlist(ia,pa.t.u.info,pa.na,pa.tostore),pa.tostore=0))},ht=function(ia,pa){0===pa.tostore||(ue(pa.v.k)?(N.luaK_setmultret(ia,pa.v),N.luaK_setlist(ia,pa.t.u.info,pa.na,I.LUA_MULTRET),pa.na--):(pa.v.k!==oe.VVOID&&N.luaK_exp2nextreg(ia,pa.v),N.luaK_setlist(ia,pa.t.u.info,pa.na,pa.tostore)))},Tt=function(ia,pa){yt(ia,pa.v),Ue(ia.fs,pa.na,V.MAX_INT,I.to_luastring('items in a constructor',!0)),pa.na++,pa.tostore++},xt=function(ia,pa){switch(ia.t.token){case $.TK_NAME:{K.luaX_lookahead(ia)===te['=']?Lt(ia,pa):Tt(ia,pa);break}case te['[']:{Lt(ia,pa);break}default:{Tt(ia,pa);break}}},Ot=function(ia,pa){let ca=ia.fs,da=ia.linenumber,fa=N.luaK_codeABC(ca,W.OP_NEWTABLE,0,0,0),ga=new ft;ga.na=ga.nh=ga.tostore=0,ga.t=pa,Ie(pa,oe.VRELOCABLE,fa),Ie(ga.v,oe.VVOID,0),N.luaK_exp2nextreg(ia.fs,pa),be(ia,te['{']);do{if(E(ga.v.k===oe.VVOID||0<ga.tostore),ia.t.token===te['}'])break;At(ca,ga),xt(ia,ga)}while(Ee(ia,te[','])||Ee(ia,te[';']));Re(ia,te['}'],te['{'],da),ht(ca,ga),H.SETARG_B(ca.f.code[fa],F.luaO_int2fb(ga.na)),H.SETARG_C(ca.f.code[fa],F.luaO_int2fb(ga.nh))},Ut=function(ia){let pa=ia.fs,ca=pa.f,da=0;if(ca.is_vararg=!1,ia.t.token!==te[')'])do switch(ia.t.token){case $.TK_NAME:{Me(ia,Se(ia)),da++;break}case $.TK_DOTS:{K.luaX_next(ia),ca.is_vararg=!0;break}default:K.luaX_syntaxerror(ia,I.to_luastring('<name> or \'...\' expected',!0));}while(!ca.is_vararg&&Ee(ia,te[',']));Ke(ia,da),ca.numparams=pa.nactvar,N.luaK_reserveregs(pa,pa.nactvar)},Et=function(ia,pa,ca,da){let fa=new de,ga=new ne;fa.f=ut(ia),fa.f.linedefined=da,nt(ia,fa,ga),be(ia,te['(']),ca&&(ye(ia,'self'),Ke(ia,1)),Ut(ia),be(ia,te[')']),pt(ia),fa.f.lastlinedefined=ia.linenumber,Re(ia,$.TK_END,$.TK_FUNCTION,da),st(ia,pa),_t(ia)},vt=function(ia,pa){let ca=1;for(yt(ia,pa);Ee(ia,te[',']);)N.luaK_exp2nextreg(ia.fs,pa),yt(ia,pa),ca++;return ca},bt=function(ia,pa,ca){let da=ia.fs,fa=new ce;switch(ia.t.token){case te['(']:{K.luaX_next(ia),ia.t.token===te[')']?fa.k=oe.VVOID:(vt(ia,fa),N.luaK_setmultret(da,fa)),Re(ia,te[')'],te['('],ca);break}case te['{']:{Ot(ia,fa);break}case $.TK_STRING:{Ne(ia,fa,ia.t.seminfo.ts),K.luaX_next(ia);break}default:K.luaX_syntaxerror(ia,I.to_luastring('function arguments expected',!0));}E(pa.k===oe.VNONRELOC);let La=pa.u.info,ga;ue(fa.k)?ga=I.LUA_MULTRET:(fa.k!==oe.VVOID&&N.luaK_exp2nextreg(da,fa),ga=da.freereg-(La+1)),Ie(pa,oe.VCALL,N.luaK_codeABC(da,W.OP_CALL,La,ga+1,2)),N.luaK_fixline(da,ca),da.freereg=La+1},kt=function(ia,pa){switch(ia.t.token){case te['(']:{let ca=ia.linenumber;return K.luaX_next(ia),yt(ia,pa),Re(ia,te[')'],te['('],ca),void N.luaK_dischargevars(ia.fs,pa)}case $.TK_NAME:return void Xe(ia,pa);default:K.luaX_syntaxerror(ia,I.to_luastring('unexpected symbol',!0));}},Rt=function(ia,pa){let ca=ia.fs,da=ia.linenumber;for(kt(ia,pa);;)switch(ia.t.token){case te['.']:{ct(ia,pa);break}case te['[']:{let fa=new ce;N.luaK_exp2anyregup(ca,pa),dt(ia,fa),N.luaK_indexed(ca,pa,fa);break}case te[':']:{let fa=new ce;K.luaX_next(ia),Ce(ia,fa),N.luaK_self(ca,pa,fa),bt(ia,pa,da);break}case te['(']:case $.TK_STRING:case te['{']:{N.luaK_exp2nextreg(ca,pa),bt(ia,pa,da);break}default:return;}},St=function(ia,pa){switch(ia.t.token){case $.TK_FLT:{Ie(pa,oe.VKFLT,0),pa.u.nval=ia.t.seminfo.r;break}case $.TK_INT:{Ie(pa,oe.VKINT,0),pa.u.ival=ia.t.seminfo.i;break}case $.TK_STRING:{Ne(ia,pa,ia.t.seminfo.ts);break}case $.TK_NIL:{Ie(pa,oe.VNIL,0);break}case $.TK_TRUE:{Ie(pa,oe.VTRUE,0);break}case $.TK_FALSE:{Ie(pa,oe.VFALSE,0);break}case $.TK_DOTS:{let ca=ia.fs;ke(ia,ca.f.is_vararg,I.to_luastring('cannot use \'...\' outside a vararg function',!0)),Ie(pa,oe.VVARARG,N.luaK_codeABC(ca,W.OP_VARARG,0,1,0));break}case te['{']:return void Ot(ia,pa);case $.TK_FUNCTION:return K.luaX_next(ia),void Et(ia,pa,0,ia.linenumber);default:return void Rt(ia,pa);}K.luaX_next(ia)},It=function(ia){return ia===$.TK_NOT?ee.OPR_NOT:ia===te['-']?ee.OPR_MINUS:ia===te['~']?ee.OPR_BNOT:ia===te['#']?ee.OPR_LEN:ee.OPR_NOUNOPR},Nt=function(ia){return ia===te['+']?q.OPR_ADD:ia===te['-']?q.OPR_SUB:ia===te['*']?q.OPR_MUL:ia===te['%']?q.OPR_MOD:ia===te['^']?q.OPR_POW:ia===te['/']?q.OPR_DIV:ia===$.TK_IDIV?q.OPR_IDIV:ia===te['&']?q.OPR_BAND:ia===te['|']?q.OPR_BOR:ia===te['~']?q.OPR_BXOR:ia===$.TK_SHL?q.OPR_SHL:ia===$.TK_SHR?q.OPR_SHR:ia===$.TK_CONCAT?q.OPR_CONCAT:ia===$.TK_NE?q.OPR_NE:ia===$.TK_EQ?q.OPR_EQ:ia===te['<']?q.OPR_LT:ia===$.TK_LE?q.OPR_LE:ia===te['>']?q.OPR_GT:ia===$.TK_GE?q.OPR_GE:ia===$.TK_AND?q.OPR_AND:ia===$.TK_OR?q.OPR_OR:q.OPR_NOBINOPR},Ct=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Mt=function(ia,pa,ca){Ye(ia);let da=It(ia.t.token);if(da!==ee.OPR_NOUNOPR){let ga=ia.linenumber;K.luaX_next(ia),Mt(ia,pa,12),N.luaK_prefix(ia.fs,da,pa,ga)}else St(ia,pa);let fa=Nt(ia.t.token);for(;fa!==q.OPR_NOBINOPR&&Ct[fa].left>ca;){let ga=new ce,La=ia.linenumber;K.luaX_next(ia),N.luaK_infix(ia.fs,fa,pa);let Aa=Mt(ia,ga,Ct[fa].right);N.luaK_posfix(ia.fs,fa,pa,ga,La),fa=Aa}return ze(ia),fa},yt=function(ia,pa){Mt(ia,pa,0)},Dt=function(ia){let pa=ia.fs,ca=new ne;$e(pa,ca,0),pt(ia),ot(pa)};class Kt{constructor(){this.prev=null,this.v=new ce}}const Bt=function(ia,pa,ca){let da=ia.fs,fa=da.freereg,ga=!1;for(;pa;pa=pa.prev)pa.v.k===oe.VINDEXED&&(pa.v.u.ind.vt===ca.k&&pa.v.u.ind.t===ca.u.info&&(ga=!0,pa.v.u.ind.vt=oe.VLOCAL,pa.v.u.ind.t=fa),ca.k===oe.VLOCAL&&pa.v.u.ind.idx===ca.u.info&&(ga=!0,pa.v.u.ind.idx=fa));if(ga){let La=ca.k===oe.VLOCAL?W.OP_MOVE:W.OP_GETUPVAL;N.luaK_codeABC(da,La,fa,ca.u.info,0),N.luaK_reserveregs(da,1)}},wt=function(ia,pa,ca){let da=new ce;if(ke(ia,_e(pa.v.k),I.to_luastring('syntax error',!0)),Ee(ia,te[','])){let fa=new Kt;fa.prev=pa,Rt(ia,fa.v),fa.v.k!==oe.VINDEXED&&Bt(ia,pa,fa.v),Ue(ia.fs,ca+ia.L.nCcalls,V.LUAI_MAXCCALLS,I.to_luastring('JS levels',!0)),wt(ia,fa,ca+1)}else{be(ia,te['=']);let fa=vt(ia,da);if(fa!==ca)He(ia,ca,fa,da);else return N.luaK_setoneret(ia.fs,da),void N.luaK_storevar(ia.fs,pa.v,da)}Ie(da,oe.VNONRELOC,ia.fs.freereg-1),N.luaK_storevar(ia.fs,pa.v,da)},Gt=function(ia){let pa=new ce;return yt(ia,pa),pa.k===oe.VNIL&&(pa.k=oe.VFALSE),N.luaK_goiftrue(ia.fs,pa),pa.f},Vt=function(ia,pa){let ca=ia.linenumber,da;Ee(ia,$.TK_GOTO)?da=Se(ia):(K.luaX_next(ia),da=Y.luaS_newliteral(ia.L,'break'));let fa=qe(ia,ia.dyd.gt,da,ca,pa);Ze(ia,fa)},Ft=function(ia,pa,ca){for(let da=ia.bl.firstlabel;da<pa.n;da++)if(se(ca,pa.arr[da].name)){let fa=F.luaO_pushfstring(ia.ls.L,I.to_luastring('label \'%s\' already defined on line %d',!0),ca.getstr(),pa.arr[da].line);Te(ia.ls,fa)}},jt=function(ia){for(;ia.t.token===te[';']||ia.t.token===$.TK_DBCOLON;)na(ia)},Xt=function(ia,pa,ca){let da=ia.fs,fa=ia.dyd.label,ga;Ft(da,fa,pa),be(ia,$.TK_DBCOLON),ga=qe(ia,fa,pa,ca,N.luaK_getlabel(da)),jt(ia),it(ia,0)&&(fa.arr[ga].nactvar=da.bl.nactvar),We(ia,fa.arr[ga])},Ht=function(ia,pa){let ca=ia.fs,da=new ne;K.luaX_next(ia);let fa=N.luaK_getlabel(ca),ga=Gt(ia);$e(ca,da,1),be(ia,$.TK_DO),Dt(ia),N.luaK_jumpto(ca,fa),Re(ia,$.TK_END,$.TK_WHILE,pa),ot(ca),N.luaK_patchtohere(ca,ga)},Yt=function(ia,pa){let ca=ia.fs,da=N.luaK_getlabel(ca),fa=new ne,ga=new ne;$e(ca,fa,1),$e(ca,ga,0),K.luaX_next(ia),pt(ia),Re(ia,$.TK_UNTIL,$.TK_REPEAT,pa);let La=Gt(ia);ga.upval&&N.luaK_patchclose(ca,La,ga.nactvar),ot(ca),N.luaK_patchlist(ca,La,da),ot(ca)},zt=function(ia){let pa=new ce;yt(ia,pa),N.luaK_exp2nextreg(ia.fs,pa),E(pa.k===oe.VNONRELOC);let ca=pa.u.info;return ca},Jt=function(ia,pa,ca,da,fa){let ga=new ne,La=ia.fs,Aa;Ke(ia,3),be(ia,$.TK_DO);let ha=fa?N.luaK_codeAsBx(La,W.OP_FORPREP,pa,N.NO_JUMP):N.luaK_jump(La);$e(La,ga,0),Ke(ia,da),N.luaK_reserveregs(La,da),Dt(ia),ot(La),N.luaK_patchtohere(La,ha),fa?Aa=N.luaK_codeAsBx(La,W.OP_FORLOOP,pa,N.NO_JUMP):(N.luaK_codeABC(La,W.OP_TFORCALL,pa,0,da),N.luaK_fixline(La,ca),Aa=N.luaK_codeAsBx(La,W.OP_TFORLOOP,pa+2,N.NO_JUMP)),N.luaK_patchlist(La,Aa,ha+1),N.luaK_fixline(La,ca)},Zt=function(ia,pa,ca){let da=ia.fs,fa=da.freereg;ye(ia,'(for index)'),ye(ia,'(for limit)'),ye(ia,'(for step)'),Me(ia,pa),be(ia,te['=']),zt(ia),be(ia,te[',']),zt(ia),Ee(ia,te[','])?zt(ia):(N.luaK_codek(da,da.freereg,N.luaK_intK(da,1)),N.luaK_reserveregs(da,1)),Jt(ia,fa,ca,1,1)},qt=function(ia,pa){let ca=ia.fs,da=new ce,fa=4,ga=ca.freereg;for(ye(ia,'(for generator)'),ye(ia,'(for state)'),ye(ia,'(for control)'),Me(ia,pa);Ee(ia,te[',']);)Me(ia,Se(ia)),fa++;be(ia,$.TK_IN);let La=ia.linenumber;He(ia,3,vt(ia,da),da),N.luaK_checkstack(ca,3),Jt(ia,ga,La,fa-3,0)},Wt=function(ia,pa){let ca=ia.fs,da=new ne;$e(ca,da,1),K.luaX_next(ia);let fa=Se(ia);switch(ia.t.token){case te['=']:Zt(ia,fa,pa);break;case te[',']:case $.TK_IN:qt(ia,fa);break;default:K.luaX_syntaxerror(ia,I.to_luastring('\'=\' or \'in\' expected',!0));}Re(ia,$.TK_END,$.TK_FOR,pa),ot(ca)},Qt=function(ia,pa){let ca=new ne,da=ia.fs,fa=new ce,ga;if(K.luaX_next(ia),yt(ia,fa),be(ia,$.TK_THEN),ia.t.token===$.TK_GOTO||ia.t.token===$.TK_BREAK){for(N.luaK_goiffalse(ia.fs,fa),$e(da,ca,!1),Vt(ia,fa.t);Ee(ia,te[';']););if(it(ia,0))return ot(da),pa;ga=N.luaK_jump(da)}else N.luaK_goiftrue(ia.fs,fa),$e(da,ca,!1),ga=fa.f;return pt(ia),ot(da),(ia.t.token===$.TK_ELSE||ia.t.token===$.TK_ELSEIF)&&(pa=N.luaK_concat(da,pa,N.luaK_jump(da))),N.luaK_patchtohere(da,ga),pa},$t=function(ia,pa){let ca=ia.fs,da=N.NO_JUMP;for(da=Qt(ia,da);ia.t.token===$.TK_ELSEIF;)da=Qt(ia,da);Ee(ia,$.TK_ELSE)&&Dt(ia),Re(ia,$.TK_END,$.TK_IF,pa),N.luaK_patchtohere(ca,da)},ea=function(ia){let pa=new ce,ca=ia.fs;Me(ia,Se(ia)),Ke(ia,1),Et(ia,pa,0,ia.linenumber),De(ca,pa.u.info).startpc=ca.pc},ta=function(ia){let pa=0,da=new ce,ca;do Me(ia,Se(ia)),pa++;while(Ee(ia,te[',']));Ee(ia,te['='])?ca=vt(ia,da):(da.k=oe.VVOID,ca=0),He(ia,pa,ca,da),Ke(ia,pa)},aa=function(ia,pa){let ca=0;for(Xe(ia,pa);ia.t.token===te['.'];)ct(ia,pa);return ia.t.token===te[':']&&(ca=1,ct(ia,pa)),ca},la=function(ia,pa){let ca=new ce,da=new ce;K.luaX_next(ia);let fa=aa(ia,ca);Et(ia,da,fa,pa),N.luaK_storevar(ia.fs,ca,da),N.luaK_fixline(ia.fs,pa)},ua=function(ia){let pa=ia.fs,ca=new Kt;Rt(ia,ca.v),ia.t.token===te['=']||ia.t.token===te[',']?(ca.prev=null,wt(ia,ca,1)):(ke(ia,ca.v.k===oe.VCALL,I.to_luastring('syntax error',!0)),H.SETARG_C(N.getinstruction(pa,ca.v),1))},sa=function(ia){let pa=ia.fs,ca=new ce,da,fa;it(ia,1)||ia.t.token===te[';']?da=fa=0:(fa=vt(ia,ca),ue(ca.k)?(N.luaK_setmultret(pa,ca),ca.k===oe.VCALL&&1===fa&&(H.SET_OPCODE(N.getinstruction(pa,ca),W.OP_TAILCALL),E(N.getinstruction(pa,ca).A===pa.nactvar)),da=pa.nactvar,fa=I.LUA_MULTRET):1===fa?da=N.luaK_exp2anyreg(pa,ca):(N.luaK_exp2nextreg(pa,ca),da=pa.nactvar,E(fa==pa.freereg-da))),N.luaK_ret(pa,da,fa),Ee(ia,te[';'])},na=function(ia){let pa=ia.linenumber;switch(Ye(ia),ia.t.token){case te[';']:{K.luaX_next(ia);break}case $.TK_IF:{$t(ia,pa);break}case $.TK_WHILE:{Ht(ia,pa);break}case $.TK_DO:{K.luaX_next(ia),Dt(ia),Re(ia,$.TK_END,$.TK_DO,pa);break}case $.TK_FOR:{Wt(ia,pa);break}case $.TK_REPEAT:{Yt(ia,pa);break}case $.TK_FUNCTION:{la(ia,pa);break}case $.TK_LOCAL:{K.luaX_next(ia),Ee(ia,$.TK_FUNCTION)?ea(ia):ta(ia);break}case $.TK_DBCOLON:{K.luaX_next(ia),Xt(ia,Se(ia),pa);break}case $.TK_RETURN:{K.luaX_next(ia),sa(ia);break}case $.TK_BREAK:case $.TK_GOTO:{Vt(ia,N.luaK_jump(ia.fs));break}default:{ua(ia);break}}E(ia.fs.f.maxstacksize>=ia.fs.freereg&&ia.fs.freereg>=ia.fs.nactvar),ia.fs.freereg=ia.fs.nactvar,ze(ia)},oa=function(ia,pa){let ca=new ne,da=new ce;nt(ia,pa,ca),pa.f.is_vararg=!0,Ie(da,oe.VLOCAL,0),Ge(pa,ia.envn,da),K.luaX_next(ia),pt(ia),ve(ia,$.TK_EOS),_t(ia)};T.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new Ae,this.label=new Ae}},T.exports.expkind=oe,T.exports.expdesc=ce,T.exports.luaY_parser=function(ia,pa,ca,da,fa,ga){let La=new K.LexState,Aa=new de,ha=M.luaF_newLclosure(ia,1);return P.luaD_inctop(ia),ia.stack[ia.top-1].setclLvalue(ha),La.h=J.luaH_new(ia),P.luaD_inctop(ia),ia.stack[ia.top-1].sethvalue(La.h),Aa.f=ha.p=new Q(ia),Aa.f.source=Y.luaS_new(ia,fa),La.buff=ca,La.dyd=da,da.actvar.n=da.gt.n=da.label.n=0,K.luaX_setinput(ia,La,pa,Aa.f.source,ga),oa(La,Aa),E(!Aa.prev&&1===Aa.nups&&!La.fs),E(0===da.actvar.n&&0===da.gt.n&&0===da.label.n),delete ia.stack[--ia.top],ha},T.exports.vkisinreg=function(ia){return ia===oe.VNONRELOC||ia===oe.VLOCAL}},function(T,O,U){'use strict';const E=U(0),I=U(36).sprintf,N=U(5),P=U(2),M=U(13),K=U(6),F='%'.charCodeAt(0),Y=2147483647,J=function(Ht){let Yt=Ht.indexOf(0);return-1<Yt?Yt:Ht.length},q=function(Ht,Yt){return 0<=Ht?Ht:0-Ht>Yt?0:Yt+Ht+1},ee=function(Ht,Yt,zt,Jt){return Jt.push(...Yt.slice(0,zt)),0},ae=M.LUA_NUMBER_FRMLEN.length+1,ue=1,se=function(Ht,Yt,zt){let Jt=_Mathfloor(zt);return Ht[Yt]=10>Jt?Jt+'0'.charCodeAt(0):Jt-10+'a'.charCodeAt(0),zt-Jt},ne=function(Ht){if(Object.is(Ht,Infinity))return P.to_luastring('inf',!0).slice(0);if(Object.is(Ht,-Infinity))return P.to_luastring('-inf',!0).slice(0);if(Number.isNaN(Ht))return P.to_luastring('nan',!0).slice(0);if(0===Ht){let Yt=I(M.LUA_NUMBER_FMT+'x0p+0',Ht);return Object.is(Ht,-0)&&(Yt='-'+Yt),P.to_luastring(Yt)}let Yt=[],zt=M.frexp(Ht),Jt=zt[0],Zt=zt[1],qt=0;if(0>Jt&&(Yt[qt++]='-'.charCodeAt(0),Jt=-Jt),Yt[qt++]='0'.charCodeAt(0),Yt[qt++]='x'.charCodeAt(0),Jt=se(Yt,qt++,Jt*(1<<ue)),Zt-=ue,0<Jt){Yt[qt++]=M.lua_getlocaledecpoint().charCodeAt(0);do Jt=se(Yt,qt++,16*Jt);while(0<Jt)}let Wt=P.to_luastring(I('p%+d',Zt));return Yt.concat(Wt)},oe=function(Ht,Yt,zt){let Jt=ne(zt);if(Yt[ae]==='A'.charCodeAt(0))for(let Zt=0;Zt<Jt.length;Zt++)Jt[Zt]=_StringfromCharCode(Jt[Zt]).toUpperCase().charCodeAt(0);else Yt[ae]!=='a'.charCodeAt(0)&&N.luaL_error(Ht,P.to_luastring('modifiers for format \'%%a\'/\'%%A\' not implemented'));return Jt},pe=['-'.charCodeAt(0),'+'.charCodeAt(0),' '.charCodeAt(0),'#'.charCodeAt(0),'0'.charCodeAt(0)],de=(Ht)=>'a'.charCodeAt(0)<=Ht&&Ht<='z'.charCodeAt(0)||Ht>='A'.charCodeAt(0)&&Ht<='Z'.charCodeAt(0),ge=(Ht)=>'0'.charCodeAt(0)<=Ht&&Ht<='9'.charCodeAt(0),Le=(Ht)=>0<=Ht&&31>=Ht||127===Ht,Ae=(Ht)=>32<Ht&&127>Ht,he=(Ht)=>/^[a-z]$/.test(_StringfromCharCode(Ht)),Te=(Ht)=>/^[A-Z]$/.test(_StringfromCharCode(Ht)),xe=(Ht)=>/^[a-zA-Z0-9]$/.test(_StringfromCharCode(Ht)),Oe=(Ht)=>Ae(Ht)&&!xe(Ht),Ue=(Ht)=>/^\s$/.test(_StringfromCharCode(Ht)),Ee=(Ht)=>/^[0-9A-Fa-f]$/.test(_StringfromCharCode(Ht)),ve=function(Ht,Yt){for(let zt=0;zt<Yt.length;zt++)Ht.push(Yt[zt])},be=function(Ht,Yt){Ht.push('"'.charCodeAt(0));for(let zt=Yt.length;zt--;){if(Yt[0]==='"'.charCodeAt(0)||Yt[0]==='\\'.charCodeAt(0)||Yt[0]==='\n'.charCodeAt(0))Ht.push('\\'.charCodeAt(0)),Ht.push(Yt[0]);else if(Le(Yt[0])){let Jt=[];Jt=ge(Yt[1])?P.to_luastring(I('\\%03d',Yt[0])):P.to_luastring(I('\\%d',Yt[0])),ve(Ht,Jt)}else Ht.push(Yt[0]);Yt=Yt.slice(1)}Ht.push('"'.charCodeAt(0))},ke=function(Ht){if(0>Ht.indexOf('.'.charCodeAt(0))){let Yt=M.lua_getlocaledecpoint().charCodeAt(0),zt=Ht.indexOf(Yt);zt&&(Ht[zt]='.')}},Re=function(Ht,Yt,zt){switch(P.lua_type(Ht,zt)){case P.LUA_TSTRING:{let Jt=P.lua_tostring(Ht,zt);be(Yt,Jt,Jt.length);break}case P.LUA_TNUMBER:{if(!P.lua_isinteger(Ht,zt)){let Jt=P.lua_tonumber(Ht,zt);ve(Yt,oe(Ht,P.to_luastring(`%${M.LUA_INTEGER_FRMLEN}a`),Jt)),ke(Yt)}else{let Jt=P.lua_tointeger(Ht,zt),Zt=Jt===K.LUA_MININTEGER?'0x%'+M.LUA_INTEGER_FRMLEN+'x':M.LUA_INTEGER_FMT;ve(Yt,P.to_luastring(I(Zt,Jt)))}break}case P.LUA_TNIL:case P.LUA_TBOOLEAN:{ve(Yt,N.luaL_tolstring(Ht,zt));break}default:N.luaL_argerror(Ht,zt,P.to_luastring('value has no literal form',!0));}},Se=function(Ht,Yt,zt){let Jt=Yt;for(;0!==Jt[0]&&0<=pe.indexOf(Jt[0]);)Jt=Jt.slice(1);Yt.length-Jt.length>=pe.length&&N.luaL_error(Ht,P.to_luastring('invalid format (repeated flags)',!0)),ge(Jt[0])&&(Jt=Jt.slice(1)),ge(Jt[0])&&(Jt=Jt.slice(1)),Jt[0]==='.'.charCodeAt(0)&&(Jt=Jt.slice(1),ge(Jt[0])&&(Jt=Jt.slice(1)),ge(Jt[0])&&(Jt=Jt.slice(1))),ge(Jt[0])&&N.luaL_error(Ht,P.to_luastring('invalid format (width or precision too long)',!0)),zt[0]='%'.charCodeAt(0);for(let Zt=0;Zt<Yt.length-Jt.length+1;Zt++)zt[Zt+1]=Yt[Zt];return{form:zt,p:Jt}},Ie=function(Ht,Yt){let zt=Ht.length,Jt=Yt.length,Zt=Ht[zt-1];for(let qt=0;qt<Yt.length;qt++)Ht[qt+zt-1]=Yt[qt];return Ht[zt+Jt-1]=Zt,Ht},Ce=0,Pe=16,Me=4,ye=8,De=(1<<ye)-1;class Be{constructor(Ht){this.L=Ht,this.islittle=!0,this.maxalign=1}}const we={Kint:0,Kuint:1,Kfloat:2,Kchar:3,Kstring:4,Kzstr:5,Kpadding:6,Kpaddalign:7,Knop:8},Ge=function(Ht){return'0'.charCodeAt(0)<=Ht&&Ht<='9'.charCodeAt(0)},Ve=function(Ht,Yt){if(Ht.off>=Ht.s.length||!Ge(Ht.s[Ht.off]))return Yt;let zt=0;do zt=10*zt+(Ht.s[Ht.off++]-'0'.charCodeAt(0));while(Ht.off<Ht.s.length&&Ge(Ht.s[Ht.off])&&zt<=(Y-9)/10);return zt},Fe=function(Ht,Yt,zt){let Jt=Ve(Yt,zt);return(Jt>Pe||0>=Jt)&&N.luaL_error(Ht.L,P.to_luastring('integral size (%d) out of limits [1,%d]'),Jt,Pe),Jt},je=function(Ht,Yt){let zt={opt:NaN,size:NaN,opt:Yt.s[Yt.off++],size:0};switch(zt.opt){case'b'.charCodeAt(0):return zt.size=1,zt.opt=we.Kint,zt;case'B'.charCodeAt(0):return zt.size=1,zt.opt=we.Kuint,zt;case'h'.charCodeAt(0):return zt.size=2,zt.opt=we.Kint,zt;case'H'.charCodeAt(0):return zt.size=2,zt.opt=we.Kuint,zt;case'l'.charCodeAt(0):return zt.size=4,zt.opt=we.Kint,zt;case'L'.charCodeAt(0):return zt.size=4,zt.opt=we.Kuint,zt;case'j'.charCodeAt(0):return zt.size=4,zt.opt=we.Kint,zt;case'J'.charCodeAt(0):return zt.size=4,zt.opt=we.Kuint,zt;case'T'.charCodeAt(0):return zt.size=4,zt.opt=we.Kuint,zt;case'f'.charCodeAt(0):return zt.size=4,zt.opt=we.Kfloat,zt;case'd'.charCodeAt(0):return zt.size=8,zt.opt=we.Kfloat,zt;case'n'.charCodeAt(0):return zt.size=8,zt.opt=we.Kfloat,zt;case'i'.charCodeAt(0):return zt.size=Fe(Ht,Yt,4),zt.opt=we.Kint,zt;case'I'.charCodeAt(0):return zt.size=Fe(Ht,Yt,4),zt.opt=we.Kuint,zt;case's'.charCodeAt(0):return zt.size=Fe(Ht,Yt,4),zt.opt=we.Kstring,zt;case'c'.charCodeAt(0):return zt.size=Ve(Yt,-1),-1===zt.size&&N.luaL_error(Ht.L,P.to_luastring('missing size for format option \'c\'')),zt.opt=we.Kchar,zt;case'z'.charCodeAt(0):return zt.opt=we.Kzstr,zt;case'x'.charCodeAt(0):return zt.size=1,zt.opt=we.Kpadding,zt;case'X'.charCodeAt(0):return zt.opt=we.Kpaddalign,zt;case' '.charCodeAt(0):break;case'<'.charCodeAt(0):Ht.islittle=!0;break;case'>'.charCodeAt(0):Ht.islittle=!1;break;case'='.charCodeAt(0):Ht.islittle=!0;break;case'!'.charCodeAt(0):Ht.maxalign=Fe(Ht,Yt,8);break;default:N.luaL_error(Ht.L,P.to_luastring('invalid format option \'%c\''),zt.opt);}return zt.opt=we.Knop,zt},Xe=function(Ht,Yt,zt){let Jt={opt:NaN,size:NaN,ntoalign:NaN},Zt=je(Ht,zt);Jt.size=Zt.size,Jt.opt=Zt.opt;let qt=Jt.size;if(Jt.opt===we.Kpaddalign)if(zt.off>=zt.s.length||0===zt.s[zt.off])N.luaL_argerror(Ht.L,1,P.to_luastring('invalid next option for option \'X\'',!0));else{let Wt=je(Ht,zt);qt=Wt.size,Wt=Wt.opt,(Wt===we.Kchar||0===qt)&&N.luaL_argerror(Ht.L,1,P.to_luastring('invalid next option for option \'X\'',!0))}return 1>=qt||Jt.opt===we.Kchar?Jt.ntoalign=0:(qt>Ht.maxalign&&(qt=Ht.maxalign),0!=(qt&qt-1)&&N.luaL_argerror(Ht.L,1,P.to_luastring('format asks for alignment not power of 2',!0)),Jt.ntoalign=qt-(Yt&qt-1)&qt-1),Jt},He=function(Ht,Yt,zt,Jt,Zt){let qt=Array(Jt);qt[zt?0:Jt-1]=Yt&De;for(let Wt=1;Wt<Jt;Wt++)Yt>>=ye,qt[zt?Wt:Jt-1-Wt]=Yt&De;if(Zt&&Jt>Me)for(let Wt=Me;Wt<Jt;Wt++)qt[zt?Wt:Jt-1-Wt]=De;Ht.push(...qt)},Ye=function(Ht,Yt,zt,Jt){let Zt=new DataView(new ArrayBuffer(Jt));4===Jt?Zt.setFloat32(0,Yt,zt):Zt.setFloat64(0,Yt,zt);for(let qt=0;qt<Jt;qt++)Ht.push(Zt.getUint8(qt,zt))},at=function(Ht,Yt,zt,Jt,Zt){let qt=0,Wt=Jt<=Me?Jt:Me;for(let Qt=Wt-1;0<=Qt;Qt--)qt<<=ye,qt|=Yt[zt?Qt:Jt-1-Qt];if(Jt<Me){if(Zt){let Qt=1<<Jt*ye-1;qt=(qt^Qt)-Qt}}else if(Jt>Me){let Qt=!Zt||0<=qt?0:De;for(let $t=Wt;$t<Jt;$t++)Yt[zt?$t:Jt-1-$t]!==Qt&&N.luaL_error(Ht,P.to_luastring('%d-byte integer does not fit into Lua Integer'),Jt)}return qt},lt=function(Ht,Yt,zt,Jt){E(Yt.length>=Jt);let Zt=new DataView(new ArrayBuffer(Jt));for(let qt=0;qt<Jt;qt++)Zt.setUint8(qt,Yt[qt],zt);return 4==Jt?Zt.getFloat32(0,zt):Zt.getFloat64(0,zt)},st=-1,nt=-2,ot=200,_t=['^'.charCodeAt(0),'$'.charCodeAt(0),'*'.charCodeAt(0),'+'.charCodeAt(0),'?'.charCodeAt(0),'.'.charCodeAt(0),'('.charCodeAt(0),'['.charCodeAt(0),'%'.charCodeAt(0),'-'.charCodeAt(0)];class it{constructor(Ht){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=Ht,this.matchdepth=NaN,this.level=NaN,this.capture=[]}}const pt=function(Ht,Yt){return Yt-='1'.charCodeAt(0),0>Yt||Yt>=Ht.level||Ht.capture[Yt].len===st?N.luaL_error(Ht.L,P.to_luastring('invalid capture index %%%d'),Yt+1):Yt},ct=function(Ht){let Yt=Ht.level;for(Yt--;0<=Yt;Yt--)if(Ht.capture[Yt].len===st)return Yt;return N.luaL_error(Ht.L,P.to_luastring('invalid pattern capture'))},dt=function(Ht,Yt){switch(Ht.p[Yt++]){case F:return Yt===Ht.p_end&&N.luaL_error(Ht.L,P.to_luastring('malformed pattern (ends with \'%%\')')),Yt+1;case'['.charCodeAt(0):{Ht.p[Yt]==='^'.charCodeAt(0)&&Yt++;do Yt===Ht.p_end&&N.luaL_error(Ht.L,P.to_luastring('malformed pattern (missing \']\')')),Ht.p[Yt++]===F&&Yt<Ht.p_end&&Yt++;while(Ht.p[Yt]!==']'.charCodeAt(0));return Yt+1}default:return Yt;}},ft=function(Ht,Yt){let zt;switch(_StringfromCharCode(Yt).toLowerCase().charCodeAt(0)){case'a'.charCodeAt(0):zt=de(Ht);break;case'c'.charCodeAt(0):zt=Le(Ht);break;case'd'.charCodeAt(0):zt=ge(Ht);break;case'g'.charCodeAt(0):zt=Ae(Ht);break;case'l'.charCodeAt(0):zt=he(Ht);break;case'p'.charCodeAt(0):zt=Oe(Ht);break;case's'.charCodeAt(0):zt=Ue(Ht);break;case'u'.charCodeAt(0):zt=Te(Ht);break;case'w'.charCodeAt(0):zt=xe(Ht);break;case'x'.charCodeAt(0):zt=Ee(Ht);break;case'z'.charCodeAt(0):zt=0===Ht;break;default:return Yt===Ht;}return he(Yt)?zt:!zt},Lt=function(Ht,Yt,zt,Jt){let Zt=!0;for(Ht.p[zt+1]==='^'.charCodeAt(0)&&(Zt=!1,zt++);++zt<Jt;)if(Ht.p[zt]===F){if(zt++,ft(Yt,Ht.p[zt]))return Zt;}else if(Ht.p[zt+1]==='-'.charCodeAt(0)&&zt+2<Jt){if(zt+=2,Ht.p[zt-2]<=Yt&&Yt<=Ht.p[zt])return Zt;}else if(Ht.p[zt]===Yt)return Zt;return!Zt},At=function(Ht,Yt,zt,Jt){if(Yt>=Ht.src_end)return!1;let Zt=Ht.src[Yt];switch(Ht.p[zt]){case'.'.charCodeAt(0):return!0;case F:return ft(Zt,Ht.p[zt+1]);case'['.charCodeAt(0):return Lt(Ht,Zt,zt,Jt-1);default:return Ht.p[zt]===Zt;}},ht=function(Ht,Yt,zt){if(zt>=Ht.p_end-1&&N.luaL_error(Ht.L,P.to_luastring('malformed pattern (missing arguments to \'%%b\'')),Ht.src[Yt]!==Ht.p[zt])return null;for(let Jt=Ht.p[zt],Zt=Ht.p[zt+1],qt=1;++Yt<Ht.src_end;)if(Ht.src[Yt]!==Zt)Ht.src[Yt]===Jt&&qt++;else if(0==--qt)return Yt+1;return null},Tt=function(Ht,Yt,zt,Jt){let Zt=0;for(;At(Ht,Yt+Zt,zt,Jt);)Zt++;for(;0<=Zt;){let qt=bt(Ht,Yt+Zt,Jt+1);if(qt)return qt;Zt--}return null},xt=function(Ht,Yt,zt,Jt){for(;;){let Zt=bt(Ht,Yt,Jt+1);if(null!==Zt)return Zt;if(At(Ht,Yt,zt,Jt))Yt++;else return null}},Ot=function(Ht,Yt,zt,Jt){let Zt=Ht.level;32<=Zt&&N.luaL_error(Ht.L,P.to_luastring('too many captures',!0)),Ht.capture[Zt]=Ht.capture[Zt]?Ht.capture[Zt]:{},Ht.capture[Zt].init=Yt,Ht.capture[Zt].len=Jt,Ht.level=Zt+1;let qt;return null===(qt=bt(Ht,Yt,zt))&&Ht.level--,qt},Ut=function(Ht,Yt,zt){let Jt=ct(Ht);Ht.capture[Jt].len=Yt-Ht.capture[Jt].init;let Zt;return null===(Zt=bt(Ht,Yt,zt))&&(Ht.capture[Jt].len=st),Zt},Et=function(Ht,Yt,zt,Jt,Zt){for(let qt=Yt+Zt;Yt<qt;Yt++,Jt++)if(Ht[Yt]!==zt[Jt])return!1;return!0},vt=function(Ht,Yt,zt){zt=pt(Ht,zt);let Jt=Ht.capture[zt].len;return Ht.src_end-Yt>=Jt&&Et(Ht.src,Ht.capture[zt].init,Ht.src,Yt,Jt)?Yt+Jt:null},bt=function(Ht,Yt,zt){let Jt=!1,Zt=!0;for(0==Ht.matchdepth--&&N.luaL_error(Ht.L,P.to_luastring('pattern too complex',!0));Zt||Jt;)if(Zt=!1,zt!==Ht.p_end)switch(Jt?'x'.charCodeAt(0):Ht.p[zt]){case'('.charCodeAt(0):{Yt=Ht.p[zt+1]===')'.charCodeAt(0)?Ot(Ht,Yt,zt+2,nt):Ot(Ht,Yt,zt+1,st);break}case')'.charCodeAt(0):{Yt=Ut(Ht,Yt,zt+1);break}case'$'.charCodeAt(0):{if(zt+1!==Ht.p_end){Jt=!0;break}Yt=0===Ht.src.slice(Yt).length?Yt:null;break}case F:{switch(Ht.p[zt+1]){case'b'.charCodeAt(0):{Yt=ht(Ht,Yt,zt+2),null!==Yt&&(zt+=4,Zt=!0);break}case'f'.charCodeAt(0):{zt+=2,Ht.p[zt]!=='['.charCodeAt(0)&&N.luaL_error(Ht.L,P.to_luastring('missing \'[\' after \'%%f\' in pattern'));let qt=dt(Ht,zt),Wt=Yt===Ht.src_init?0:Ht.src[Yt-1];if(!Lt(Ht,Wt,zt,qt-1)&&Lt(Ht,Yt===Ht.src_end?0:Ht.src[Yt],zt,qt-1)){zt=qt,Zt=!0;break}Yt=null;break}case'0'.charCodeAt(0):case'1'.charCodeAt(0):case'2'.charCodeAt(0):case'3'.charCodeAt(0):case'4'.charCodeAt(0):case'5'.charCodeAt(0):case'6'.charCodeAt(0):case'7'.charCodeAt(0):case'8'.charCodeAt(0):case'9'.charCodeAt(0):{Yt=vt(Ht,Yt,Ht.p[zt+1]),null!==Yt&&(zt+=2,Zt=!0);break}default:Jt=!0;}break}default:{Jt=!1;let qt=dt(Ht,zt);if(!!At(Ht,Yt,zt,qt))switch(Ht.p[qt]){case'?'.charCodeAt(0):{let Wt;null===(Wt=bt(Ht,Yt+1,qt+1))?(zt=qt+1,Zt=!0):Yt=Wt;break}case'+'.charCodeAt(0):Yt++;case'*'.charCodeAt(0):Yt=Tt(Ht,Yt,zt,qt);break;case'-'.charCodeAt(0):Yt=xt(Ht,Yt,zt,qt);break;default:Yt++,zt=qt,Zt=!0;}else if(Ht.p[qt]==='*'.charCodeAt(0)||Ht.p[qt]==='?'.charCodeAt(0)||Ht.p[qt]==='-'.charCodeAt(0)){zt=qt+1,Zt=!0;break}else Yt=null;break}}return Ht.matchdepth++,Yt},kt=function(Ht,Yt,zt,Jt){if(Yt>=Ht.level)0===Yt?P.lua_pushlstring(Ht.L,Ht.src.slice(zt,Jt),Jt-zt):N.luaL_error(Ht.L,P.to_luastring('invalid capture index %%%d'),Yt+1);else{let Zt=Ht.capture[Yt].len;Zt===st&&N.luaL_error(Ht.L,P.to_luastring('unfinished capture',!0)),Zt===nt?P.lua_pushinteger(Ht.L,Ht.capture[Yt].init-Ht.src_init+1):P.lua_pushlstring(Ht.L,Ht.src.slice(Ht.capture[Yt].init),Zt)}},Rt=function(Ht,Yt,zt){let Jt=0===Ht.level&&Ht.src.slice(Yt)?1:Ht.level;N.luaL_checkstack(Ht.L,Jt,P.to_luastring('too many catpures',!0));for(let Zt=0;Zt<Jt;Zt++)kt(Ht,Zt,Yt,zt);return Jt},St=function(Ht,Yt){let zt=0;do{let Jt=!1,Zt=Ht.slice(zt);for(let qt=0;qt<_t.length;qt++)if(-1<Zt.indexOf(_t[qt])){Jt=!0;break}if(Jt)return!1;++zt}while(zt<=Yt);return!0},It=function(Ht,Yt,zt,Jt,Zt,qt){Ht.L=Yt,Ht.matchdepth=ot,Ht.src=zt,Ht.src_init=0,Ht.src_end=Jt,Ht.p=Zt,Ht.p_end=qt},Nt=function(Ht){Ht.level=0,E(Ht.matchdepth===ot)},Ct=function(Ht,Yt,zt){var Jt=zt>>>0,Zt=Yt.length,qt=Ht.length+1-Zt;loop:for(;Jt<qt;Jt++){for(let Wt=0;Wt<Zt;Wt++)if(Ht[Jt+Wt]!==Yt[Wt])continue loop;return Jt}return-1},Pt=function(Ht,Yt){let zt=N.luaL_checkstring(Ht,1),Jt=N.luaL_checkstring(Ht,2),Zt=zt.length,qt=Jt.length,Wt=q(N.luaL_optinteger(Ht,3,1),Zt);if(1>Wt)Wt=1;else if(Wt>Zt+1)return P.lua_pushnil(Ht),1;if(Yt&&(P.lua_toboolean(Ht,4)||St(Jt,qt))){let Qt=Ct(zt.slice(Wt-1),Jt,0);if(-1<Qt)return P.lua_pushinteger(Ht,Wt+Qt),P.lua_pushinteger(Ht,Wt+Qt+qt-1),2}else{let Qt=new it(Ht),$t=Wt-1,ea=Jt[0]==='^'.charCodeAt(0);ea&&(Jt=Jt.slice(1),qt--),It(Qt,Ht,zt,Zt,Jt,qt);do{let ta;if(Nt(Qt),null!==(ta=bt(Qt,$t,0)))return Yt?(P.lua_pushinteger(Ht,$t+1),P.lua_pushinteger(Ht,ta),Rt(Qt,null,0)+2):Rt(Qt,$t,ta)}while($t++<Qt.src_end&&!ea)}return P.lua_pushnil(Ht),1};class Dt{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new it}}const Kt=function(Ht){let Yt=P.lua_touserdata(Ht,P.lua_upvalueindex(3));Yt.ms.L=Ht;for(let zt=Yt.src;zt<=Yt.ms.src_end;zt++){Nt(Yt.ms);let Jt;if(null!==(Jt=bt(Yt.ms,zt,Yt.p))&&Jt!==Yt.lastmatch)return Yt.src=Yt.lastmatch=Jt,Rt(Yt.ms,zt,Jt)}return 0},wt=function(Ht,Yt,zt,Jt){let Zt=Ht.L,qt=P.lua_tostring(Zt,3),Wt=qt.length;for(let Qt=0;Qt<Wt;Qt++)qt[Qt]===F?(Qt++,ge(qt[Qt])?qt[Qt]==='0'.charCodeAt(0)?N.luaL_addlstring(Yt,Ht.src.slice(zt),Jt-zt):(kt(Ht,qt[Qt]-'1'.charCodeAt(0),zt,Jt),N.luaL_tolstring(Zt,-1),P.lua_remove(Zt,-2),N.luaL_addvalue(Yt)):(qt[Qt]!==F&&N.luaL_error(Zt,P.to_luastring('invalid use of \'%c\' in replacement string'),F),N.luaL_addchar(Yt,qt[Qt]))):N.luaL_addchar(Yt,qt[Qt])},Gt=function(Ht,Yt,zt,Jt,Zt){let qt=Ht.L;switch(Zt){case P.LUA_TFUNCTION:{P.lua_pushvalue(qt,3);let Wt=Rt(Ht,zt,Jt);P.lua_call(qt,Wt,1);break}case P.LUA_TTABLE:{kt(Ht,0,zt,Jt),P.lua_gettable(qt,3);break}default:return void wt(Ht,Yt,zt,Jt);}P.lua_toboolean(qt,-1)?!P.lua_isstring(qt,-1)&&N.luaL_error(qt,P.to_luastring('invalid replacement value (a %s)'),N.luaL_typename(qt,-1)):(P.lua_pop(qt,1),P.lua_pushlstring(qt,Ht.src.slice(zt,Jt),Jt-zt)),N.luaL_addvalue(Yt)},Ft={byte:function(Ht){let Yt=N.luaL_checkstring(Ht,1),zt=Yt.length,Jt=q(N.luaL_optinteger(Ht,2,1),zt),Zt=q(N.luaL_optinteger(Ht,3,Jt),zt);if(1>Jt&&(Jt=1),Zt>zt&&(Zt=zt),Jt>Zt)return 0;if(Zt-Jt>=K.MAX_INT)return N.luaL_error(Ht,P.to_luastring('string slice too long',!0));let qt=Zt-Jt+1;N.luaL_checkstack(Ht,qt,P.to_luastring('string slice too long',!0));for(let Wt=0;Wt<qt;Wt++)P.lua_pushinteger(Ht,Yt[Jt+Wt-1]);return qt},char:function(Ht){let Yt=P.lua_gettop(Ht),zt=[];for(let Jt=1,Zt;Jt<=Yt;Jt++)Zt=N.luaL_checkinteger(Ht,Jt),N.luaL_argcheck(Ht,0<=Zt&&255>=Zt,'value out of range'),zt.push(Zt);return P.lua_pushstring(Ht,zt),1},dump:function(Ht){let Yt=[],zt=P.lua_toboolean(Ht,2);return(N.luaL_checktype(Ht,1,P.LUA_TFUNCTION),P.lua_settop(Ht,1),0!==P.lua_dump(Ht,ee,Yt,zt))?N.luaL_error(Ht,P.to_luastring('unable to dump given function')):(P.lua_pushstring(Ht,Yt),1)},find:function(Ht){return Pt(Ht,1)},format:function(Ht){let Yt=P.lua_gettop(Ht),zt=1,Jt=N.luaL_checkstring(Ht,zt),Zt=[];for(;0<Jt.length;)if(Jt[0]!==F)Zt.push(Jt[0]),Jt=Jt.slice(1);else if((Jt=Jt.slice(1))[0]===F)Zt.push(Jt[0]),Jt=Jt.slice(1);else{let qt=[];++zt>Yt&&N.luaL_argerror(Ht,zt,P.to_luastring('no value',!0));let Wt=Se(Ht,Jt,qt);switch(Jt=Wt.p,qt=Wt.form,_StringfromCharCode(Jt[0])){case'c':{Jt=Jt.slice(1),Zt.push(N.luaL_checkinteger(Ht,zt));break}case'd':case'i':case'o':case'u':case'x':case'X':{Jt=Jt.slice(1);let Qt=N.luaL_checkinteger(Ht,zt);qt=Ie(qt,M.LUA_INTEGER_FRMLEN.split('').map(($t)=>$t.charCodeAt(0))),ve(Zt,P.to_luastring(I(_StringfromCharCode(...qt),Qt)));break}case'a':case'A':{Jt=Jt.slice(1),qt=Ie(qt,M.LUA_INTEGER_FRMLEN.split('').map((Qt)=>Qt.charCodeAt(0))),ve(Zt,oe(Ht,qt,N.luaL_checknumber(Ht,zt)));break}case'e':case'E':case'f':case'g':case'G':{Jt=Jt.slice(1);let Qt=N.luaL_checknumber(Ht,zt);qt=Ie(qt,M.LUA_INTEGER_FRMLEN.split('').map(($t)=>$t.charCodeAt(0))),ve(Zt,P.to_luastring(I(_StringfromCharCode(...qt),Qt)));break}case'q':{Jt=Jt.slice(1),Re(Ht,Zt,zt);break}case's':{Jt=Jt.slice(1);let Qt=N.luaL_tolstring(Ht,zt);2>=qt.length||0===qt[2]?(ve(Zt,Qt),P.lua_pop(Ht,1)):(N.luaL_argcheck(Ht,Qt.length===J(Qt),zt,P.to_luastring('string contains zeros',!0)),0>qt.indexOf('.'.charCodeAt(0))&&100<=Qt.length?(ve(Zt,Qt),P.lua_pop(Ht,1)):(ve(Zt,P.to_luastring(I(_StringfromCharCode(...qt),P.to_jsstring(Qt)))),P.lua_pop(Ht,1)));break}default:return N.luaL_error(Ht,P.to_luastring('invalid option \'%%%c\' to \'format\''),Jt[0]);}}return P.lua_pushstring(Ht,Zt),1},gmatch:function(Ht){let Yt=N.luaL_checkstring(Ht,1),zt=N.luaL_checkstring(Ht,2),Jt=Yt.length,Zt=zt.length;P.lua_settop(Ht,2);let qt=new Dt;return P.lua_pushlightuserdata(Ht,qt),It(qt.ms,Ht,Yt,Jt,zt,Zt),qt.src=0,qt.p=0,qt.lastmatch=null,P.lua_pushcclosure(Ht,Kt,3),1},gsub:function(Ht){let Yt=N.luaL_checkstring(Ht,1),zt=Yt.length,Jt=N.luaL_checkstring(Ht,2),Zt=Jt.length,qt=null,Wt=P.lua_type(Ht,3),Qt=N.luaL_optinteger(Ht,4,zt+1),$t=Jt[0]==='^'.charCodeAt(0),ea=0,ta=new it(Ht),aa=new N.luaL_Buffer;for(N.luaL_argcheck(Ht,Wt===P.LUA_TNUMBER||Wt===P.LUA_TSTRING||Wt===P.LUA_TFUNCTION||Wt===P.LUA_TTABLE,3,P.to_luastring('string/function/table expected',!0)),N.luaL_buffinit(Ht,aa),$t&&(Jt=Jt.slice(1),Zt--),It(ta,Ht,Yt,zt,Jt,Zt),Yt=0,Jt=0;ea<Qt;){let la;if(Nt(ta),null!==(la=bt(ta,Yt,Jt))&&la!==qt)ea++,Gt(ta,aa,Yt,la,Wt),Yt=qt=la;else if(Yt<ta.src_end)N.luaL_addchar(aa,ta.src[Yt++]);else break;if($t)break}return N.luaL_addlstring(aa,ta.src.slice(Yt),ta.src_end-Yt),N.luaL_pushresult(aa),P.lua_pushinteger(Ht,ea),2},len:function(Ht){return P.lua_pushinteger(Ht,N.luaL_checkstring(Ht,1).length),1},lower:function(Ht){return P.lua_pushstring(Ht,P.to_luastring(P.to_jsstring(N.luaL_checkstring(Ht,1)).toLowerCase())),1},match:function(Ht){return Pt(Ht,0)},pack:function(Ht){let Yt=[],zt=new Be(Ht),Jt={s:N.luaL_checkstring(Ht,1),off:0},Zt=1,qt=0;for(P.lua_pushnil(Ht);Jt.off<Jt.s.length;){let Wt=Xe(zt,qt,Jt),Qt=Wt.opt,$t=Wt.size,ea=Wt.ntoalign;for(qt+=ea+$t;0<ea--;)Yt.push(Ce);switch(Zt++,Qt){case we.Kint:{let ta=N.luaL_checkinteger(Ht,Zt);if($t<Me){let aa=1<<8*$t-1;N.luaL_argcheck(Ht,-aa<=ta&&ta<aa,Zt,P.to_luastring('integer overflow',!0))}He(Yt,ta,zt.islittle,$t,0>ta);break}case we.Kuint:{let ta=N.luaL_checkinteger(Ht,Zt);$t<Me&&N.luaL_argcheck(Ht,ta>>>0<1<<$t*ye,Zt,P.to_luastring('unsigned overflow',!0)),He(Yt,ta>>>0,zt.islittle,$t,!1);break}case we.Kfloat:{let ta=N.luaL_checknumber(Ht,Zt);Ye(Yt,ta,zt.islittle,$t);break}case we.Kchar:{let ta=N.luaL_checkstring(Ht,Zt),aa=ta.length;for(N.luaL_argcheck(Ht,aa<=$t,Zt,P.to_luastring('string longer than given size',!0)),Yt.push(...ta);aa++<$t;)Yt.push(Ce);break}case we.Kstring:{let ta=N.luaL_checkstring(Ht,Zt),aa=ta.length;N.luaL_argcheck(Ht,4<=$t||aa<1<<$t*ye,Zt,P.to_luastring('string length does not fit in given size',!0)),He(Yt,aa,zt.islittle,$t,0),Yt.push(...ta),qt+=aa;break}case we.Kzstr:{let ta=N.luaL_checkstring(Ht,Zt),aa=ta.length;N.luaL_argcheck(Ht,0>ta.indexOf(0),Zt,P.to_luastring('strings contains zeros',!0)),Yt.push(...ta),Yt.push(0),qt+=aa+1;break}case we.Kpadding:Yt.push(Ce);case we.Kpaddalign:case we.Knop:Zt--;}}return P.lua_pushstring(Ht,Yt),1},packsize:function(Ht){let Yt=new Be(Ht),zt={s:N.luaL_checkstring(Ht,1),off:0},Jt=0;for(;zt.off<zt.s.length;){let Zt=Xe(Yt,Jt,zt),qt=Zt.opt,Wt=Zt.size,Qt=Zt.ntoalign;switch(Wt+=Qt,N.luaL_argcheck(Ht,Jt<=Y-Wt,1,P.to_luastring('format result too large',!0)),Jt+=Wt,qt){case we.Kstring:case we.Kzstr:N.luaL_argerror(Ht,1,P.to_luastring('variable-length format',!0));default:}}return P.lua_pushinteger(Ht,Jt),1},rep:function(Ht){let Yt=N.luaL_checkstring(Ht,1),zt=N.luaL_checkinteger(Ht,2),Jt=N.luaL_optstring(Ht,3,[]);if(Yt.length+Jt.length<Yt.length||Yt.length+Jt.length>Y/zt)return N.luaL_error(Ht,P.to_luastring('resulting string too large',!0));let Zt=[];for(let qt=0;qt<zt-1;qt++)Zt=Zt.concat(Yt.concat(Jt));return Zt=Zt.concat(Yt),P.lua_pushstring(Ht,0<zt?Zt:[]),1},reverse:function(Ht){return P.lua_pushstring(Ht,N.luaL_checkstring(Ht,1).slice(0).reverse()),1},sub:function(Ht){let Yt=N.luaL_checkstring(Ht,1),zt=Yt.length,Jt=q(N.luaL_checkinteger(Ht,2),zt),Zt=q(N.luaL_optinteger(Ht,3,-1),zt);return 1>Jt&&(Jt=1),Zt>zt&&(Zt=zt),Jt<=Zt?P.lua_pushstring(Ht,Yt.slice(Jt-1,Jt-1+(Zt-Jt+1))):P.lua_pushliteral(Ht,''),1},unpack:function(Ht){let Yt=new Be(Ht),zt={s:N.luaL_checkstring(Ht,1),off:0},Jt=N.luaL_checkstring(Ht,2),Zt=Jt.length,qt=q(N.luaL_optinteger(Ht,3,1),Zt)-1,Wt=0;for(N.luaL_argcheck(Ht,qt<=Zt&&0<=qt,3,P.to_luastring('initial position out of string',!0));zt.off<zt.s.length;){let Qt=Xe(Yt,qt,zt),$t=Qt.opt,ea=Qt.size,ta=Qt.ntoalign;switch(qt+ta+ea>Zt&&N.luaL_argerror(Ht,2,P.to_luastring('data string too short',!0)),qt+=ta,N.luaL_checkstack(Ht,2,P.to_luastring('too many results',!0)),Wt++,$t){case we.Kint:case we.Kuint:{let aa=at(Ht,Jt.slice(qt),Yt.islittle,ea,$t===we.Kint);P.lua_pushinteger(Ht,aa);break}case we.Kfloat:{let aa=lt(Ht,Jt.slice(qt),Yt.islittle,ea);P.lua_pushnumber(Ht,aa);break}case we.Kchar:{P.lua_pushstring(Ht,Jt.slice(qt,qt+ea));break}case we.Kstring:{let aa=at(Ht,Jt.slice(qt),Yt.islittle,ea,0);N.luaL_argcheck(Ht,qt+aa+ea<=Zt,2,P.to_luastring('data string too short',!0)),P.lua_pushstring(Ht,Jt.slice(qt+ea,qt+ea+aa)),qt+=aa;break}case we.Kzstr:{let aa=Jt.slice(qt).indexOf(0);P.lua_pushstring(Ht,Jt.slice(qt,qt+aa)),qt+=aa+1;break}case we.Kpaddalign:case we.Kpadding:case we.Knop:Wt--;}qt+=ea}return P.lua_pushinteger(Ht,qt+1),Wt+1},upper:function(Ht){return P.lua_pushstring(Ht,P.to_luastring(P.to_jsstring(N.luaL_checkstring(Ht,1)).toUpperCase())),1}},jt=function(Ht){P.lua_createtable(Ht,0,1),P.lua_pushliteral(Ht,''),P.lua_pushvalue(Ht,-2),P.lua_setmetatable(Ht,-2),P.lua_pop(Ht,1),P.lua_pushvalue(Ht,-2),P.lua_setfield(Ht,-2,P.to_luastring('__index',!0)),P.lua_pop(Ht,1)};T.exports.luaopen_string=function(Ht){return N.luaL_newlib(Ht,Ft),jt(Ht),1}},function(T,O,U){'use strict';const E=U(0),I=U(2),N=U(5),P=U(6),M=1,K=2,V=4,F=M|K,H=function(Ae,he,Te){return I.lua_pushstring(Ae,he),I.lua_rawget(Ae,-Te)!==I.LUA_TNIL},Y=function(Ae,he,Te){if(I.lua_type(Ae,he)!==I.LUA_TTABLE){let xe=1;I.lua_getmetatable(Ae,he)&&(!(Te&M)||H(Ae,I.to_luastring('__index',!0),++xe))&&(!(Te&K)||H(Ae,I.to_luastring('__newindex',!0),++xe))&&(!(Te&V)||H(Ae,I.to_luastring('__len',!0),++xe))?I.lua_pop(Ae,xe):N.luaL_checktype(Ae,he,I.LUA_TTABLE)}},J=function(Ae,he,Te){return Y(Ae,he,Te|V),N.luaL_len(Ae,he)},q=function(Ae,he,Te){I.lua_geti(Ae,1,Te),I.lua_isstring(Ae,-1)||N.luaL_error(Ae,I.to_luastring('invalid value (%s) at index %d in table for \'concat\''),N.luaL_typename(Ae,-1),Te),N.luaL_addvalue(he)},ue=function(){return _Mathfloor(1*Math.random()<<32)},ne=function(Ae,he,Te){I.lua_seti(Ae,1,he),I.lua_seti(Ae,1,Te)},oe=function(Ae,he,Te){if(I.lua_isnil(Ae,2))return I.lua_compare(Ae,he,Te,I.LUA_OPLT);I.lua_pushvalue(Ae,2),I.lua_pushvalue(Ae,he-1),I.lua_pushvalue(Ae,Te-2),I.lua_call(Ae,2,1);let xe=I.lua_toboolean(Ae,-1);return I.lua_pop(Ae,1),xe},_e=function(Ae,he,Te){for(let xe=he,Oe=Te-1;;){for(;I.lua_geti(Ae,1,++xe),oe(Ae,-1,-2);)xe==Te-1&&N.luaL_error(Ae,I.to_luastring('invalid order function for sorting')),I.lua_pop(Ae,1);for(;I.lua_geti(Ae,1,--Oe),oe(Ae,-3,-1);)Oe<xe&&N.luaL_error(Ae,I.to_luastring('invalid order function for sorting')),I.lua_pop(Ae,1);if(Oe<xe)return I.lua_pop(Ae,1),ne(Ae,Te-1,xe),xe;ne(Ae,xe,Oe)}},pe=function(Ae,he,Te){let xe=_Mathfloor((he-Ae)/4),Oe=Te%(2*xe)+(Ae+xe);return E(Ae+xe<=Oe&&Oe<=he-xe),Oe},ce=function(Ae,he,Te,xe){for(;he<Te;){if(I.lua_geti(Ae,1,he),I.lua_geti(Ae,1,Te),oe(Ae,-1,-2)?ne(Ae,he,Te):I.lua_pop(Ae,2),1==Te-he)return;let Oe;if(Oe=100>Te-he||0===xe?_Mathfloor((he+Te)/2):pe(he,Te,xe),I.lua_geti(Ae,1,Oe),I.lua_geti(Ae,1,he),oe(Ae,-2,-1)?ne(Ae,Oe,he):(I.lua_pop(Ae,1),I.lua_geti(Ae,1,Te),oe(Ae,-1,-2)?ne(Ae,Oe,Te):I.lua_pop(Ae,2)),2==Te-he)return;I.lua_geti(Ae,1,Oe),I.lua_pushvalue(Ae,-1),I.lua_geti(Ae,1,Te-1),ne(Ae,Oe,Te-1),Oe=_e(Ae,he,Te);let Ue;Oe-he<Te-Oe?(ce(Ae,he,Oe-1,xe),Ue=Oe-he,he=Oe+1):(ce(Ae,Oe+1,Te,xe),Ue=Te-Oe,Te=Oe-1),(Te-he)/128>Ue&&(xe=ue())}},ge={concat:function(Ae){let he=J(Ae,1,M),Te=N.luaL_optlstring(Ae,2,[]),xe=N.luaL_optinteger(Ae,3,1);he=N.luaL_optinteger(Ae,4,he);let Oe=new N.luaL_Buffer;for(N.luaL_buffinit(Ae,Oe);xe<he;xe++)q(Ae,Oe,xe),N.luaL_addlstring(Oe,Te);return xe===he&&q(Ae,Oe,xe),N.luaL_pushresult(Oe),1},insert:function(Ae){let he=J(Ae,1,F)+1,Te;switch(I.lua_gettop(Ae)){case 2:Te=he;break;case 3:{Te=N.luaL_checkinteger(Ae,2),N.luaL_argcheck(Ae,1<=Te&&Te<=he,2,I.to_luastring('position out of bounds',!0));for(let xe=he;xe>Te;xe--)I.lua_geti(Ae,1,xe-1),I.lua_seti(Ae,1,xe);break}default:return N.luaL_error(Ae,I.to_luastring('wrong number of arguments to \'insert\'',!0));}return I.lua_seti(Ae,1,Te),0},move:function(Ae){let he=N.luaL_checkinteger(Ae,2),Te=N.luaL_checkinteger(Ae,3),xe=N.luaL_checkinteger(Ae,4),Oe=I.lua_isnoneornil(Ae,5)?1:5;if(Y(Ae,1,M),Y(Ae,Oe,K),Te>=he){N.luaL_argcheck(Ae,0<he||Te<P.LUA_MAXINTEGER+he,3,I.to_luastring('too many elements to move',!0));let Ue=Te-he+1;if(N.luaL_argcheck(Ae,xe<=P.LUA_MAXINTEGER-Ue+1,4,I.to_luastring('destination wrap around',!0)),xe>Te||xe<=he||1!=Oe&&1!==I.lua_compare(Ae,1,Oe,I.LUA_OPEQ))for(let Ee=0;Ee<Ue;Ee++)I.lua_geti(Ae,1,he+Ee),I.lua_seti(Ae,Oe,xe+Ee);else for(let Ee=Ue-1;0<=Ee;Ee--)I.lua_geti(Ae,1,he+Ee),I.lua_seti(Ae,Oe,xe+Ee)}return I.lua_pushvalue(Ae,Oe),1},pack:function(Ae){let he=I.lua_gettop(Ae);I.lua_createtable(Ae,he,1),I.lua_insert(Ae,1);for(let Te=he;1<=Te;Te--)I.lua_seti(Ae,1,Te);return I.lua_pushinteger(Ae,he),I.lua_setfield(Ae,1,['n'.charCodeAt(0)]),1},remove:function(Ae){let he=J(Ae,1,F),Te=N.luaL_optinteger(Ae,2,he);for(Te!==he&&N.luaL_argcheck(Ae,1<=Te&&Te<=he+1,1,I.to_luastring('position out of bounds',!0)),I.lua_geti(Ae,1,Te);Te<he;Te++)I.lua_geti(Ae,1,Te+1),I.lua_seti(Ae,1,Te);return I.lua_pushnil(Ae),I.lua_seti(Ae,1,Te),1},sort:function(Ae){let he=J(Ae,1,F);return 1<he&&(N.luaL_argcheck(Ae,he<P.MAX_INT,1,I.to_luastring('array too big',!0)),!I.lua_isnoneornil(Ae,2)&&N.luaL_checktype(Ae,2,I.LUA_TFUNCTION),I.lua_settop(Ae,2),ce(Ae,1,he,0)),0},unpack:function(Ae){let he=N.luaL_optinteger(Ae,2,1),Te=N.luaL_opt(Ae,N.luaL_checkinteger,3,N.luaL_len(Ae,1));if(he>Te)return 0;let xe=Te-he;if(xe>=P.MAX_INT||!I.lua_checkstack(Ae,++xe))return N.luaL_error(Ae,I.to_luastring('too many results to unpack',!0));for(;he<Te;he++)I.lua_geti(Ae,1,he);return I.lua_geti(Ae,1,Te),xe}};T.exports.luaopen_table=function(Ae){return N.luaL_newlib(Ae,ge),1}},function(T,O,U){'use strict';const E=U(2),I=U(45),N='_'+E.LUA_VERSION_MAJOR+'_'+E.LUA_VERSION_MINOR;T.exports.LUA_VERSUFFIX=N,T.exports.LUA_COLIBNAME='coroutine',T.exports.luaopen_coroutine=U(24).luaopen_coroutine,T.exports.LUA_TABLIBNAME='table',T.exports.luaopen_table=U(33).luaopen_table,T.exports.LUA_OSLIBNAME='os',T.exports.luaopen_os=U(30).luaopen_os,T.exports.LUA_STRLIBNAME='string',T.exports.luaopen_string=U(32).luaopen_string,T.exports.LUA_UTF8LIBNAME='utf8',T.exports.luaopen_utf8=U(35).luaopen_utf8,T.exports.LUA_BITLIBNAME='bit32',T.exports.LUA_MATHLIBNAME='math',T.exports.luaopen_math=U(28).luaopen_math,T.exports.LUA_DBLIBNAME='debug',T.exports.luaopen_debug=U(25).luaopen_debug,T.exports.LUA_LOADLIBNAME='package',T.exports.luaopen_package=U(29).luaopen_package,T.exports.luaL_openlibs=I.luaL_openlibs},function(T,O,U){'use strict';const E=U(2),I=U(5),N=U(6),P=1114111,M=function(ue){return 128==(192&ue)},K=function(ue,se){return 0<=ue?ue:0-ue>se?0:se+ue+1},V=[255,127,2047,65535],F=function(ue,se){let ne=ue[se],oe=0;if(128>ne)oe=ne;else{let _e=0;for(;64&ne;){let pe=ue[se+ ++_e];if(128!=(192&pe))return null;oe=oe<<6|63&pe,ne<<=1}if(oe|=(127&ne)<<5*_e,3<_e||oe>P||oe<=V[_e])return null;se+=_e}return{code:oe,pos:se+1}},Y=function(ue,se){let ne=I.luaL_checkinteger(ue,se);I.luaL_argcheck(ue,0<=ne&&ne<=P,se,E.to_luastring('value out of range',!0)),E.lua_pushstring(ue,E.to_luastring(_StringfromCodePoint(ne)))},Q=function(ue){let se=I.luaL_checkstring(ue,1),ne=se.length,oe=E.lua_tointeger(ue,2)-1;if(0>oe)oe=0;else if(oe<ne)for(oe++;M(se[oe]);)oe++;if(oe>=ne)return 0;let _e=F(se,oe);return null===_e||M(se[_e.pos])?I.luaL_error(ue,E.to_luastring('invalid UTF-8 code',!0)):(E.lua_pushinteger(ue,oe+1),E.lua_pushinteger(ue,_e.code),2)},ee={char:function(ue){let se=E.lua_gettop(ue);if(1===se)Y(ue,1);else{let ne=new I.luaL_Buffer;I.luaL_buffinit(ue,ne);for(let oe=1;oe<=se;oe++)Y(ue,oe),I.luaL_addvalue(ne);I.luaL_pushresult(ne)}return 1},codepoint:function(ue){let se=I.luaL_checkstring(ue,1),ne=K(I.luaL_optinteger(ue,2,1),se.length),oe=K(I.luaL_optinteger(ue,3,ne),se.length);if(I.luaL_argcheck(ue,1<=ne,2,E.to_luastring('out of range',!0)),I.luaL_argcheck(ue,oe<=se.length,3,E.to_luastring('out of range',!0)),ne>oe)return 0;if(oe-ne>=N.MAX_INT)return I.luaL_error(ue,E.to_luastring('string slice too long',!0));let _e=oe-ne+1;for(I.luaL_checkstack(ue,_e,E.to_luastring('string slice too long',!0)),_e=0,ne-=1;ne<oe;){let pe=F(se,ne);if(null===pe)return I.luaL_error(ue,E.to_luastring('invalid UTF-8 code',!0));E.lua_pushinteger(ue,pe.code),ne=pe.pos,_e++}return _e},codes:function(ue){return I.luaL_checkstring(ue,1),E.lua_pushcfunction(ue,Q),E.lua_pushvalue(ue,1),E.lua_pushinteger(ue,0),3},len:function(ue){let se=0,ne=I.luaL_checkstring(ue,1),oe=ne.length,_e=K(I.luaL_optinteger(ue,2,1),oe),pe=K(I.luaL_optinteger(ue,3,-1),oe);for(I.luaL_argcheck(ue,1<=_e&&--_e<=oe,2,E.to_luastring('initial position out of string')),I.luaL_argcheck(ue,--pe<oe,3,E.to_luastring('final position out of string'));_e<=pe;){let ce=F(ne,_e);if(null===ce)return E.lua_pushnil(ue),E.lua_pushinteger(ue,_e+1),2;_e=ce.pos,se++}return E.lua_pushinteger(ue,se),1},offset:function(ue){let se=I.luaL_checkstring(ue,1),ne=I.luaL_checkinteger(ue,2),oe=0<=ne?1:se.length+1;if(oe=K(I.luaL_optinteger(ue,3,oe),se.length),I.luaL_argcheck(ue,1<=oe&&--oe<=se.length,3,E.to_luastring('position out of range',!0)),0===ne)for(;0<oe&&M(se[oe]);)oe--;else if(M(se[oe])&&I.luaL_error(ue,E.to_luastring('initial position is a continuation byte',!0)),0>ne)for(;0>ne&&0<oe;){do oe--;while(0<oe&&M(se[oe]));ne++}else for(ne--;0<ne&&oe<se.length;){do oe++;while(M(se[oe]));ne--}return 0===ne?E.lua_pushinteger(ue,oe+1):E.lua_pushnil(ue),1}},te=[91,0,45,127,194,45,244,93,91,128,45,191,93,42];T.exports.luaopen_utf8=function(ue){return I.luaL_newlib(ue,ee),E.lua_pushstring(ue,te),E.lua_setfield(ue,-2,E.to_luastring('charpattern',!0)),1}},function(T,O,U){var E;!function(){'use strict';function I(F){return P(M(F),arguments)}function N(F,H){return I.apply(null,[F].concat(H||[]))}function P(F,H){var Y=1,J=F.length,W='',q,Q,$,ee,te,ae,ue,se,ne;for(Q=0;Q<J;Q++)if('string'==typeof F[Q])W+=F[Q];else if(Array.isArray(F[Q])){if(ee=F[Q],ee[2])for(q=H[Y],$=0;$<ee[2].length;$++){if(!q.hasOwnProperty(ee[2][$]))throw new Error(I('[sprintf] property "%s" does not exist',ee[2][$]));q=q[ee[2][$]]}else q=ee[1]?H[ee[1]]:H[Y++];if(K.not_type.test(ee[8])&&K.not_primitive.test(ee[8])&&q instanceof Function&&(q=q()),K.numeric_arg.test(ee[8])&&'number'!=typeof q&&isNaN(q))throw new TypeError(I('[sprintf] expecting number but found %T',q));switch(K.number.test(ee[8])&&(se=0<=q),ee[8]){case'b':q=parseInt(q,10).toString(2);break;case'c':q=_StringfromCharCode(parseInt(q,10));break;case'd':case'i':q=parseInt(q,10);break;case'j':q=JSON.stringify(q,null,ee[6]?parseInt(ee[6]):0);break;case'e':q=ee[7]?parseFloat(q).toExponential(ee[7]):parseFloat(q).toExponential();break;case'f':q=ee[7]?parseFloat(q).toFixed(ee[7]):parseFloat(q);break;case'g':q=ee[7]?+q.toPrecision(ee[7])+'':parseFloat(q);break;case'o':q=(parseInt(q,10)>>>0).toString(8);break;case's':q+='',q=ee[7]?q.substring(0,ee[7]):q;break;case't':q=!!q+'',q=ee[7]?q.substring(0,ee[7]):q;break;case'T':q=Object.prototype.toString.call(q).slice(8,-1).toLowerCase(),q=ee[7]?q.substring(0,ee[7]):q;break;case'u':q=parseInt(q,10)>>>0;break;case'v':q=q.valueOf(),q=ee[7]?q.substring(0,ee[7]):q;break;case'x':q=(parseInt(q,10)>>>0).toString(16);break;case'X':q=(parseInt(q,10)>>>0).toString(16).toUpperCase();}K.json.test(ee[8])?W+=q:(K.number.test(ee[8])&&(!se||ee[3])?(ne=se?'+':'-',q=q.toString().replace(K.sign,'')):ne='',ae=ee[4]?'0'===ee[4]?'0':ee[4].charAt(1):' ',ue=ee[6]-(ne+q).length,te=ee[6]?0<ue?ae.repeat(ue):'':'',W+=ee[5]?ne+q+te:'0'===ae?ne+te+q:te+ne+q)}return W}function M(F){if(V[F])return V[F];for(var H=F,J=[],q=0,Y;H;){if(null!==(Y=K.text.exec(H)))J.push(Y[0]);else if(null!==(Y=K.modulo.exec(H)))J.push('%');else if(null!==(Y=K.placeholder.exec(H))){if(Y[2]){q|=1;var W=[],Q=Y[2],$=[];if(null!==($=K.key.exec(Q))){for(W.push($[1]);''!==(Q=Q.substring($[0].length));)if(null!==($=K.key_access.exec(Q)))W.push($[1]);else if(null!==($=K.index_access.exec(Q)))W.push($[1]);else throw new SyntaxError('[sprintf] failed to parse named argument key');}else throw new SyntaxError('[sprintf] failed to parse named argument key');Y[2]=W}else q|=2;if(3==q)throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');J.push(Y)}else throw new SyntaxError('[sprintf] unexpected placeholder');H=H.substring(Y[0].length)}return V[F]=J}var K={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},V=Object.create(null);O.sprintf=I,O.vsprintf=N,'undefined'!=typeof window&&(window.sprintf=I,window.vsprintf=N,E=function(){return{sprintf:I,vsprintf:N}}.call(O,U,O,T),!(void 0!==E&&(T.exports=E)))}()},function(T,O,U){(function(E,I){function N(Ee,ve){var be={seen:[],stylize:M};return 3<=arguments.length&&(be.depth=arguments[2]),4<=arguments.length&&(be.colors=arguments[3]),Q(ve)?be.showHidden=ve:ve&&O._extend(be,ve),se(be.showHidden)&&(be.showHidden=!1),se(be.depth)&&(be.depth=2),se(be.colors)&&(be.colors=!1),se(be.customInspect)&&(be.customInspect=!0),be.colors&&(be.stylize=P),V(be,Ee,be.depth)}function P(Ee,ve){var be=N.styles[ve];return be?'\x1B['+N.colors[be][0]+'m'+Ee+'\x1B['+N.colors[be][1]+'m':Ee}function M(Ee){return Ee}function K(Ee){var ve={};return Ee.forEach(function(be){ve[be]=!0}),ve}function V(Ee,ve,be){if(Ee.customInspect&&ve&&ce(ve.inspect)&&ve.inspect!==O.inspect&&!(ve.constructor&&ve.constructor.prototype===ve)){var ke=ve.inspect(be,Ee);return ae(ke)||(ke=V(Ee,ke,be)),ke}var Re=F(Ee,ve);if(Re)return Re;var Se=Object.keys(ve),Ie=K(Se);if(Ee.showHidden&&(Se=Object.getOwnPropertyNames(ve)),pe(ve)&&(0<=Se.indexOf('message')||0<=Se.indexOf('description')))return H(ve);if(0===Se.length){if(ce(ve)){var Ne=ve.name?': '+ve.name:'';return Ee.stylize('[Function'+Ne+']','special')}if(ne(ve))return Ee.stylize(RegExp.prototype.toString.call(ve),'regexp');if(_e(ve))return Ee.stylize(Date.prototype.toString.call(ve),'date');if(pe(ve))return H(ve)}var Ce='',Pe=!1,Me=['{','}'];if(W(ve)&&(Pe=!0,Me=['[',']']),ce(ve)){var ye=ve.name?': '+ve.name:'';Ce=' [Function'+ye+']'}if(ne(ve)&&(Ce=' '+RegExp.prototype.toString.call(ve)),_e(ve)&&(Ce=' '+Date.prototype.toUTCString.call(ve)),pe(ve)&&(Ce=' '+H(ve)),0===Se.length&&(!Pe||0==ve.length))return Me[0]+Ce+Me[1];if(0>be)return ne(ve)?Ee.stylize(RegExp.prototype.toString.call(ve),'regexp'):Ee.stylize('[Object]','special');Ee.seen.push(ve);var De;return De=Pe?Y(Ee,ve,be,Ie,Se):Se.map(function(Ke){return J(Ee,ve,be,Ie,Ke,Pe)}),Ee.seen.pop(),q(De,Ce,Me)}function F(Ee,ve){if(se(ve))return Ee.stylize('undefined','undefined');if(ae(ve)){var be='\''+JSON.stringify(ve).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return Ee.stylize(be,'string')}return te(ve)?Ee.stylize(''+ve,'number'):Q(ve)?Ee.stylize(''+ve,'boolean'):$(ve)?Ee.stylize('null','null'):void 0}function H(Ee){return'['+Error.prototype.toString.call(Ee)+']'}function Y(Ee,ve,be,ke,Re){for(var Se=[],Ie=0,Ne=ve.length;Ie<Ne;++Ie)he(ve,Ie+'')?Se.push(J(Ee,ve,be,ke,Ie+'',!0)):Se.push('');return Re.forEach(function(Ce){Ce.match(/^\d+$/)||Se.push(J(Ee,ve,be,ke,Ce,!0))}),Se}function J(Ee,ve,be,ke,Re,Se){var Ie,Ne,Ce;if(Ce=Object.getOwnPropertyDescriptor(ve,Re)||{value:ve[Re]},Ce.get?Ce.set?Ne=Ee.stylize('[Getter/Setter]','special'):Ne=Ee.stylize('[Getter]','special'):Ce.set&&(Ne=Ee.stylize('[Setter]','special')),he(ke,Re)||(Ie='['+Re+']'),Ne||(0>Ee.seen.indexOf(Ce.value)?(Ne=$(be)?V(Ee,Ce.value,null):V(Ee,Ce.value,be-1),-1<Ne.indexOf('\n')&&(Se?Ne=Ne.split('\n').map(function(Pe){return'  '+Pe}).join('\n').substr(2):Ne='\n'+Ne.split('\n').map(function(Pe){return'   '+Pe}).join('\n'))):Ne=Ee.stylize('[Circular]','special')),se(Ie)){if(Se&&Re.match(/^\d+$/))return Ne;Ie=JSON.stringify(''+Re),Ie.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ie=Ie.substr(1,Ie.length-2),Ie=Ee.stylize(Ie,'name')):(Ie=Ie.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),Ie=Ee.stylize(Ie,'string'))}return Ie+': '+Ne}function q(Ee,ve,be){var ke=0,Re=Ee.reduce(function(Se,Ie){return ke++,0<=Ie.indexOf('\n')&&ke++,Se+Ie.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<Re?be[0]+(''===ve?'':ve+'\n ')+' '+Ee.join(',\n  ')+' '+be[1]:be[0]+ve+' '+Ee.join(', ')+' '+be[1]}function W(Ee){return Array.isArray(Ee)}function Q(Ee){return'boolean'==typeof Ee}function $(Ee){return null===Ee}function te(Ee){return'number'==typeof Ee}function ae(Ee){return'string'==typeof Ee}function se(Ee){return void 0===Ee}function ne(Ee){return oe(Ee)&&'[object RegExp]'===ge(Ee)}function oe(Ee){return'object'==typeof Ee&&null!==Ee}function _e(Ee){return oe(Ee)&&'[object Date]'===ge(Ee)}function pe(Ee){return oe(Ee)&&('[object Error]'===ge(Ee)||Ee instanceof Error)}function ce(Ee){return'function'==typeof Ee}function ge(Ee){return Object.prototype.toString.call(Ee)}function Le(Ee){return 10>Ee?'0'+Ee.toString(10):Ee.toString(10)}function Ae(){var Ee=new Date,ve=[Le(Ee.getHours()),Le(Ee.getMinutes()),Le(Ee.getSeconds())].join(':');return[Ee.getDate(),Ue[Ee.getMonth()],ve].join(' ')}function he(Ee,ve){return Object.prototype.hasOwnProperty.call(Ee,ve)}var Te=/%[sdj%]/g;O.format=function(Ee){if(!ae(Ee)){for(var ve=[],be=0;be<arguments.length;be++)ve.push(N(arguments[be]));return ve.join(' ')}for(var be=1,ke=arguments,Re=ke.length,Se=(Ee+'').replace(Te,function(Ne){if('%%'===Ne)return'%';if(be>=Re)return Ne;switch(Ne){case'%s':return ke[be++]+'';case'%d':return+ke[be++];case'%j':try{return JSON.stringify(ke[be++])}catch(Ce){return'[Circular]'}default:return Ne;}}),Ie=ke[be];be<Re;Ie=ke[++be])Se+=$(Ie)||!oe(Ie)?' '+Ie:' '+N(Ie);return Se},O.deprecate=function(Ee,ve){if(se(E.process))return function(){return O.deprecate(Ee,ve).apply(this,arguments)};if(!0===I.noDeprecation)return Ee;var ke=!1;return function(){if(!ke){if(I.throwDeprecation)throw new Error(ve);else I.traceDeprecation?console.trace(ve):console.error(ve);ke=!0}return Ee.apply(this,arguments)}};var xe={},Oe;O.debuglog=function(Ee){if(se(Oe)&&(Oe=I.env.NODE_DEBUG||''),Ee=Ee.toUpperCase(),!xe[Ee])if(new RegExp('\\b'+Ee+'\\b','i').test(Oe)){var ve=I.pid;xe[Ee]=function(){var be=O.format.apply(O,arguments);console.error('%s %d: %s',Ee,ve,be)}}else xe[Ee]=function(){};return xe[Ee]},O.inspect=N,N.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},N.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},O.isArray=W,O.isBoolean=Q,O.isNull=$,O.isNullOrUndefined=function(Ee){return null==Ee},O.isNumber=te,O.isString=ae,O.isSymbol=function(Ee){return'symbol'==typeof Ee},O.isUndefined=se,O.isRegExp=ne,O.isObject=oe,O.isDate=_e,O.isError=pe,O.isFunction=ce,O.isPrimitive=function(Ee){return null===Ee||'boolean'==typeof Ee||'number'==typeof Ee||'string'==typeof Ee||'symbol'==typeof Ee||'undefined'==typeof Ee},O.isBuffer=U(59);var Ue=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];O.log=function(){console.log('%s - %s',Ae(),O.format.apply(O,arguments))},O.inherits=U(58),O._extend=function(Ee,ve){if(!ve||!oe(ve))return Ee;for(var be=Object.keys(ve),ke=be.length;ke--;)Ee[be[ke]]=ve[be[ke]];return Ee}}).call(O,U(21),U(19))},function(T,O,U){'use strict';(function(E){const I=U(23),N=I.lua,P=I.lauxlib,M=I.lualib;let K;try{K=U(37).inspect.custom}catch(ve){}const V=Reflect.apply,F=Reflect.construct,H=function(ve){return''+ve},Y=function(ve){return'object'==typeof ve?null!==ve:'function'==typeof ve},J=N.to_luastring('js object'),q=function(ve,be){let ke=P.luaL_testudata(ve,be,J);return ke?ke.data:void 0},W=function(ve,be){return P.luaL_checkudata(ve,be,J).data},Q=function(ve,be){let ke=N.lua_newuserdata(ve);ke.data=be,P.luaL_setmetatable(ve,J)},$=function(ve){N.lua_rawgeti(ve,N.LUA_REGISTRYINDEX,N.LUA_RIDX_MAINTHREAD);let be=N.lua_tothread(ve,-1);return N.lua_pop(ve,1),be},ee=new WeakMap,te=function(ve){let be=N.lua_touserdata(ve,1);return ae(ve,be),1},ae=function(ve,be){switch(typeof be){case'undefined':N.lua_pushnil(ve);break;case'number':N.lua_pushnumber(ve,be);break;case'string':N.lua_pushstring(ve,N.to_luastring(be));break;case'boolean':N.lua_pushboolean(ve,be);break;case'symbol':N.lua_pushlightuserdata(ve,be);break;case'function':if(N.lua_isproxy(be,ve)){be(ve);break}case'object':if(null===be){N.lua_rawgetp(ve,N.LUA_REGISTRYINDEX,null);break}default:let ke=ee.get($(ve)),Re=ke.get(be);Re?Re(ve):(Q(ve,be),Re=N.lua_toproxy(ve,-1),ke.set(be,Re));}},ue=function(ve,be){switch(N.lua_type(ve,be)){case N.LUA_TNONE:case N.LUA_TNIL:return;case N.LUA_TBOOLEAN:return N.lua_toboolean(ve,be);case N.LUA_TLIGHTUSERDATA:return N.lua_touserdata(ve,be);case N.LUA_TNUMBER:return N.lua_tonumber(ve,be);case N.LUA_TSTRING:return N.lua_tojsstring(ve,be);case N.LUA_TUSERDATA:let ke=q(ve,be);if(void 0!==ke)return ke;case N.LUA_TTABLE:case N.LUA_TFUNCTION:case N.LUA_TTHREAD:default:return Le($(ve),N.lua_toproxy(ve,be));}},se=function(ve,be,ke,Re,Se){P.luaL_checkstack(ve,2+Re.length),(void 0===Se||null===Se)&&(Se=N.LUA_MULTRET);let Ie=N.lua_gettop(ve);be(ve),ae(ve,ke);for(let Pe=0;Pe<Re.length;Pe++)ae(ve,Re[Pe]);N.lua_call(ve,1+Re.length,Se);let Ne=N.lua_gettop(ve)-Ie,Ce=Array(Ne);for(let Pe=0;Pe<Ne;Pe++)Ce[Pe]=ue(ve,Ie+Pe+1);return N.lua_settop(ve,Ie),Ce},ne=function(ve,be,ke){P.luaL_checkstack(ve,2),be(ve),ae(ve,ke),N.lua_gettable(ve,-2);let Re=ue(ve,-1);return N.lua_pop(ve,2),Re},oe=function(ve,be,ke){P.luaL_checkstack(ve,2),be(ve),ae(ve,ke),N.lua_gettable(ve,-2);let Re=N.lua_isnil(ve,-1);return N.lua_pop(ve,2),Re},_e=function(ve,be,ke,Re){P.luaL_checkstack(ve,3),be(ve),ae(ve,ke),ae(ve,Re),N.lua_settable(ve,-3),N.lua_pop(ve,1)},pe=function(ve,be,ke){P.luaL_checkstack(ve,3),be(ve),ae(ve,ke),N.lua_pushnil(ve),N.lua_settable(ve,-3),N.lua_pop(ve,1)},ce=function(ve,be){P.luaL_checkstack(ve,1),be(ve);let ke=P.luaL_tolstring(ve,-1);return N.lua_pop(ve,2),N.to_jsstring(ke)},de=function(){P.luaL_checkstack(this.L,3);let ve=N.lua_gettop(this.L);this.iter(this.L),this.state(this.L),this.last(this.L),N.lua_call(this.L,2,N.LUA_MULTRET),this.last=N.lua_toproxy(this.L,ve+1);let be;if(N.lua_isnil(this.L,-1))be={done:!0,value:void 0};else{let ke=N.lua_gettop(this.L)-ve,Re=Array(ke);for(let Se=0;Se<ke;Se++)Re[Se]=ue(this.L,ve+Se+1);be={done:!1,value:Re}}return N.lua_settop(this.L,ve),be},ge=function(ve,be){P.luaL_requiref(ve,N.to_luastring('_G'),M.luaopen_base,0),N.lua_getfield(ve,-1,N.to_luastring('pairs')),N.lua_remove(ve,-2),be(ve),N.lua_call(ve,1,3);let ke=N.lua_toproxy(ve,-3),Re=N.lua_toproxy(ve,-2),Se=N.lua_toproxy(ve,-1);return N.lua_pop(ve,3),{L:ve,iter:ke,state:Re,last:Se,next:de}},Le=function(ve,be){let ke=function(){return se(ve,be,this,arguments,1)[0]};return ke.apply=function(Re,Se){return se(ve,be,Re,Se,1)[0]},ke.invoke=function(Re,Se){return se(ve,be,Re,Se,N.LUA_MULTRET)},ke.get=function(Re){return ne(ve,be,Re)},ke.has=function(Re){return oe(ve,be,Re)},ke.set=function(Re,Se){return _e(ve,be,Re,Se)},ke.delete=function(Re){return pe(ve,be,Re)},ke.toString=function(){return ce(ve,be)},ke[Symbol.toStringTag]='Fengari object',ke[Symbol.iterator]=function(){return ge(ve,be)},Symbol.toPrimitive&&(ke[Symbol.toPrimitive]=function(Re){if('string'===Re)return ce(ve,be)}),K&&(ke[K]=ke.toString),ke},Ae={apply:function(ve,be,ke){return se(ve.L,ve.p,be,ke,1)[0]},get:function(ve,be){return ne(ve.L,ve.p,be)},has:function(ve,be){return oe(ve.L,ve.p,be)},set:function(ve,be,ke){return _e(ve.L,ve.p,be,ke)},deleteProperty:function(ve,be){return pe(ve.L,ve.p,be)}},he=function(ve,be){let ke=function(){return be(ve)};ke.p=be,ke.L=ve;let Re=new Proxy(ke,Ae);return Re},Te=function(ve,be){let ke=W(ve,be),Re=ke[Symbol.iterator];Re||P.luaL_argerror(ve,be,N.to_luastring('object not iterable'));let Se=V(Re,ke,[]);return Y(Se)||P.luaL_argerror(ve,be,N.to_luastring('Result of the Symbol.iterator method is not an object')),Se},xe=function(ve){let be=W(ve,1),ke=be.next();return ke.done?0:(ae(ve,ke.value),1)};let Oe={new:function(ve){let be=W(ve,1),ke=N.lua_gettop(ve)-1,Re=Array(ke);for(let Se=0;Se<ke;Se++)Re[Se]=ue(ve,Se+2);return ae(ve,F(be,Re)),1},of:function(ve){let be=Te(ve,1);return N.lua_pushcfunction(ve,xe),ae(ve,be),2},createproxy:function(ve){P.luaL_checkany(ve,1);let be=he($(ve),N.lua_toproxy(ve,1));return ae(ve,be),1},tonumber:function(ve){let be=W(ve,1);return N.lua_pushnumber(ve,+be),1}},Ue={__index:function(ve){let be=W(ve,1),ke=ue(ve,2);return ae(ve,be[ke]),1},__newindex:function(ve){let be=W(ve,1),ke=ue(ve,2),Re=ue(ve,3);return void 0===Re?delete be[ke]:be[ke]=Re,0},__tostring:function(ve){let be=W(ve,1),ke=H(be);return N.lua_pushstring(ve,N.to_luastring(ke)),1},__call:function(ve){let be=W(ve,1),ke=N.lua_gettop(ve)-1,Re,Se;if(0<ke&&(Re=ue(ve,2),0<ke--)){Se=Array(ke);for(let Ie=0;Ie<ke;Ie++)Se[Ie]=ue(ve,Ie+3)}return ae(ve,V(be,Re,Se)),1}};T.exports.checkjs=W,T.exports.testjs=q,T.exports.pushjs=Q,T.exports.push=ae,T.exports.tojs=ue,T.exports.luaopen_js=function(ve){return ee.set($(ve),new WeakMap),N.lua_atnativeerror(ve,te),P.luaL_newlib(ve,Oe),P.luaL_newmetatable(ve,J),P.luaL_setfuncs(ve,Ue,0),N.lua_pop(ve,1),Q(ve,null),N.lua_pushvalue(ve,-1),N.lua_rawsetp(ve,N.LUA_REGISTRYINDEX,null),N.lua_setfield(ve,-2,N.to_luastring('null')),ae(ve,E),N.lua_setfield(ve,-2,N.to_luastring('global')),1}}).call(O,U(21))},function(T,O){'use strict';function E(W){var Q=W.length;if(0<Q%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===W[Q-2]?2:'='===W[Q-1]?1:0}function P(W){return V[63&W>>18]+V[63&W>>12]+V[63&W>>6]+V[63&W]}function M(W,Q,$){for(var te=[],ae=Q,ee;ae<$;ae+=3)ee=(W[ae]<<16)+(W[ae+1]<<8)+W[ae+2],te.push(P(ee));return te.join('')}O.byteLength=function(W){return 3*W.length/4-E(W)},O.toByteArray=function(W){var ue=W.length,Q,$,ee,te,ae;te=E(W),ae=new H(3*ue/4-te),$=0<te?ue-4:ue;var se=0;for(Q=0;Q<$;Q+=4)ee=F[W.charCodeAt(Q)]<<18|F[W.charCodeAt(Q+1)]<<12|F[W.charCodeAt(Q+2)]<<6|F[W.charCodeAt(Q+3)],ae[se++]=255&ee>>16,ae[se++]=255&ee>>8,ae[se++]=255&ee;return 2===te?(ee=F[W.charCodeAt(Q)]<<2|F[W.charCodeAt(Q+1)]>>4,ae[se++]=255&ee):1==te&&(ee=F[W.charCodeAt(Q)]<<10|F[W.charCodeAt(Q+1)]<<4|F[W.charCodeAt(Q+2)]>>2,ae[se++]=255&ee>>8,ae[se++]=255&ee),ae},O.fromByteArray=function(W){for(var $=W.length,ee=$%3,te='',ae=[],ue=16383,se=0,ne=$-ee,Q;se<ne;se+=ue)ae.push(M(W,se,se+ue>ne?ne:se+ue));return 1==ee?(Q=W[$-1],te+=V[Q>>2],te+=V[63&Q<<4],te+='=='):2==ee&&(Q=(W[$-2]<<8)+W[$-1],te+=V[Q>>10],te+=V[63&Q>>4],te+=V[63&Q<<2],te+='='),ae.push(te),ae.join('')};for(var V=[],F=[],H='undefined'==typeof Uint8Array?Array:Uint8Array,Y='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',J=0,q=Y.length;J<q;++J)V[J]=Y[J],F[Y.charCodeAt(J)]=J;F['-'.charCodeAt(0)]=62,F['_'.charCodeAt(0)]=63},function(T,O,U){'use strict';(function(E){function N(){return M.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function P(Xe,He){if(N()<He)throw new RangeError('Invalid typed array length');return M.TYPED_ARRAY_SUPPORT?(Xe=new Uint8Array(He),Xe.__proto__=M.prototype):(null===Xe&&(Xe=new M(He)),Xe.length=He),Xe}function M(Xe,He,Ye){if(!M.TYPED_ARRAY_SUPPORT&&!(this instanceof M))return new M(Xe,He,Ye);if('number'==typeof Xe){if('string'==typeof He)throw new Error('If encoding is specified then the first argument must be a string');return H(this,Xe)}return K(this,Xe,He,Ye)}function K(Xe,He,Ye,ze){if('number'==typeof He)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&He instanceof ArrayBuffer?q(Xe,He,Ye,ze):'string'==typeof He?Y(Xe,He,Ye):W(Xe,He)}function V(Xe){if('number'!=typeof Xe)throw new TypeError('"size" argument must be a number');else if(0>Xe)throw new RangeError('"size" argument must not be negative')}function F(Xe,He,Ye,ze){return V(He),0>=He?P(Xe,He):void 0===Ye?P(Xe,He):'string'==typeof ze?P(Xe,He).fill(Ye,ze):P(Xe,He).fill(Ye)}function H(Xe,He){if(V(He),Xe=P(Xe,0>He?0:0|Q(He)),!M.TYPED_ARRAY_SUPPORT)for(var Ye=0;Ye<He;++Ye)Xe[Ye]=0;return Xe}function Y(Xe,He,Ye){if(('string'!=typeof Ye||''===Ye)&&(Ye='utf8'),!M.isEncoding(Ye))throw new TypeError('"encoding" must be a valid string encoding');var ze=0|ee(He,Ye);Xe=P(Xe,ze);var Je=Xe.write(He,Ye);return Je!==ze&&(Xe=Xe.slice(0,Je)),Xe}function J(Xe,He){var Ye=0>He.length?0:0|Q(He.length);Xe=P(Xe,Ye);for(var ze=0;ze<Ye;ze+=1)Xe[ze]=255&He[ze];return Xe}function q(Xe,He,Ye,ze){if(He.byteLength,0>Ye||He.byteLength<Ye)throw new RangeError('\'offset\' is out of bounds');if(He.byteLength<Ye+(ze||0))throw new RangeError('\'length\' is out of bounds');return He=void 0===Ye&&void 0===ze?new Uint8Array(He):void 0===ze?new Uint8Array(He,Ye):new Uint8Array(He,Ye,ze),M.TYPED_ARRAY_SUPPORT?(Xe=He,Xe.__proto__=M.prototype):Xe=J(Xe,He),Xe}function W(Xe,He){if(M.isBuffer(He)){var Ye=0|Q(He.length);return(Xe=P(Xe,Ye),0===Xe.length)?Xe:(He.copy(Xe,0,0,Ye),Xe)}if(He){if('undefined'!=typeof ArrayBuffer&&He.buffer instanceof ArrayBuffer||'length'in He)return'number'!=typeof He.length||Be(He.length)?P(Xe,0):J(Xe,He);if('Buffer'===He.type&&Ve(He.data))return J(Xe,He.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function Q(Xe){if(Xe>=N())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+N().toString(16)+' bytes');return 0|Xe}function ee(Xe,He){if(M.isBuffer(Xe))return Xe.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Xe)||Xe instanceof ArrayBuffer))return Xe.byteLength;'string'!=typeof Xe&&(Xe=''+Xe);var Ye=Xe.length;if(0===Ye)return 0;for(var ze=!1;;)switch(He){case'ascii':case'latin1':case'binary':return Ye;case'utf8':case'utf-8':case void 0:return Pe(Xe).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*Ye;case'hex':return Ye>>>1;case'base64':return De(Xe).length;default:if(ze)return Pe(Xe).length;He=(''+He).toLowerCase(),ze=!0;}}function te(Xe,He,Ye){var ze=!1;if((void 0===He||0>He)&&(He=0),He>this.length)return'';if((void 0===Ye||Ye>this.length)&&(Ye=this.length),0>=Ye)return'';if(Ye>>>=0,He>>>=0,Ye<=He)return'';for(Xe||(Xe='utf8');;)switch(Xe){case'hex':return xe(this,He,Ye);case'utf8':case'utf-8':return Le(this,He,Ye);case'ascii':return he(this,He,Ye);case'latin1':case'binary':return Te(this,He,Ye);case'base64':return ge(this,He,Ye);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return Oe(this,He,Ye);default:if(ze)throw new TypeError('Unknown encoding: '+Xe);Xe=(Xe+'').toLowerCase(),ze=!0;}}function ae(Xe,He,Ye){var ze=Xe[He];Xe[He]=Xe[Ye],Xe[Ye]=ze}function ue(Xe,He,Ye,ze,Je){if(0===Xe.length)return-1;if('string'==typeof Ye?(ze=Ye,Ye=0):2147483647<Ye?Ye=2147483647:-2147483648>Ye&&(Ye=-2147483648),Ye=+Ye,isNaN(Ye)&&(Ye=Je?0:Xe.length-1),0>Ye&&(Ye=Xe.length+Ye),Ye>=Xe.length){if(Je)return-1;Ye=Xe.length-1}else if(0>Ye)if(Je)Ye=0;else return-1;if('string'==typeof He&&(He=M.from(He,ze)),M.isBuffer(He))return 0===He.length?-1:se(Xe,He,Ye,ze,Je);if('number'==typeof He)return He&=255,M.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?Je?Uint8Array.prototype.indexOf.call(Xe,He,Ye):Uint8Array.prototype.lastIndexOf.call(Xe,He,Ye):se(Xe,[He],Ye,ze,Je);throw new TypeError('val must be string, number or Buffer')}function se(Xe,He,Ye,ze,Je){function Ze(st,nt){return 1==qe?st[nt]:st.readUInt16BE(nt*qe)}var qe=1,We=Xe.length,Qe=He.length;if(void 0!==ze&&(ze=(ze+'').toLowerCase(),'ucs2'===ze||'ucs-2'===ze||'utf16le'===ze||'utf-16le'===ze)){if(2>Xe.length||2>He.length)return-1;qe=2,We/=2,Qe/=2,Ye/=2}var $e;if(Je){var at=-1;for($e=Ye;$e<We;$e++)if(Ze(Xe,$e)!==Ze(He,-1==at?0:$e-at))-1!=at&&($e-=$e-at),at=-1;else if(-1==at&&(at=$e),$e-at+1===Qe)return at*qe}else for(Ye+Qe>We&&(Ye=We-Qe),$e=Ye;0<=$e;$e--){for(var lt=!0,ut=0;ut<Qe;ut++)if(Ze(Xe,$e+ut)!==Ze(He,ut)){lt=!1;break}if(lt)return $e}return-1}function ne(Xe,He,Ye,ze){Ye=+Ye||0;var Je=Xe.length-Ye;ze?(ze=+ze,ze>Je&&(ze=Je)):ze=Je;var Ze=He.length;if(0!=Ze%2)throw new TypeError('Invalid hex string');ze>Ze/2&&(ze=Ze/2);for(var qe=0,We;qe<ze;++qe){if(We=parseInt(He.substr(2*qe,2),16),isNaN(We))return qe;Xe[Ye+qe]=We}return qe}function oe(Xe,He,Ye,ze){return Ke(Pe(He,Xe.length-Ye),Xe,Ye,ze)}function _e(Xe,He,Ye,ze){return Ke(Me(He),Xe,Ye,ze)}function pe(Xe,He,Ye,ze){return _e(Xe,He,Ye,ze)}function ce(Xe,He,Ye,ze){return Ke(De(He),Xe,Ye,ze)}function de(Xe,He,Ye,ze){return Ke(ye(He,Xe.length-Ye),Xe,Ye,ze)}function ge(Xe,He,Ye){return 0===He&&Ye===Xe.length?we.fromByteArray(Xe):we.fromByteArray(Xe.slice(He,Ye))}function Le(Xe,He,Ye){Ye=_Mathmin(Xe.length,Ye);for(var ze=[],Je=He;Je<Ye;){var Ze=Xe[Je],qe=null,We=239<Ze?4:223<Ze?3:191<Ze?2:1;if(Je+We<=Ye){var Qe,$e,at,lt;1==We?128>Ze&&(qe=Ze):2==We?(Qe=Xe[Je+1],128==(192&Qe)&&(lt=(31&Ze)<<6|63&Qe,127<lt&&(qe=lt))):3==We?(Qe=Xe[Je+1],$e=Xe[Je+2],128==(192&Qe)&&128==(192&$e)&&(lt=(15&Ze)<<12|(63&Qe)<<6|63&$e,2047<lt&&(55296>lt||57343<lt)&&(qe=lt))):4==We?(Qe=Xe[Je+1],$e=Xe[Je+2],at=Xe[Je+3],128==(192&Qe)&&128==(192&$e)&&128==(192&at)&&(lt=(15&Ze)<<18|(63&Qe)<<12|(63&$e)<<6|63&at,65535<lt&&1114112>lt&&(qe=lt))):void 0}null===qe?(qe=65533,We=1):65535<qe&&(qe-=65536,ze.push(55296|1023&qe>>>10),qe=56320|1023&qe),ze.push(qe),Je+=We}return Ae(ze)}function Ae(Xe){var He=Xe.length;if(He<=Fe)return _StringfromCharCode.apply(String,Xe);for(var Ye='',ze=0;ze<He;)Ye+=_StringfromCharCode.apply(String,Xe.slice(ze,ze+=Fe));return Ye}function he(Xe,He,Ye){var ze='';Ye=_Mathmin(Xe.length,Ye);for(var Je=He;Je<Ye;++Je)ze+=_StringfromCharCode(127&Xe[Je]);return ze}function Te(Xe,He,Ye){var ze='';Ye=_Mathmin(Xe.length,Ye);for(var Je=He;Je<Ye;++Je)ze+=_StringfromCharCode(Xe[Je]);return ze}function xe(Xe,He,Ye){var ze=Xe.length;(!He||0>He)&&(He=0),(!Ye||0>Ye||Ye>ze)&&(Ye=ze);for(var Je='',Ze=He;Ze<Ye;++Ze)Je+=Ce(Xe[Ze]);return Je}function Oe(Xe,He,Ye){for(var ze=Xe.slice(He,Ye),Je='',Ze=0;Ze<ze.length;Ze+=2)Je+=_StringfromCharCode(ze[Ze]+256*ze[Ze+1]);return Je}function Ue(Xe,He,Ye){if(0!=Xe%1||0>Xe)throw new RangeError('offset is not uint');if(Xe+He>Ye)throw new RangeError('Trying to access beyond buffer length')}function Ee(Xe,He,Ye,ze,Je,Ze){if(!M.isBuffer(Xe))throw new TypeError('"buffer" argument must be a Buffer instance');if(He>Je||He<Ze)throw new RangeError('"value" argument is out of bounds');if(Ye+ze>Xe.length)throw new RangeError('Index out of range')}function ve(Xe,He,Ye,ze){0>He&&(He=65535+He+1);for(var Je=0,Ze=_Mathmin(Xe.length-Ye,2);Je<Ze;++Je)Xe[Ye+Je]=(He&255<<8*(ze?Je:1-Je))>>>8*(ze?Je:1-Je)}function be(Xe,He,Ye,ze){0>He&&(He=4294967295+He+1);for(var Je=0,Ze=_Mathmin(Xe.length-Ye,4);Je<Ze;++Je)Xe[Ye+Je]=255&He>>>8*(ze?Je:3-Je)}function ke(Xe,He,Ye,ze){if(Ye+ze>Xe.length)throw new RangeError('Index out of range');if(0>Ye)throw new RangeError('Index out of range')}function Re(Xe,He,Ye,ze,Je){return Je||ke(Xe,He,Ye,4,3.4028234663852886e38,-3.4028234663852886e38),Ge.write(Xe,He,Ye,ze,23,4),Ye+4}function Se(Xe,He,Ye,ze,Je){return Je||ke(Xe,He,Ye,8,1.7976931348623157e308,-1.7976931348623157e308),Ge.write(Xe,He,Ye,ze,52,8),Ye+8}function Ie(Xe){if(Xe=Ne(Xe).replace(je,''),2>Xe.length)return'';for(;0!=Xe.length%4;)Xe+='=';return Xe}function Ne(Xe){return Xe.trim?Xe.trim():Xe.replace(/^\s+|\s+$/g,'')}function Ce(Xe){return 16>Xe?'0'+Xe.toString(16):Xe.toString(16)}function Pe(Xe,He){He=He||Infinity;for(var ze=Xe.length,Je=null,Ze=[],qe=0,Ye;qe<ze;++qe){if(Ye=Xe.charCodeAt(qe),55295<Ye&&57344>Ye){if(!Je){if(56319<Ye){-1<(He-=3)&&Ze.push(239,191,189);continue}else if(qe+1===ze){-1<(He-=3)&&Ze.push(239,191,189);continue}Je=Ye;continue}if(56320>Ye){-1<(He-=3)&&Ze.push(239,191,189),Je=Ye;continue}Ye=(Je-55296<<10|Ye-56320)+65536}else Je&&-1<(He-=3)&&Ze.push(239,191,189);if(Je=null,128>Ye){if(0>(He-=1))break;Ze.push(Ye)}else if(2048>Ye){if(0>(He-=2))break;Ze.push(192|Ye>>6,128|63&Ye)}else if(65536>Ye){if(0>(He-=3))break;Ze.push(224|Ye>>12,128|63&Ye>>6,128|63&Ye)}else if(1114112>Ye){if(0>(He-=4))break;Ze.push(240|Ye>>18,128|63&Ye>>12,128|63&Ye>>6,128|63&Ye)}else throw new Error('Invalid code point')}return Ze}function Me(Xe){for(var He=[],Ye=0;Ye<Xe.length;++Ye)He.push(255&Xe.charCodeAt(Ye));return He}function ye(Xe,He){for(var Ze=[],qe=0,Ye,ze,Je;qe<Xe.length&&!(0>(He-=2));++qe)Ye=Xe.charCodeAt(qe),ze=Ye>>8,Je=Ye%256,Ze.push(Je),Ze.push(ze);return Ze}function De(Xe){return we.toByteArray(Ie(Xe))}function Ke(Xe,He,Ye,ze){for(var Je=0;Je<ze&&!(Je+Ye>=He.length||Je>=Xe.length);++Je)He[Je+Ye]=Xe[Je];return Je}function Be(Xe){return Xe!==Xe}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var we=U(39),Ge=U(47),Ve=U(48);O.Buffer=M,O.SlowBuffer=function(Xe){return+Xe!=Xe&&(Xe=0),M.alloc(+Xe)},O.INSPECT_MAX_BYTES=50,M.TYPED_ARRAY_SUPPORT=void 0===E.TYPED_ARRAY_SUPPORT?function(){try{var Xe=new Uint8Array(1);return Xe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Xe.foo()&&'function'==typeof Xe.subarray&&0===Xe.subarray(1,1).byteLength}catch(He){return!1}}():E.TYPED_ARRAY_SUPPORT,O.kMaxLength=N(),M.poolSize=8192,M._augment=function(Xe){return Xe.__proto__=M.prototype,Xe},M.from=function(Xe,He,Ye){return K(null,Xe,He,Ye)},M.TYPED_ARRAY_SUPPORT&&(M.prototype.__proto__=Uint8Array.prototype,M.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&M[Symbol.species]===M&&Object.defineProperty(M,Symbol.species,{value:null,configurable:!0})),M.alloc=function(Xe,He,Ye){return F(null,Xe,He,Ye)},M.allocUnsafe=function(Xe){return H(null,Xe)},M.allocUnsafeSlow=function(Xe){return H(null,Xe)},M.isBuffer=function(He){return!!(null!=He&&He._isBuffer)},M.compare=function(He,Ye){if(!M.isBuffer(He)||!M.isBuffer(Ye))throw new TypeError('Arguments must be Buffers');if(He===Ye)return 0;for(var ze=He.length,Je=Ye.length,Ze=0,qe=_Mathmin(ze,Je);Ze<qe;++Ze)if(He[Ze]!==Ye[Ze]){ze=He[Ze],Je=Ye[Ze];break}return ze<Je?-1:Je<ze?1:0},M.isEncoding=function(He){switch((He+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},M.concat=function(He,Ye){if(!Ve(He))throw new TypeError('"list" argument must be an Array of Buffers');if(0===He.length)return M.alloc(0);var ze;if(void 0===Ye)for(Ye=0,ze=0;ze<He.length;++ze)Ye+=He[ze].length;var Je=M.allocUnsafe(Ye),Ze=0;for(ze=0;ze<He.length;++ze){var qe=He[ze];if(!M.isBuffer(qe))throw new TypeError('"list" argument must be an Array of Buffers');qe.copy(Je,Ze),Ze+=qe.length}return Je},M.byteLength=ee,M.prototype._isBuffer=!0,M.prototype.swap16=function(){var He=this.length;if(0!=He%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var Ye=0;Ye<He;Ye+=2)ae(this,Ye,Ye+1);return this},M.prototype.swap32=function(){var He=this.length;if(0!=He%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var Ye=0;Ye<He;Ye+=4)ae(this,Ye,Ye+3),ae(this,Ye+1,Ye+2);return this},M.prototype.swap64=function(){var He=this.length;if(0!=He%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var Ye=0;Ye<He;Ye+=8)ae(this,Ye,Ye+7),ae(this,Ye+1,Ye+6),ae(this,Ye+2,Ye+5),ae(this,Ye+3,Ye+4);return this},M.prototype.toString=function(){var He=0|this.length;return 0==He?'':0===arguments.length?Le(this,0,He):te.apply(this,arguments)},M.prototype.equals=function(He){if(!M.isBuffer(He))throw new TypeError('Argument must be a Buffer');return this===He||0===M.compare(this,He)},M.prototype.inspect=function(){var He='',Ye=O.INSPECT_MAX_BYTES;return 0<this.length&&(He=this.toString('hex',0,Ye).match(/.{2}/g).join(' '),this.length>Ye&&(He+=' ... ')),'<Buffer '+He+'>'},M.prototype.compare=function(He,Ye,ze,Je,Ze){if(!M.isBuffer(He))throw new TypeError('Argument must be a Buffer');if(void 0===Ye&&(Ye=0),void 0===ze&&(ze=He?He.length:0),void 0===Je&&(Je=0),void 0===Ze&&(Ze=this.length),0>Ye||ze>He.length||0>Je||Ze>this.length)throw new RangeError('out of range index');if(Je>=Ze&&Ye>=ze)return 0;if(Je>=Ze)return-1;if(Ye>=ze)return 1;if(Ye>>>=0,ze>>>=0,Je>>>=0,Ze>>>=0,this===He)return 0;for(var qe=Ze-Je,We=ze-Ye,Qe=_Mathmin(qe,We),$e=this.slice(Je,Ze),at=He.slice(Ye,ze),lt=0;lt<Qe;++lt)if($e[lt]!==at[lt]){qe=$e[lt],We=at[lt];break}return qe<We?-1:We<qe?1:0},M.prototype.includes=function(He,Ye,ze){return-1!==this.indexOf(He,Ye,ze)},M.prototype.indexOf=function(He,Ye,ze){return ue(this,He,Ye,ze,!0)},M.prototype.lastIndexOf=function(He,Ye,ze){return ue(this,He,Ye,ze,!1)},M.prototype.write=function(He,Ye,ze,Je){if(void 0===Ye)Je='utf8',ze=this.length,Ye=0;else if(void 0===ze&&'string'==typeof Ye)Je=Ye,ze=this.length,Ye=0;else if(isFinite(Ye))Ye|=0,isFinite(ze)?(ze|=0,void 0===Je&&(Je='utf8')):(Je=ze,ze=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var Ze=this.length-Ye;if((void 0===ze||ze>Ze)&&(ze=Ze),0<He.length&&(0>ze||0>Ye)||Ye>this.length)throw new RangeError('Attempt to write outside buffer bounds');Je||(Je='utf8');for(var qe=!1;;)switch(Je){case'hex':return ne(this,He,Ye,ze);case'utf8':case'utf-8':return oe(this,He,Ye,ze);case'ascii':return _e(this,He,Ye,ze);case'latin1':case'binary':return pe(this,He,Ye,ze);case'base64':return ce(this,He,Ye,ze);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return de(this,He,Ye,ze);default:if(qe)throw new TypeError('Unknown encoding: '+Je);Je=(''+Je).toLowerCase(),qe=!0;}},M.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Fe=4096;M.prototype.slice=function(He,Ye){var ze=this.length;He=~~He,Ye=void 0===Ye?ze:~~Ye,0>He?(He+=ze,0>He&&(He=0)):He>ze&&(He=ze),0>Ye?(Ye+=ze,0>Ye&&(Ye=0)):Ye>ze&&(Ye=ze),Ye<He&&(Ye=He);var Je;if(M.TYPED_ARRAY_SUPPORT)Je=this.subarray(He,Ye),Je.__proto__=M.prototype;else{var Ze=Ye-He;Je=new M(Ze,void 0);for(var qe=0;qe<Ze;++qe)Je[qe]=this[qe+He]}return Je},M.prototype.readUIntLE=function(He,Ye,ze){He|=0,Ye|=0,ze||Ue(He,Ye,this.length);for(var Je=this[He],Ze=1,qe=0;++qe<Ye&&(Ze*=256);)Je+=this[He+qe]*Ze;return Je},M.prototype.readUIntBE=function(He,Ye,ze){He|=0,Ye|=0,ze||Ue(He,Ye,this.length);for(var Je=this[He+--Ye],Ze=1;0<Ye&&(Ze*=256);)Je+=this[He+--Ye]*Ze;return Je},M.prototype.readUInt8=function(He,Ye){return Ye||Ue(He,1,this.length),this[He]},M.prototype.readUInt16LE=function(He,Ye){return Ye||Ue(He,2,this.length),this[He]|this[He+1]<<8},M.prototype.readUInt16BE=function(He,Ye){return Ye||Ue(He,2,this.length),this[He]<<8|this[He+1]},M.prototype.readUInt32LE=function(He,Ye){return Ye||Ue(He,4,this.length),(this[He]|this[He+1]<<8|this[He+2]<<16)+16777216*this[He+3]},M.prototype.readUInt32BE=function(He,Ye){return Ye||Ue(He,4,this.length),16777216*this[He]+(this[He+1]<<16|this[He+2]<<8|this[He+3])},M.prototype.readIntLE=function(He,Ye,ze){He|=0,Ye|=0,ze||Ue(He,Ye,this.length);for(var Je=this[He],Ze=1,qe=0;++qe<Ye&&(Ze*=256);)Je+=this[He+qe]*Ze;return Ze*=128,Je>=Ze&&(Je-=_Mathpow(2,8*Ye)),Je},M.prototype.readIntBE=function(He,Ye,ze){He|=0,Ye|=0,ze||Ue(He,Ye,this.length);for(var Je=Ye,Ze=1,qe=this[He+--Je];0<Je&&(Ze*=256);)qe+=this[He+--Je]*Ze;return Ze*=128,qe>=Ze&&(qe-=_Mathpow(2,8*Ye)),qe},M.prototype.readInt8=function(He,Ye){return Ye||Ue(He,1,this.length),128&this[He]?-1*(255-this[He]+1):this[He]},M.prototype.readInt16LE=function(He,Ye){Ye||Ue(He,2,this.length);var ze=this[He]|this[He+1]<<8;return 32768&ze?4294901760|ze:ze},M.prototype.readInt16BE=function(He,Ye){Ye||Ue(He,2,this.length);var ze=this[He+1]|this[He]<<8;return 32768&ze?4294901760|ze:ze},M.prototype.readInt32LE=function(He,Ye){return Ye||Ue(He,4,this.length),this[He]|this[He+1]<<8|this[He+2]<<16|this[He+3]<<24},M.prototype.readInt32BE=function(He,Ye){return Ye||Ue(He,4,this.length),this[He]<<24|this[He+1]<<16|this[He+2]<<8|this[He+3]},M.prototype.readFloatLE=function(He,Ye){return Ye||Ue(He,4,this.length),Ge.read(this,He,!0,23,4)},M.prototype.readFloatBE=function(He,Ye){return Ye||Ue(He,4,this.length),Ge.read(this,He,!1,23,4)},M.prototype.readDoubleLE=function(He,Ye){return Ye||Ue(He,8,this.length),Ge.read(this,He,!0,52,8)},M.prototype.readDoubleBE=function(He,Ye){return Ye||Ue(He,8,this.length),Ge.read(this,He,!1,52,8)},M.prototype.writeUIntLE=function(He,Ye,ze,Je){if(He=+He,Ye|=0,ze|=0,!Je){var Ze=_Mathpow(2,8*ze)-1;Ee(this,He,Ye,ze,Ze,0)}var qe=1,We=0;for(this[Ye]=255&He;++We<ze&&(qe*=256);)this[Ye+We]=255&He/qe;return Ye+ze},M.prototype.writeUIntBE=function(He,Ye,ze,Je){if(He=+He,Ye|=0,ze|=0,!Je){var Ze=_Mathpow(2,8*ze)-1;Ee(this,He,Ye,ze,Ze,0)}var qe=ze-1,We=1;for(this[Ye+qe]=255&He;0<=--qe&&(We*=256);)this[Ye+qe]=255&He/We;return Ye+ze},M.prototype.writeUInt8=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,1,255,0),M.TYPED_ARRAY_SUPPORT||(He=_Mathfloor(He)),this[Ye]=255&He,Ye+1},M.prototype.writeUInt16LE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,2,65535,0),M.TYPED_ARRAY_SUPPORT?(this[Ye]=255&He,this[Ye+1]=He>>>8):ve(this,He,Ye,!0),Ye+2},M.prototype.writeUInt16BE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,2,65535,0),M.TYPED_ARRAY_SUPPORT?(this[Ye]=He>>>8,this[Ye+1]=255&He):ve(this,He,Ye,!1),Ye+2},M.prototype.writeUInt32LE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,4,4294967295,0),M.TYPED_ARRAY_SUPPORT?(this[Ye+3]=He>>>24,this[Ye+2]=He>>>16,this[Ye+1]=He>>>8,this[Ye]=255&He):be(this,He,Ye,!0),Ye+4},M.prototype.writeUInt32BE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,4,4294967295,0),M.TYPED_ARRAY_SUPPORT?(this[Ye]=He>>>24,this[Ye+1]=He>>>16,this[Ye+2]=He>>>8,this[Ye+3]=255&He):be(this,He,Ye,!1),Ye+4},M.prototype.writeIntLE=function(He,Ye,ze,Je){if(He=+He,Ye|=0,!Je){var Ze=_Mathpow(2,8*ze-1);Ee(this,He,Ye,ze,Ze-1,-Ze)}var qe=0,We=1,Qe=0;for(this[Ye]=255&He;++qe<ze&&(We*=256);)0>He&&0==Qe&&0!==this[Ye+qe-1]&&(Qe=1),this[Ye+qe]=255&(He/We>>0)-Qe;return Ye+ze},M.prototype.writeIntBE=function(He,Ye,ze,Je){if(He=+He,Ye|=0,!Je){var Ze=_Mathpow(2,8*ze-1);Ee(this,He,Ye,ze,Ze-1,-Ze)}var qe=ze-1,We=1,Qe=0;for(this[Ye+qe]=255&He;0<=--qe&&(We*=256);)0>He&&0==Qe&&0!==this[Ye+qe+1]&&(Qe=1),this[Ye+qe]=255&(He/We>>0)-Qe;return Ye+ze},M.prototype.writeInt8=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,1,127,-128),M.TYPED_ARRAY_SUPPORT||(He=_Mathfloor(He)),0>He&&(He=255+He+1),this[Ye]=255&He,Ye+1},M.prototype.writeInt16LE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,2,32767,-32768),M.TYPED_ARRAY_SUPPORT?(this[Ye]=255&He,this[Ye+1]=He>>>8):ve(this,He,Ye,!0),Ye+2},M.prototype.writeInt16BE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,2,32767,-32768),M.TYPED_ARRAY_SUPPORT?(this[Ye]=He>>>8,this[Ye+1]=255&He):ve(this,He,Ye,!1),Ye+2},M.prototype.writeInt32LE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,4,2147483647,-2147483648),M.TYPED_ARRAY_SUPPORT?(this[Ye]=255&He,this[Ye+1]=He>>>8,this[Ye+2]=He>>>16,this[Ye+3]=He>>>24):be(this,He,Ye,!0),Ye+4},M.prototype.writeInt32BE=function(He,Ye,ze){return He=+He,Ye|=0,ze||Ee(this,He,Ye,4,2147483647,-2147483648),0>He&&(He=4294967295+He+1),M.TYPED_ARRAY_SUPPORT?(this[Ye]=He>>>24,this[Ye+1]=He>>>16,this[Ye+2]=He>>>8,this[Ye+3]=255&He):be(this,He,Ye,!1),Ye+4},M.prototype.writeFloatLE=function(He,Ye,ze){return Re(this,He,Ye,!0,ze)},M.prototype.writeFloatBE=function(He,Ye,ze){return Re(this,He,Ye,!1,ze)},M.prototype.writeDoubleLE=function(He,Ye,ze){return Se(this,He,Ye,!0,ze)},M.prototype.writeDoubleBE=function(He,Ye,ze){return Se(this,He,Ye,!1,ze)},M.prototype.copy=function(He,Ye,ze,Je){if(ze||(ze=0),Je||0===Je||(Je=this.length),Ye>=He.length&&(Ye=He.length),Ye||(Ye=0),0<Je&&Je<ze&&(Je=ze),Je===ze)return 0;if(0===He.length||0===this.length)return 0;if(0>Ye)throw new RangeError('targetStart out of bounds');if(0>ze||ze>=this.length)throw new RangeError('sourceStart out of bounds');if(0>Je)throw new RangeError('sourceEnd out of bounds');Je>this.length&&(Je=this.length),He.length-Ye<Je-ze&&(Je=He.length-Ye+ze);var Ze=Je-ze,qe;if(this===He&&ze<Ye&&Ye<Je)for(qe=Ze-1;0<=qe;--qe)He[qe+Ye]=this[qe+ze];else if(1e3>Ze||!M.TYPED_ARRAY_SUPPORT)for(qe=0;qe<Ze;++qe)He[qe+Ye]=this[qe+ze];else Uint8Array.prototype.set.call(He,this.subarray(ze,ze+Ze),Ye);return Ze},M.prototype.fill=function(He,Ye,ze,Je){if('string'==typeof He){if('string'==typeof Ye?(Je=Ye,Ye=0,ze=this.length):'string'==typeof ze&&(Je=ze,ze=this.length),1===He.length){var Ze=He.charCodeAt(0);256>Ze&&(He=Ze)}if(void 0!==Je&&'string'!=typeof Je)throw new TypeError('encoding must be a string');if('string'==typeof Je&&!M.isEncoding(Je))throw new TypeError('Unknown encoding: '+Je)}else'number'==typeof He&&(He&=255);if(0>Ye||this.length<Ye||this.length<ze)throw new RangeError('Out of range index');if(ze<=Ye)return this;Ye>>>=0,ze=void 0===ze?this.length:ze>>>0,He||(He=0);var qe;if('number'==typeof He)for(qe=Ye;qe<ze;++qe)this[qe]=He;else{var We=M.isBuffer(He)?He:Pe(new M(He,Je).toString()),Qe=We.length;for(qe=0;qe<ze-Ye;++qe)this[qe+Ye]=We[qe%Qe]}return this};var je=/[^+\/0-9A-Za-z-_]/g}).call(O,U(21))},function(T){function U(E){throw new Error('Cannot find module \''+E+'\'.')}U.keys=function(){return[]},U.resolve=U,T.exports=U,U.id=41},function(T,O,U){'use strict';(function(E,I){const N=U(2),P=U(5),W=['stop','restart','collect','count','step','setpause','setstepmul','isrunning'].map((Ee)=>N.to_luastring(Ee)),ee=function(Ee,ve,be,ke){return P.luaL_checkany(Ee,1),P.luaL_getmetafield(Ee,1,ve)===N.LUA_TNIL?(N.lua_pushcfunction(Ee,ke),N.lua_pushvalue(Ee,1),be?N.lua_pushinteger(Ee,0):N.lua_pushnil(Ee)):(N.lua_pushvalue(Ee,1),N.lua_call(Ee,1,3)),3},te=function(Ee){return P.luaL_checktype(Ee,1,N.LUA_TTABLE),N.lua_settop(Ee,2),N.lua_next(Ee,1)?2:(N.lua_pushnil(Ee),1)},ue=function(Ee){let ve=P.luaL_checkinteger(Ee,2)+1;return N.lua_pushinteger(Ee,ve),N.lua_geti(Ee,1,ve)===N.LUA_TNIL?1:2},ne=function(Ee,ve){let be=/^[\t\v\f \n\r]*([\+\-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(N.to_jsstring(Ee));if(!be)return null;let ke='-'===be[1],Re=be[2],Se=0;for(let Ie=0,Ne;Ie<Re.length;Ie++){if(Ne=/\d/.test(Re[Ie])?Re.charCodeAt(Ie)-'0'.charCodeAt(0):Re[Ie].toUpperCase().charCodeAt(0)-'A'.charCodeAt(0)+10,Ne>=ve)return null;Se=(0|Se*ve)+Ne}return 0|(ke?-Se:Se)},_e=function(Ee){let ve=P.luaL_optinteger(Ee,2,1);return N.lua_settop(Ee,1),N.lua_type(Ee,1)===N.LUA_TSTRING&&0<ve&&(P.luaL_where(Ee,ve),N.lua_pushvalue(Ee,1),N.lua_concat(Ee,2)),N.lua_error(Ee)},de=function(Ee,ve,be){return ve!==N.LUA_OK&&ve!==N.LUA_YIELD?(N.lua_pushboolean(Ee,0),N.lua_pushvalue(Ee,-2),2):N.lua_gettop(Ee)-be},Ae=function(Ee,ve,be){return ve===N.LUA_OK?(0!==be&&(N.lua_pushvalue(Ee,be),!N.lua_setupvalue(Ee,-2,1)&&N.lua_pop(Ee,1)),1):(N.lua_pushnil(Ee),N.lua_insert(Ee,-2),2)},he=5,Te=function(Ee){return(P.luaL_checkstack(Ee,2,N.to_luastring('too many nested functions',!0)),N.lua_pushvalue(Ee,1),N.lua_call(Ee,0,1),N.lua_isnil(Ee,-1))?(N.lua_pop(Ee,1),null):(N.lua_isstring(Ee,-1)||P.luaL_error(Ee,N.to_luastring('reader function must return a string',!0)),N.lua_replace(Ee,he),N.lua_tostring(Ee,he))},Oe={assert:function(Ee){return N.lua_toboolean(Ee,1)?N.lua_gettop(Ee):(P.luaL_checkany(Ee,1),N.lua_remove(Ee,1),N.lua_pushliteral(Ee,'assertion failed!'),N.lua_settop(Ee,1),_e(Ee))},collectgarbage:function(Ee){P.luaL_checkoption(Ee,1,N.to_luastring('collect'),W),P.luaL_optinteger(Ee,2,0),P.luaL_error(Ee,N.to_luastring('lua_gc not implemented'))},error:_e,getmetatable:function(Ee){return(P.luaL_checkany(Ee,1),!N.lua_getmetatable(Ee,1))?(N.lua_pushnil(Ee),1):(P.luaL_getmetafield(Ee,1,N.to_luastring('__metatable',!0)),1)},ipairs:function(Ee){return P.luaL_checkany(Ee,1),N.lua_pushcfunction(Ee,ue),N.lua_pushvalue(Ee,1),N.lua_pushinteger(Ee,0),3},load:function(Ee){let ve=N.lua_tostring(Ee,1),be=P.luaL_optstring(Ee,3,N.to_luastring('bt',!0)),ke=N.lua_isnone(Ee,4)?0:4,Re;if(null!==ve){let Se=P.luaL_optstring(Ee,2,ve);Re=P.luaL_loadbufferx(Ee,ve,ve.length,Se,be)}else{let Se=P.luaL_optstring(Ee,2,N.to_luastring('=(load)',!0));P.luaL_checktype(Ee,1,N.LUA_TFUNCTION),N.lua_settop(Ee,he),Re=N.lua_load(Ee,Te,null,Se,be)}return Ae(Ee,Re,ke)},next:te,pairs:function(Ee){return ee(Ee,N.to_luastring('__pairs',!0),0,te)},pcall:function(Ee){P.luaL_checkany(Ee,1),N.lua_pushboolean(Ee,1),N.lua_insert(Ee,1);let ve=N.lua_pcallk(Ee,N.lua_gettop(Ee)-2,N.LUA_MULTRET,0,0,de);return de(Ee,ve,0)},print:function(Ee){let ve=N.lua_gettop(Ee),be=[];N.lua_getglobal(Ee,N.to_luastring('tostring',!0));for(let ke=1;ke<=ve;ke++){N.lua_pushvalue(Ee,-1),N.lua_pushvalue(Ee,ke),N.lua_call(Ee,1,1);let Re=N.lua_tolstring(Ee,-1);if(null===Re)return P.luaL_error(Ee,N.to_luastring('\'tostring\' must return a string to \'print\'',!0));1<ke&&be.push('\t'.charCodeAt(0)),be=be.concat(Re),N.lua_pop(Ee,1)}return E.stdout?(be.push('\n'.charCodeAt(0)),E.stdout.write(I.from(be))):console.log(N.to_jsstring(be)),0},rawequal:function(Ee){return P.luaL_checkany(Ee,1),P.luaL_checkany(Ee,2),N.lua_pushboolean(Ee,N.lua_rawequal(Ee,1,2)),1},rawget:function(Ee){return P.luaL_checktype(Ee,1,N.LUA_TTABLE),P.luaL_checkany(Ee,2),N.lua_settop(Ee,2),N.lua_rawget(Ee,1),1},rawlen:function(Ee){let ve=N.lua_type(Ee,1);return P.luaL_argcheck(Ee,ve===N.LUA_TTABLE||ve===N.LUA_TSTRING,1,N.to_luastring('table or string expected',!0)),N.lua_pushinteger(Ee,N.lua_rawlen(Ee,1)),1},rawset:function(Ee){return P.luaL_checktype(Ee,1,N.LUA_TTABLE),P.luaL_checkany(Ee,2),P.luaL_checkany(Ee,3),N.lua_settop(Ee,3),N.lua_rawset(Ee,1),1},select:function(Ee){let ve=N.lua_gettop(Ee);if(N.lua_type(Ee,1)===N.LUA_TSTRING&&N.lua_tostring(Ee,1)[0]==='#'.charCodeAt(0))return N.lua_pushinteger(Ee,ve-1),1;let be=P.luaL_checkinteger(Ee,1);return 0>be?be=ve+be:be>ve&&(be=ve),P.luaL_argcheck(Ee,1<=be,1,N.to_luastring('index out of range',!0)),ve-be},setmetatable:function(Ee){let ve=N.lua_type(Ee,2);return(P.luaL_checktype(Ee,1,N.LUA_TTABLE),P.luaL_argcheck(Ee,ve===N.LUA_TNIL||ve===N.LUA_TTABLE,2,N.to_luastring('nil or table expected',!0)),P.luaL_getmetafield(Ee,1,N.to_luastring('__metatable',!0))!==N.LUA_TNIL)?P.luaL_error(Ee,N.to_luastring('cannot change a protected metatable',!0)):(N.lua_settop(Ee,2),N.lua_setmetatable(Ee,1),1)},tonumber:function(Ee){if(0>=N.lua_type(Ee,2)){if(P.luaL_checkany(Ee,1),N.lua_type(Ee,1)===N.LUA_TNUMBER)return N.lua_settop(Ee,1),1;let ve=N.lua_tostring(Ee,1);if(null!==ve&&N.lua_stringtonumber(Ee,ve)===ve.length+1)return 1}else{let ve=P.luaL_checkinteger(Ee,2);P.luaL_checktype(Ee,1,N.LUA_TSTRING);let be=N.lua_tostring(Ee,1);P.luaL_argcheck(Ee,2<=ve&&36>=ve,2,N.to_luastring('base out of range',!0));let ke=ne(be,ve);if(null!==ke)return N.lua_pushinteger(Ee,ke),1}return N.lua_pushnil(Ee),1},tostring:function(Ee){return P.luaL_checkany(Ee,1),P.luaL_tolstring(Ee,1),1},type:function(Ee){let ve=N.lua_type(Ee,1);return P.luaL_argcheck(Ee,ve!==N.LUA_TNONE,1,N.to_luastring('value expected',!0)),N.lua_pushstring(Ee,N.lua_typename(Ee,ve)),1},xpcall:function(Ee){let ve=N.lua_gettop(Ee);P.luaL_checktype(Ee,2,N.LUA_TFUNCTION),N.lua_pushboolean(Ee,1),N.lua_pushvalue(Ee,1),N.lua_rotate(Ee,3,2);let be=N.lua_pcallk(Ee,ve-2,N.LUA_MULTRET,2,2,de);return de(Ee,be,2)}};T.exports.luaopen_base=function(Ee){return N.lua_pushglobaltable(Ee),P.luaL_setfuncs(Ee,Oe,0),N.lua_pushvalue(Ee,-1),N.lua_setfield(Ee,-2,N.to_luastring('_G',!0)),N.lua_pushliteral(Ee,N.LUA_VERSION),N.lua_setfield(Ee,-2,N.to_luastring('_VERSION',!0)),1}}).call(O,U(19),U(40).Buffer)},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(27),P=U(3),M=U(14),K=U(31),V=U(9),F=U(16),H=I.CT,Y=M.OpCodesI,J=P.TValue,W=-1,Q={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},$={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},ee=function(bt){return bt.t!==bt.f},te=function(bt,kt){let Rt=K.expkind;if(ee(bt))return!1;switch(bt.k){case Rt.VKINT:return!kt||new J(H.LUA_TNUMINT,bt.u.ival);case Rt.VKFLT:return!kt||new J(H.LUA_TNUMFLT,bt.u.nval);default:return!1;}},ae=function(bt,kt,Rt){let It=kt+Rt-1,St;if(bt.pc>bt.lasttarget&&(St=bt.f.code[bt.pc-1],St.opcode===Y.OP_LOADNIL)){let Nt=St.A,Ct=Nt+St.B;if(Nt<=kt&&kt<=Ct+1||kt<=Nt&&Nt<=It+1)return Nt<kt&&(kt=Nt),Ct>It&&(It=Ct),M.SETARG_A(St,kt),void M.SETARG_B(St,It-kt)}ke(bt,Y.OP_LOADNIL,kt,Rt-1,0)},ue=function(bt,kt){return bt.f.code[kt.u.info]},se=function(bt,kt){let Rt=bt.f.code[kt].sBx;return Rt===W?W:kt+1+Rt},ne=function(bt,kt,Rt){let St=bt.f.code[kt],It=Rt-(kt+1);E(Rt!==W),_Mathabs(It)>M.MAXARG_sBx&&N.luaX_syntaxerror(bt.ls,I.to_luastring('control structure too long',!0)),M.SETARG_sBx(St,It)},oe=function(bt,kt,Rt){if(Rt===W)return kt;if(kt===W)kt=Rt;else{let St=kt,It=se(bt,St);for(;It!==W;)St=It,It=se(bt,St);ne(bt,St,Rt)}return kt},_e=function(bt){let kt=bt.jpc;bt.jpc=W;let Rt=Se(bt,Y.OP_JMP,0,W);return Rt=oe(bt,Rt,kt),Rt},de=function(bt,kt,Rt,St,It){return ke(bt,kt,Rt,St,It),_e(bt)},ge=function(bt){return bt.lasttarget=bt.pc,bt.pc},Le=function(bt,kt){return 1<=kt&&M.testTMode(bt.f.code[kt-1].opcode)?kt-1:kt},Ae=function(bt,kt){return bt.f.code[Le(bt,kt)]},he=function(bt,kt,Rt){let St=Le(bt,kt),It=bt.f.code[St];return It.opcode===Y.OP_TESTSET&&(Rt!==M.NO_REG&&Rt!==It.B?M.SETARG_A(It,Rt):bt.f.code[St]=M.CREATE_ABC(Y.OP_TEST,It.B,0,It.C),!0)},Te=function(bt,kt){for(;kt!==W;kt=se(bt,kt))he(bt,kt,M.NO_REG)},xe=function(bt,kt,Rt,St,It){for(;kt!==W;){let Nt=se(bt,kt);he(bt,kt,St)?ne(bt,kt,Rt):ne(bt,kt,It),kt=Nt}},Oe=function(bt){xe(bt,bt.jpc,bt.pc,M.NO_REG,bt.pc),bt.jpc=W},Ue=function(bt,kt){ge(bt),bt.jpc=oe(bt,bt.jpc,kt)},Ee=function(bt,kt,Rt){Rt===bt.pc?Ue(bt,kt):(E(Rt<bt.pc),xe(bt,kt,Rt,M.NO_REG,Rt))},be=function(bt,kt){let Rt=bt.f;return Oe(bt),Rt.code[bt.pc]=kt,Rt.lineinfo[bt.pc]=bt.ls.lastline,bt.pc++},ke=function(bt,kt,Rt,St,It){return E(M.getOpMode(kt)===M.iABC),E(M.getBMode(kt)!==M.OpArgN||0===St),E(M.getCMode(kt)!==M.OpArgN||0===It),E(Rt<=M.MAXARG_A&&St<=M.MAXARG_B&&It<=M.MAXARG_C),be(bt,M.CREATE_ABC(kt,Rt,St,It))},Re=function(bt,kt,Rt,St){return E(M.getOpMode(kt)===M.iABx||M.getOpMode(kt)===M.iAsBx),E(M.getCMode(kt)===M.OpArgN),E(Rt<=M.MAXARG_A&&St<=M.MAXARG_Bx),be(bt,M.CREATE_ABx(kt,Rt,St))},Se=function(bt,kt,Rt,St){return Re(bt,kt,Rt,St+M.MAXARG_sBx)},Ie=function(bt,kt){return E(kt<=M.MAXARG_Ax),be(bt,M.CREATE_Ax(Y.OP_EXTRAARG,kt))},Ne=function(bt,kt,Rt){if(Rt<=M.MAXARG_Bx)return Re(bt,Y.OP_LOADK,kt,Rt);let St=Re(bt,Y.OP_LOADKX,kt,0);return Ie(bt,Rt),St},Ce=function(bt,kt){let Rt=bt.freereg+kt;Rt>bt.f.maxstacksize&&(255<=Rt&&N.luaX_syntaxerror(bt.ls,I.to_luastring('function or expression needs too many registers',!0)),bt.f.maxstacksize=Rt)},Pe=function(bt,kt){Ce(bt,kt),bt.freereg+=kt},Me=function(bt,kt){!M.ISK(kt)&&kt>=bt.nactvar&&(bt.freereg--,E(kt===bt.freereg))},ye=function(bt,kt){kt.k===K.expkind.VNONRELOC&&Me(bt,kt.u.info)},De=function(bt,kt,Rt){let St=kt.k===K.expkind.VNONRELOC?kt.u.info:-1,It=Rt.k===K.expkind.VNONRELOC?Rt.u.info:-1;St>It?(Me(bt,St),Me(bt,It)):(Me(bt,It),Me(bt,St))},Ke=function(bt,kt,Rt){let St=bt.f,It=V.luaH_set(bt.L,bt.ls.h,kt);if(It.ttisinteger()){let Ct=It.value;if(Ct<bt.nk&&St.k[Ct].ttype()===Rt.ttype()&&St.k[Ct].value===Rt.value)return Ct}let Nt=bt.nk;return It.setivalue(Nt),St.k[Nt]=Rt,bt.nk++,Nt},we=function(bt,kt){let Rt=new J(H.LUA_TLIGHTUSERDATA,kt),St=new J(H.LUA_TNUMINT,kt);return Ke(bt,Rt,St)},Ge=function(bt,kt){let Rt=new J(H.LUA_TNUMFLT,kt);return Ke(bt,Rt,Rt)},Ve=function(bt,kt){let Rt=new J(H.LUA_TBOOLEAN,kt);return Ke(bt,Rt,Rt)},Fe=function(bt){let kt=new J(H.LUA_TNIL,null),Rt=new J(H.LUA_TTABLE,bt.ls.h);return Ke(bt,Rt,kt)},je=function(bt,kt,Rt){let St=K.expkind;if(kt.k===St.VCALL)M.SETARG_C(ue(bt,kt),Rt+1);else if(kt.k===St.VVARARG){let It=ue(bt,kt);M.SETARG_B(It,Rt+1),M.SETARG_A(It,bt.freereg),Pe(bt,1)}else E(Rt===I.LUA_MULTRET)},He=function(bt,kt){let Rt=K.expkind;kt.k===Rt.VCALL?(E(2===ue(bt,kt).C),kt.k=Rt.VNONRELOC,kt.u.info=ue(bt,kt).A):kt.k===Rt.VVARARG&&(M.SETARG_B(ue(bt,kt),2),kt.k=Rt.VRELOCABLE)},Ye=function(bt,kt){let Rt=K.expkind;switch(kt.k){case Rt.VLOCAL:{kt.k=Rt.VNONRELOC;break}case Rt.VUPVAL:{kt.u.info=ke(bt,Y.OP_GETUPVAL,0,kt.u.info,0),kt.k=Rt.VRELOCABLE;break}case Rt.VINDEXED:{let St;Me(bt,kt.u.ind.idx),kt.u.ind.vt===Rt.VLOCAL?(Me(bt,kt.u.ind.t),St=Y.OP_GETTABLE):(E(kt.u.ind.vt===Rt.VUPVAL),St=Y.OP_GETTABUP),kt.u.info=ke(bt,St,0,kt.u.ind.t,kt.u.ind.idx),kt.k=Rt.VRELOCABLE;break}case Rt.VVARARG:case Rt.VCALL:{He(bt,kt);break}default:}},ze=function(bt,kt,Rt,St){return ge(bt),ke(bt,Y.OP_LOADBOOL,kt,Rt,St)},Je=function(bt,kt,Rt){let St=K.expkind;switch(Ye(bt,kt),kt.k){case St.VNIL:{ae(bt,Rt,1);break}case St.VFALSE:case St.VTRUE:{ke(bt,Y.OP_LOADBOOL,Rt,kt.k===St.VTRUE,0);break}case St.VK:{Ne(bt,Rt,kt.u.info);break}case St.VKFLT:{Ne(bt,Rt,Ge(bt,kt.u.nval));break}case St.VKINT:{Ne(bt,Rt,we(bt,kt.u.ival));break}case St.VRELOCABLE:{let It=ue(bt,kt);M.SETARG_A(It,Rt);break}case St.VNONRELOC:{Rt!==kt.u.info&&ke(bt,Y.OP_MOVE,Rt,kt.u.info,0);break}default:return void E(kt.k===St.VJMP);}kt.u.info=Rt,kt.k=St.VNONRELOC},Ze=function(bt,kt){kt.k!==K.expkind.VNONRELOC&&(Pe(bt,1),Je(bt,kt,bt.freereg-1))},qe=function(bt,kt){for(;kt!==W;kt=se(bt,kt)){let Rt=Ae(bt,kt);if(Rt.opcode!==Y.OP_TESTSET)return!0}return!1},We=function(bt,kt,Rt){let St=K.expkind;if(Je(bt,kt,Rt),kt.k===St.VJMP&&(kt.t=oe(bt,kt.t,kt.u.info)),ee(kt)){let Nt=W,Ct=W,It;if(qe(bt,kt.t)||qe(bt,kt.f)){let Pt=kt.k===St.VJMP?W:_e(bt);Nt=ze(bt,Rt,0,1),Ct=ze(bt,Rt,1,0),Ue(bt,Pt)}It=ge(bt),xe(bt,kt.f,It,Rt,Nt),xe(bt,kt.t,It,Rt,Ct)}kt.f=kt.t=W,kt.u.info=Rt,kt.k=St.VNONRELOC},Qe=function(bt,kt){Ye(bt,kt),ye(bt,kt),Pe(bt,1),We(bt,kt,bt.freereg-1)},$e=function(bt,kt){if(Ye(bt,kt),kt.k===K.expkind.VNONRELOC){if(!ee(kt))return kt.u.info;if(kt.u.info>=bt.nactvar)return We(bt,kt,kt.u.info),kt.u.info}return Qe(bt,kt),kt.u.info},lt=function(bt,kt){ee(kt)?$e(bt,kt):Ye(bt,kt)},ut=function(bt,kt){let Rt=K.expkind,St=!1;switch(lt(bt,kt),kt.k){case Rt.VTRUE:kt.u.info=Ve(bt,!0),St=!0;break;case Rt.VFALSE:kt.u.info=Ve(bt,!1),St=!0;break;case Rt.VNIL:kt.u.info=Fe(bt),St=!0;break;case Rt.VKINT:kt.u.info=we(bt,kt.u.ival),St=!0;break;case Rt.VKFLT:kt.u.info=Ge(bt,kt.u.nval),St=!0;break;case Rt.VK:St=!0;break;default:}return St&&(kt.k=Rt.VK,kt.u.info<=M.MAXINDEXRK)?M.RKASK(kt.u.info):$e(bt,kt)},ot=function(bt,kt){let Rt=Ae(bt,kt.u.info);E(M.testTMode(Rt.opcode)&&Rt.opcode!==Y.OP_TESTSET&&Rt.opcode!==Y.OP_TEST),M.SETARG_A(Rt,!Rt.A)},_t=function(bt,kt,Rt){if(kt.k===K.expkind.VRELOCABLE){let St=ue(bt,kt);if(St.opcode===Y.OP_NOT)return bt.pc--,de(bt,Y.OP_TEST,St.B,0,!Rt)}return Ze(bt,kt),ye(bt,kt),de(bt,Y.OP_TESTSET,M.NO_REG,kt.u.info,Rt)},it=function(bt,kt){let Rt=K.expkind,St;switch(Ye(bt,kt),kt.k){case Rt.VJMP:{ot(bt,kt),St=kt.u.info;break}case Rt.VK:case Rt.VKFLT:case Rt.VKINT:case Rt.VTRUE:{St=W;break}default:{St=_t(bt,kt,0);break}}kt.f=oe(bt,kt.f,St),Ue(bt,kt.t),kt.t=W},pt=function(bt,kt){let Rt=K.expkind,St;switch(Ye(bt,kt),kt.k){case Rt.VJMP:{St=kt.u.info;break}case Rt.VNIL:case Rt.VFALSE:{St=W;break}default:{St=_t(bt,kt,1);break}}kt.t=oe(bt,kt.t,St),Ue(bt,kt.f),kt.f=W},ct=function(bt,kt){let Rt=K.expkind;switch(Ye(bt,kt),kt.k){case Rt.VNIL:case Rt.VFALSE:{kt.k=Rt.VTRUE;break}case Rt.VK:case Rt.VKFLT:case Rt.VKINT:case Rt.VTRUE:{kt.k=Rt.VFALSE;break}case Rt.VJMP:{ot(bt,kt);break}case Rt.VRELOCABLE:case Rt.VNONRELOC:{Ze(bt,kt),ye(bt,kt),kt.u.info=ke(bt,Y.OP_NOT,0,kt.u.info,0),kt.k=Rt.VRELOCABLE;break}}{let St=kt.f;kt.f=kt.t,kt.t=St}Te(bt,kt.f),Te(bt,kt.t)},ft=function(bt,kt,Rt){return bt===I.LUA_OPBAND||bt===I.LUA_OPBOR||bt===I.LUA_OPBXOR||bt===I.LUA_OPSHL||bt===I.LUA_OPSHR||bt===I.LUA_OPBNOT?!1!==F.tointeger(kt)&&!1!==F.tointeger(Rt):bt===I.LUA_OPDIV||bt===I.LUA_OPIDIV||bt===I.LUA_OPMOD?0!==Rt.value:1},Lt=function(bt,kt,Rt){let St=K.expkind,It,Nt;if(!(It=te(kt,!0))||!(Nt=te(Rt,!0))||!ft(bt,It,Nt))return 0;let Ct=new J;if(P.luaO_arith(null,bt,It,Nt,Ct),Ct.ttisinteger())kt.k=St.VKINT,kt.u.ival=Ct.value;else{let Pt=Ct.value;if(isNaN(Pt)||0===Pt)return!1;kt.k=St.VKFLT,kt.u.nval=Pt}return!0},At=function(bt,kt,Rt,St){let It=$e(bt,Rt);ye(bt,Rt),Rt.u.info=ke(bt,kt,0,It,0),Rt.k=K.expkind.VRELOCABLE,Et(bt,St)},ht=function(bt,kt,Rt,St,It){let Nt=ut(bt,St),Ct=ut(bt,Rt);De(bt,Rt,St),Rt.u.info=ke(bt,kt,0,Ct,Nt),Rt.k=K.expkind.VRELOCABLE,Et(bt,It)},Tt=function(bt,kt,Rt,St){let It=K.expkind,Nt;Rt.k===It.VK?Nt=M.RKASK(Rt.u.info):(E(Rt.k===It.VNONRELOC),Nt=Rt.u.info);let Ct=ut(bt,St);switch(De(bt,Rt,St),kt){case Q.OPR_NE:{Rt.u.info=de(bt,Y.OP_EQ,0,Nt,Ct);break}case Q.OPR_GT:case Q.OPR_GE:{let Pt=kt-Q.OPR_NE+Y.OP_EQ;Rt.u.info=de(bt,Pt,1,Ct,Nt);break}default:{let Pt=kt-Q.OPR_EQ+Y.OP_EQ;Rt.u.info=de(bt,Pt,1,Nt,Ct);break}}Rt.k=It.VJMP},Et=function(bt,kt){bt.f.lineinfo[bt.pc-1]=kt};T.exports.BinOpr=Q,T.exports.NO_JUMP=W,T.exports.UnOpr=$,T.exports.getinstruction=ue,T.exports.luaK_checkstack=Ce,T.exports.luaK_code=be,T.exports.luaK_codeABC=ke,T.exports.luaK_codeABx=Re,T.exports.luaK_codeAsBx=Se,T.exports.luaK_codek=Ne,T.exports.luaK_concat=oe,T.exports.luaK_dischargevars=Ye,T.exports.luaK_exp2RK=ut,T.exports.luaK_exp2anyreg=$e,T.exports.luaK_exp2anyregup=function(bt,kt){(kt.k!==K.expkind.VUPVAL||ee(kt))&&$e(bt,kt)},T.exports.luaK_exp2nextreg=Qe,T.exports.luaK_exp2val=lt,T.exports.luaK_fixline=Et,T.exports.luaK_getlabel=ge,T.exports.luaK_goiffalse=pt,T.exports.luaK_goiftrue=it,T.exports.luaK_indexed=function(bt,kt,Rt){let St=K.expkind;E(!ee(kt)&&(K.vkisinreg(kt.k)||kt.k===St.VUPVAL)),kt.u.ind.t=kt.u.info,kt.u.ind.idx=ut(bt,Rt),kt.u.ind.vt=kt.k===St.VUPVAL?St.VUPVAL:St.VLOCAL,kt.k=St.VINDEXED},T.exports.luaK_infix=function(bt,kt,Rt){switch(kt){case Q.OPR_AND:{it(bt,Rt);break}case Q.OPR_OR:{pt(bt,Rt);break}case Q.OPR_CONCAT:{Qe(bt,Rt);break}case Q.OPR_ADD:case Q.OPR_SUB:case Q.OPR_MUL:case Q.OPR_DIV:case Q.OPR_IDIV:case Q.OPR_MOD:case Q.OPR_POW:case Q.OPR_BAND:case Q.OPR_BOR:case Q.OPR_BXOR:case Q.OPR_SHL:case Q.OPR_SHR:{te(Rt,!1)||ut(bt,Rt);break}default:{ut(bt,Rt);break}}},T.exports.luaK_intK=we,T.exports.luaK_jump=_e,T.exports.luaK_jumpto=function(bt,kt){return Ee(bt,_e(bt),kt)},T.exports.luaK_nil=ae,T.exports.luaK_numberK=Ge,T.exports.luaK_patchclose=function(bt,kt,Rt){for(Rt++;kt!==W;kt=se(bt,kt)){let St=bt.f.code[kt];E(St.opcode===Y.OP_JMP&&(0===St.A||St.A>=Rt)),M.SETARG_A(St,Rt)}},T.exports.luaK_patchlist=Ee,T.exports.luaK_patchtohere=Ue,T.exports.luaK_posfix=function(bt,kt,Rt,St,It){let Nt=K.expkind;switch(kt){case Q.OPR_AND:{E(Rt.t===W),Ye(bt,St),St.f=oe(bt,St.f,Rt.f),Rt.to(St);break}case Q.OPR_OR:{E(Rt.f===W),Ye(bt,St),St.t=oe(bt,St.t,Rt.t),Rt.to(St);break}case Q.OPR_CONCAT:{lt(bt,St);let Ct=ue(bt,St);St.k===Nt.VRELOCABLE&&Ct.opcode===Y.OP_CONCAT?(E(Rt.u.info===Ct.B-1),ye(bt,Rt),M.SETARG_B(Ct,Rt.u.info),Rt.k=Nt.VRELOCABLE,Rt.u.info=St.u.info):(Qe(bt,St),ht(bt,Y.OP_CONCAT,Rt,St,It));break}case Q.OPR_ADD:case Q.OPR_SUB:case Q.OPR_MUL:case Q.OPR_DIV:case Q.OPR_IDIV:case Q.OPR_MOD:case Q.OPR_POW:case Q.OPR_BAND:case Q.OPR_BOR:case Q.OPR_BXOR:case Q.OPR_SHL:case Q.OPR_SHR:{Lt(kt+I.LUA_OPADD,Rt,St)||ht(bt,kt+Y.OP_ADD,Rt,St,It);break}case Q.OPR_EQ:case Q.OPR_LT:case Q.OPR_LE:case Q.OPR_NE:case Q.OPR_GT:case Q.OPR_GE:{Tt(bt,kt,Rt,St);break}}return Rt},T.exports.luaK_prefix=function(bt,kt,Rt,St){let It=new K.expdesc;switch(It.k=K.expkind.VKINT,It.u.ival=It.u.nval=It.u.info=0,It.t=W,It.f=W,kt){case $.OPR_MINUS:case $.OPR_BNOT:if(Lt(kt+I.LUA_OPUNM,Rt,It))break;case $.OPR_LEN:At(bt,kt+Y.OP_UNM,Rt,St);break;case $.OPR_NOT:ct(bt,Rt);}},T.exports.luaK_reserveregs=Pe,T.exports.luaK_ret=function(bt,kt,Rt){ke(bt,Y.OP_RETURN,kt,Rt+1,0)},T.exports.luaK_self=function(bt,kt,Rt){$e(bt,kt);let St=kt.u.info;ye(bt,kt),kt.u.info=bt.freereg,kt.k=K.expkind.VNONRELOC,Pe(bt,2),ke(bt,Y.OP_SELF,kt.u.info,St,ut(bt,Rt)),ye(bt,Rt)},T.exports.luaK_setlist=function(bt,kt,Rt,St){let It=(Rt-1)/M.LFIELDS_PER_FLUSH+1,Nt=St===I.LUA_MULTRET?0:St;E(0!==St&&St<=M.LFIELDS_PER_FLUSH),It<=M.MAXARG_C?ke(bt,Y.OP_SETLIST,kt,Nt,It):It<=M.MAXARG_Ax?(ke(bt,Y.OP_SETLIST,kt,Nt,0),Ie(bt,It)):N.luaX_syntaxerror(bt.ls,I.to_luastring('constructor too long',!0)),bt.freereg=kt+1},T.exports.luaK_setmultret=function(bt,kt){je(bt,kt,I.LUA_MULTRET)},T.exports.luaK_setoneret=He,T.exports.luaK_setreturns=je,T.exports.luaK_storevar=function(bt,kt,Rt){let St=K.expkind;switch(kt.k){case St.VLOCAL:return ye(bt,Rt),void We(bt,Rt,kt.u.info);case St.VUPVAL:{let It=$e(bt,Rt);ke(bt,Y.OP_SETUPVAL,It,kt.u.info,0);break}case St.VINDEXED:{let It=kt.u.ind.vt===St.VLOCAL?Y.OP_SETTABLE:Y.OP_SETTABUP,Nt=ut(bt,Rt);ke(bt,It,kt.u.ind.t,kt.u.ind.idx,Nt);break}}ye(bt,Rt)},T.exports.luaK_stringK=function(bt,kt){let Rt=new J(H.LUA_TLNGSTR,kt);return Ke(bt,Rt,Rt)}},function(T,O,U){'use strict';const E=U(1),I=E.constant_types,K=16*_NumberparseInt(E.LUA_VERSION_MAJOR)+_NumberparseInt(E.LUA_VERSION_MINOR);class F{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}}const H=function(pe,ce,de){0===de.status&&0<ce&&(de.status=de.writer(de.L,pe,ce,de.data))},Y=function(pe,ce){pe=E.to_luastring(pe),H(pe,pe.length,ce)},J=function(pe,ce){H([pe],1,ce)},q=function(pe,ce){let de=new DataView(new ArrayBuffer(4));de.setInt32(0,pe,!0);let ge=[];for(let Le=0;4>Le;Le++)ge.push(de.getUint8(Le,!0));H(ge,4,ce)},W=function(pe,ce){let de=new DataView(new ArrayBuffer(4));de.setInt32(0,pe,!0);let ge=[];for(let Le=0;4>Le;Le++)ge.push(de.getUint8(Le,!0));H(ge,8,ce)},Q=function(pe,ce){let de=new DataView(new ArrayBuffer(8));de.setFloat64(0,pe,!0);let ge=[];for(let Le=0;8>Le;Le++)ge.push(de.getUint8(Le,!0));H(ge,8,ce)},$=function(pe,ce){if(null===pe)J(0,ce);else{let de=pe.tsslen()+1,ge=pe.getstr();255>de?J(de,ce):(J(255,ce),W(de,ce)),H(ge,de-1,ce)}},ee=function(pe,ce){let de=pe.code.map((ge)=>ge.code);q(de.length,ce);for(let ge=0;ge<de.length;ge++)q(de[ge],ce)},te=function(pe,ce){let de=pe.k.length;q(de,ce);for(let ge=0,Le;ge<de;ge++)switch(Le=pe.k[ge],J(Le.ttype(),ce),Le.ttype()){case I.LUA_TNIL:break;case I.LUA_TBOOLEAN:J(Le.value?1:0,ce);break;case I.LUA_TNUMFLT:Q(Le.value,ce);break;case I.LUA_TNUMINT:W(Le.value,ce);break;case I.LUA_TSHRSTR:case I.LUA_TLNGSTR:$(Le.tsvalue(),ce);}},ae=function(pe,ce){let de=pe.p.length;q(de,ce);for(let ge=0;ge<de;ge++)ne(pe.p[ge],pe.source,ce)},ue=function(pe,ce){let de=pe.upvalues.length;q(de,ce);for(let ge=0;ge<de;ge++)J(pe.upvalues[ge].instack?1:0,ce),J(pe.upvalues[ge].idx,ce)},se=function(pe,ce){let de=ce.strip?0:pe.lineinfo.length;q(de,ce);for(let ge=0;ge<de;ge++)q(pe.lineinfo[ge],ce);de=ce.strip?0:pe.locvars.length,q(de,ce);for(let ge=0;ge<de;ge++)$(pe.locvars[ge].varname,ce),q(pe.locvars[ge].startpc,ce),q(pe.locvars[ge].endpc,ce);de=ce.strip?0:pe.upvalues.length,q(de,ce);for(let ge=0;ge<de;ge++)$(pe.upvalues[ge].name,ce)},ne=function(pe,ce,de){de.strip||pe.source===ce?$(null,de):$(pe.source,de),q(pe.linedefined,de),q(pe.lastlinedefined,de),J(pe.numparams,de),J(pe.is_vararg?1:0,de),J(pe.maxstacksize,de),ee(pe,de),te(pe,de),ue(pe,de),ae(pe,de),se(pe,de)},oe=function(pe){Y(E.LUA_SIGNATURE,pe),J(K,pe),J(0,pe);let ce='\x19\x93\r\n\x1A\n'.split('').map((de)=>de.charCodeAt(0));H(ce,ce.length,pe),J(4,pe),J(4,pe),J(4,pe),J(4,pe),J(8,pe),W(22136,pe),Q(370.5,pe)};T.exports.luaU_dump=function(pe,ce,de,ge,Le){let Ae=new F;return Ae.L=pe,Ae.writer=de,Ae.data=ge,Ae.strip=Le,Ae.status=0,oe(Ae),J(ce.upvalues.length,Ae),ne(ce,null,Ae),Ae.status}},function(T,O,U){'use strict';const E=U(2),I=U(5),N=U(42),P=U(24),M=U(28),K=U(32),V=U(33),F=U(35),H=U(25),Y=U(30),J=U(29),q=U(34);T.exports.luaL_openlibs=function(Q){const $={[q.LUA_LOADLIBNAME]:J.luaopen_package,[q.LUA_COLIBNAME]:P.luaopen_coroutine,[q.LUA_DBLIBNAME]:H.luaopen_debug,[q.LUA_MATHLIBNAME]:M.luaopen_math,[q.LUA_OSLIBNAME]:Y.luaopen_os,[q.LUA_STRLIBNAME]:K.luaopen_string,[q.LUA_TABLIBNAME]:V.luaopen_table,[q.LUA_UTF8LIBNAME]:F.luaopen_utf8,_G:N.luaopen_base};for(let ee in!1,$)I.luaL_requiref(Q,E.to_luastring(ee),$[ee],1),E.lua_pop(Q,1)}},function(T,O,U){'use strict';const E=U(0),I=U(1),N=U(7),P=U(11),M=U(3),K=U(14),V=U(8),F=U(20);let H=[25,147,I.char['\r'],I.char['\n'],26,I.char['\n']];class Y{constructor(q,W,Q){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,E(W instanceof F.ZIO,'BytecodeParser only operates on a ZIO'),E(I.is_luastring(Q)),this.name=Q[0]==I.char['@']||Q[0]==I.char['=']?Q.slice(1):Q[0]==I.LUA_SIGNATURE.charCodeAt(0)?I.to_luastring('binary string',!0):Q,this.L=q,this.Z=W,this.arraybuffer=new ArrayBuffer(_Mathmax(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(q){let W=new Uint8Array(q);return 0!==F.luaZ_read(this.Z,W,0,q)&&this.error('truncated'),Array.from(W)}readByte(){return 0!==F.luaZ_read(this.Z,this.u8,0,1)&&this.error('truncated'),this.u8[0]}readInteger(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.integerSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readSize_t(){return this.readInteger()}readInt(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.intSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readNumber(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.numberSize)&&this.error('truncated'),this.dv.getFloat64(0,!0)}readString(){let q=_Mathmax(this.readByte()-1,0);return 255===q+1&&(q=this.readSize_t()-1),0===q?null:V.luaS_bless(this.L,this.read(q))}static MASK1(q,W){return~(-1<<q)<<W}static MASK0(q,W){return~Y.MASK1(q,W)}readInstruction(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.instructionSize)&&this.error('truncated'),this.dv.getUint32(0,!0)}readCode(q){let W=this.readInt(),Q=K,$=Y;for(let ee=0,te;ee<W;ee++)te=this.readInstruction(),q.code[ee]={code:te,opcode:te>>Q.POS_OP&$.MASK1(Q.SIZE_OP,0),A:te>>Q.POS_A&$.MASK1(Q.SIZE_A,0),B:te>>Q.POS_B&$.MASK1(Q.SIZE_B,0),C:te>>Q.POS_C&$.MASK1(Q.SIZE_C,0),Bx:te>>Q.POS_Bx&$.MASK1(Q.SIZE_Bx,0),Ax:te>>Q.POS_Ax&$.MASK1(Q.SIZE_Ax,0),sBx:(te>>Q.POS_Bx&$.MASK1(Q.SIZE_Bx,0))-Q.MAXARG_sBx}}readUpvalues(q){let W=this.readInt();for(let Q=0;Q<W;Q++)q.upvalues[Q]={name:null,instack:this.readByte(),idx:this.readByte()}}readConstants(q){let W=this.readInt();for(let Q=0,$;Q<W;Q++)$=this.readByte(),$===I.CT.LUA_TNIL?q.k.push(new M.TValue(I.CT.LUA_TNIL,null)):$===I.CT.LUA_TBOOLEAN?q.k.push(new M.TValue(I.CT.LUA_TBOOLEAN,0!==this.readByte())):$===I.CT.LUA_TNUMFLT?q.k.push(new M.TValue(I.CT.LUA_TNUMFLT,this.readNumber())):$===I.CT.LUA_TNUMINT?q.k.push(new M.TValue(I.CT.LUA_TNUMINT,this.readInteger())):$===I.CT.LUA_TSHRSTR||$===I.CT.LUA_TLNGSTR?q.k.push(new M.TValue(I.CT.LUA_TLNGSTR,this.readString())):this.error(`unrecognized constant '${$}'`)}readProtos(q){let W=this.readInt();for(let Q=0;Q<W;Q++)q.p[Q]=new P.Proto(this.L),this.readFunction(q.p[Q],q.source)}readDebug(q){let W=this.readInt();for(let Q=0;Q<W;Q++)q.lineinfo[Q]=this.readInt();W=this.readInt();for(let Q=0;Q<W;Q++)q.locvars[Q]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};W=this.readInt();for(let Q=0;Q<W;Q++)q.upvalues[Q].name=this.readString()}readFunction(q,W){q.source=this.readString(),null===q.source&&(q.source=W),q.linedefined=this.readInt(),q.lastlinedefined=this.readInt(),q.numparams=this.readByte(),q.is_vararg=0!==this.readByte(),q.maxstacksize=this.readByte(),this.readCode(q),this.readConstants(q),this.readUpvalues(q),this.readProtos(q),this.readDebug(q)}checkliteral(q,W){let Q=this.read(q.length);Q.join()!==q.join()&&this.error(W)}checkHeader(){this.checkliteral(I.to_luastring(I.LUA_SIGNATURE.substring(1)),'not a'),83!==this.readByte()&&this.error('version mismatch in'),0!==this.readByte()&&this.error('format mismatch in'),this.checkliteral(H,'corrupted'),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,'int'),this.checksize(this.size_tSize,4,'size_t'),this.checksize(this.instructionSize,4,'instruction'),this.checksize(this.integerSize,4,'integer'),this.checksize(this.numberSize,8,'number'),22136!==this.readInteger()&&this.error('endianness mismatch in'),370.5!==this.readNumber()&&this.error('float format mismatch in')}error(q){M.luaO_pushfstring(this.L,I.to_luastring('%s: %s precompiled chunk'),this.name,I.to_luastring(q)),N.luaD_throw(this.L,I.thread_status.LUA_ERRSYNTAX)}checksize(q,W,Q){q!==W&&this.error(`${Q} size mismatch in`)}}T.exports.luaU_undump=function(q,W,Q){let $=new Y(q,W,Q);$.checkHeader();let ee=P.luaF_newLclosure(q,$.readByte());return N.luaD_inctop(q),q.stack[q.top-1].setclLvalue(ee),ee.p=new P.Proto(q),$.readFunction(ee.p,null),E(ee.nupvalues===ee.p.upvalues.length),ee}},function(T,O){O.read=function(U,E,I,N,P){var V=8*P-N-1,F=(1<<V)-1,H=F>>1,Y=-7,J=I?P-1:0,q=I?-1:1,W=U[E+J],M,K;for(J+=q,M=W&(1<<-Y)-1,W>>=-Y,Y+=V;0<Y;M=256*M+U[E+J],J+=q,Y-=8);for(K=M&(1<<-Y)-1,M>>=-Y,Y+=N;0<Y;K=256*K+U[E+J],J+=q,Y-=8);if(0===M)M=1-H;else{if(M===F)return K?NaN:(W?-1:1)*Infinity;K+=_Mathpow(2,N),M-=H}return(W?-1:1)*K*_Mathpow(2,M-N)},O.write=function(U,E,I,N,P,M){var H=8*M-P-1,Y=(1<<H)-1,J=Y>>1,q=23===P?5.960464477539063e-8-6.617444900424222e-24:0,W=N?0:M-1,Q=N?1:-1,$=0>E||0===E&&0>1/E?1:0,K,V,F;for(E=_Mathabs(E),isNaN(E)||E===Infinity?(V=isNaN(E)?1:0,K=Y):(K=_Mathfloor(_Mathlog(E)/Math.LN2),1>E*(F=_Mathpow(2,-K))&&(K--,F*=2),E+=1<=K+J?q/F:q*_Mathpow(2,1-J),2<=E*F&&(K++,F/=2),K+J>=Y?(V=0,K=Y):1<=K+J?(V=(E*F-1)*_Mathpow(2,P),K+=J):(V=E*_Mathpow(2,J-1)*_Mathpow(2,P),K=0));8<=P;U[I+W]=255&V,W+=Q,V/=256,P-=8);for(K=K<<P|V,H+=P;0<H;U[I+W]=255&K,W+=Q,K/=256,H-=8);U[I+W-Q]|=128*$}},function(T){var U={}.toString;T.exports=Array.isArray||function(E){return'[object Array]'==U.call(E)}},function(T,O,U){var E=U(50),I=U(52),N=U(55),P=U(54),M=U(53),K=U(51),V=U(56);V.alea=E,V.xor128=I,V.xorwow=N,V.xorshift7=P,V.xor4096=M,V.tychei=K,T.exports=V},function(T,O,U){(function(E){var I;(function(N,P){function K(Y){var J=this,q=H();J.next=function(){var W=2091639*J.s0+2.3283064365386963e-10*J.c;return J.s0=J.s1,J.s1=J.s2,J.s2=W-(J.c=0|W)},J.c=1,J.s0=q(' '),J.s1=q(' '),J.s2=q(' '),J.s0-=q(Y),0>J.s0&&(J.s0+=1),J.s1-=q(Y),0>J.s1&&(J.s1+=1),J.s2-=q(Y),0>J.s2&&(J.s2+=1),q=null}function V(Y,J){return J.c=Y.c,J.s0=Y.s0,J.s1=Y.s1,J.s2=Y.s2,J}function F(Y,J){var q=new K(Y),W=J&&J.state,Q=q.next;return Q.int32=function(){return 0|4294967296*q.next()},Q.double=function(){return Q()+1.1102230246251565e-16*(0|2097152*Q())},Q.quick=Q,W&&('object'==typeof W&&V(W,q),Q.state=function(){return V(q,{})}),Q}function H(){var Y=4022871197;return function(q){q=q.toString();for(var W=0;W<q.length;W++){Y+=q.charCodeAt(W);var Q=0.02519603282416938*Y;Y=Q>>>0,Q-=Y,Q*=Y,Y=Q>>>0,Q-=Y,Y+=4294967296*Q}return 2.3283064365386963e-10*(Y>>>0)}}P&&P.exports?P.exports=F:U(4)&&U(17)?(I=function(){return F}.call(O,U,O,P),!(void 0!==I&&(P.exports=I))):this.alea=F})(this,'object'==typeof E&&E,U(4))}).call(O,U(18)(T))},function(T,O,U){(function(E){var I;(function(N,P){function K(H){var Y=this,J='';Y.next=function(){var W=Y.b,Q=Y.c,$=Y.d,ee=Y.a;return W=W<<25^W>>>7^Q,Q=0|Q-$,$=$<<24^$>>>8^ee,ee=0|ee-W,Y.b=W=W<<20^W>>>12^Q,Y.c=Q=0|Q-$,Y.d=$<<16^Q>>>16^ee,Y.a=0|ee-W},Y.a=0,Y.b=0,Y.c=-1640531527,Y.d=1367130551,H===_Mathfloor(H)?(Y.a=0|H/4294967296,Y.b=0|H):J+=H;for(var q=0;q<J.length+20;q++)Y.b^=0|J.charCodeAt(q),Y.next()}function V(H,Y){return Y.a=H.a,Y.b=H.b,Y.c=H.c,Y.d=H.d,Y}function F(H,Y){var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&('object'==typeof q&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(4)&&U(17)?(I=function(){return F}.call(O,U,O,P),!(void 0!==I&&(P.exports=I))):this.tychei=F})(this,'object'==typeof E&&E,U(4))}).call(O,U(18)(T))},function(T,O,U){(function(E){var I;(function(N,P){function K(H){var Y=this,J='';Y.x=0,Y.y=0,Y.z=0,Y.w=0,Y.next=function(){var W=Y.x^Y.x<<11;return Y.x=Y.y,Y.y=Y.z,Y.z=Y.w,Y.w^=Y.w>>>19^W^W>>>8},H===(0|H)?Y.x=H:J+=H;for(var q=0;q<J.length+64;q++)Y.x^=0|J.charCodeAt(q),Y.next()}function V(H,Y){return Y.x=H.x,Y.y=H.y,Y.z=H.z,Y.w=H.w,Y}function F(H,Y){var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&('object'==typeof q&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(4)&&U(17)?(I=function(){return F}.call(O,U,O,P),!(void 0!==I&&(P.exports=I))):this.xor128=F})(this,'object'==typeof E&&E,U(4))}).call(O,U(18)(T))},function(T,O,U){(function(E){var I;(function(N,P){function K(H){var J=this;J.next=function(){var q=J.w,W=J.X,Q=J.i,$,ee;return J.w=q=0|q+1640531527,ee=W[127&Q+34],$=W[Q=127&Q+1],ee^=ee<<13,$^=$<<17,ee^=ee>>>15,$^=$>>>12,ee=W[Q]=ee^$,J.i=Q,0|ee+(q^q>>>16)},function(q,W){var ue=[],se=128,Q,$,ee,te,ae;for(W===(0|W)?($=W,W=null):(W+='\0',$=0,se=_Mathmax(se,W.length)),ee=0,te=-32;te<se;++te)W&&($^=W.charCodeAt((te+32)%W.length)),0===te&&(ae=$),$^=$<<10,$^=$>>>15,$^=$<<4,$^=$>>>13,0<=te&&(ae=0|ae+1640531527,Q=ue[127&te]^=$+ae,ee=0==Q?ee+1:0);for(128<=ee&&(ue[127&(W&&W.length||0)]=-1),ee=127,te=512;0<te;--te)$=ue[127&ee+34],Q=ue[ee=127&ee+1],$^=$<<13,Q^=Q<<17,$^=$>>>15,Q^=Q>>>12,ue[ee]=$^Q;q.w=ae,q.X=ue,q.i=ee}(J,H)}function V(H,Y){return Y.i=H.i,Y.w=H.w,Y.X=H.X.slice(),Y}function F(H,Y){null==H&&(H=+new Date);var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&(q.X&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(4)&&U(17)?(I=function(){return F}.call(O,U,O,P),!(void 0!==I&&(P.exports=I))):this.xor4096=F})(this,'object'==typeof E&&E,U(4))}).call(O,U(18)(T))},function(T,O,U){(function(E){var I;(function(N,P){function K(H){var J=this;J.next=function(){var q=J.x,W=J.i,Q,$;return Q=q[W],Q^=Q>>>7,$=Q^Q<<24,Q=q[7&W+1],$^=Q^Q>>>10,Q=q[7&W+3],$^=Q^Q>>>3,Q=q[7&W+4],$^=Q^Q<<7,Q=q[7&W+7],Q^=Q<<13,$^=Q^Q<<9,q[W]=$,J.i=7&W+1,$},function(q,W){var ee=[],Q,$;if(W===(0|W))$=ee[0]=W;else for(W=''+W,Q=0;Q<W.length;++Q)ee[7&Q]=ee[7&Q]<<15^W.charCodeAt(Q)+ee[7&Q+1]<<13;for(;8>ee.length;)ee.push(0);for(Q=0;8>Q&&0===ee[Q];++Q);for($=8==Q?ee[7]=-1:ee[Q],q.x=ee,q.i=0,Q=256;0<Q;--Q)q.next()}(J,H)}function V(H,Y){return Y.x=H.x.slice(),Y.i=H.i,Y}function F(H,Y){null==H&&(H=+new Date);var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&(q.x&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(4)&&U(17)?(I=function(){return F}.call(O,U,O,P),!(void 0!==I&&(P.exports=I))):this.xorshift7=F})(this,'object'==typeof E&&E,U(4))}).call(O,U(18)(T))},function(T,O,U){(function(E){var I;(function(N,P){function K(H){var Y=this,J='';Y.next=function(){var W=Y.x^Y.x>>>2;return Y.x=Y.y,Y.y=Y.z,Y.z=Y.w,Y.w=Y.v,0|(Y.d=0|Y.d+362437)+(Y.v=Y.v^Y.v<<4^(W^W<<1))},Y.x=0,Y.y=0,Y.z=0,Y.w=0,Y.v=0,H===(0|H)?Y.x=H:J+=H;for(var q=0;q<J.length+64;q++)Y.x^=0|J.charCodeAt(q),q==J.length&&(Y.d=Y.x<<10^Y.x>>>4),Y.next()}function V(H,Y){return Y.x=H.x,Y.y=H.y,Y.z=H.z,Y.w=H.w,Y.v=H.v,Y.d=H.d,Y}function F(H,Y){var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&('object'==typeof q&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(4)&&U(17)?(I=function(){return F}.call(O,U,O,P),!(void 0!==I&&(P.exports=I))):this.xorwow=F})(this,'object'==typeof E&&E,U(4))}).call(O,U(18)(T))},function(T,O,U){var E;(function(I,N){function P(ne,oe,_e){var pe=[];oe=!0==oe?{entropy:!0}:oe||{};var ce=F(V(oe.entropy?[ne,Y(I)]:null==ne?H():ne,3),pe),de=new M(pe),ge=function(){for(var Le=de.g(W),Ae=ee,he=0;Le<te;)Le=(Le+he)*q,Ae*=q,he=de.g(1);for(;Le>=ae;)Le/=2,Ae/=2,he>>>=1;return(Le+he)/Ae};return ge.int32=function(){return 0|de.g(4)},ge.quick=function(){return de.g(4)/4294967296},ge.double=ge,F(Y(de.S),I),(oe.pass||_e||function(Le,Ae,he,Te){return Te&&(Te.S&&K(Te,de),Le.state=function(){return K(de,{})}),he?(N[$]=Le,Ae):Le})(ge,ce,'global'in oe?oe.global:this==N,oe.state)}function M(ne){var _e=ne.length,pe=this,ce=0,de=pe.i=pe.j=0,ge=pe.S=[],oe;for(_e||(ne=[_e++]);ce<q;)ge[ce]=ce++;for(ce=0;ce<q;ce++)ge[ce]=ge[de=ue&de+ne[ce%_e]+(oe=ge[ce])],ge[de]=oe;(pe.g=function(Le){for(var he=0,Te=pe.i,xe=pe.j,Oe=pe.S,Ae;Le--;)Ae=Oe[Te=ue&Te+1],he=he*q+Oe[ue&(Oe[Te]=Oe[xe=ue&xe+Ae])+(Oe[xe]=Ae)];return pe.i=Te,pe.j=xe,he})(q)}function K(ne,oe){return oe.i=ne.i,oe.j=ne.j,oe.S=ne.S.slice(),oe}function V(ne,oe){var _e=[],pe=typeof ne,ce;if(oe&&'object'==pe)for(ce in ne)try{_e.push(V(ne[ce],oe-1))}catch(de){}return _e.length?_e:'string'==pe?ne:ne+'\0'}function F(ne,oe){for(var _e=ne+'',ce=0,pe;ce<_e.length;)oe[ue&ce]=ue&(pe^=19*oe[ue&ce])+_e.charCodeAt(ce++);return Y(oe)}function H(){try{var ne;return se&&(ne=se.randomBytes)?ne=ne(q):(ne=new Uint8Array(q),(J.crypto||J.msCrypto).getRandomValues(ne)),Y(ne)}catch(pe){var oe=J.navigator,_e=oe&&oe.plugins;return[+new Date,J,_e,J.screen,Y(I)]}}function Y(ne){return _StringfromCharCode.apply(0,ne)}var J=this,q=256,W=6,$='random',ee=N.pow(q,W),te=N.pow(2,52),ae=2*te,ue=q-1,se;if(N['seed'+$]=P,F(N.random(),I),'object'==typeof T&&T.exports){T.exports=P;try{se=U(61)}catch(ne){}}else E=function(){return P}.call(O,U,O,T),!(void 0!==E&&(T.exports=E))})([],Math)},function(T){(function(){function U(W,Q,$){function te(pe,ce,de,ge){for(var Le='',Ae=null,he=!1,Te=pe.length,xe=!1,Oe=0,Ue;Oe<Te;Oe++){if(Ue=pe.charCodeAt(Oe),!0==he){if(45===Ue){Ae='';continue}else if(95===Ue){Ae=' ';continue}else if(48===Ue){Ae='0';continue}else if(58===Ue){xe&&V('[WARNING] detected use of unsupported %:: or %::: modifiers to strftime'),xe=!0;continue}switch(Ue){case 37:Le+='%';break;case 65:Le+=de.days[ce.getDay()];break;case 66:Le+=de.months[ce.getMonth()];break;case 67:Le+=E(_Mathfloor(ce.getFullYear()/100),Ae);break;case 68:Le+=te(de.formats.D,ce,de,ge);break;case 70:Le+=te(de.formats.F,ce,de,ge);break;case 72:Le+=E(ce.getHours(),Ae);break;case 73:Le+=E(N(ce.getHours()),Ae);break;case 76:Le+=I(_Mathfloor(ge%1e3));break;case 77:Le+=E(ce.getMinutes(),Ae);break;case 80:Le+=12>ce.getHours()?de.am:de.pm;break;case 82:Le+=te(de.formats.R,ce,de,ge);break;case 83:Le+=E(ce.getSeconds(),Ae);break;case 84:Le+=te(de.formats.T,ce,de,ge);break;case 85:Le+=E(P(ce,'sunday'),Ae);break;case 87:Le+=E(P(ce,'monday'),Ae);break;case 88:Le+=te(de.formats.X,ce,de,ge);break;case 89:Le+=ce.getFullYear();break;case 90:if(se&&0===ue)Le+='GMT';else{var Ee=ce.toString().match(/\(([\w\s]+)\)/);Le+=Ee&&Ee[1]||''}break;case 97:Le+=de.shortDays[ce.getDay()];break;case 98:Le+=de.shortMonths[ce.getMonth()];break;case 99:Le+=te(de.formats.c,ce,de,ge);break;case 100:Le+=E(ce.getDate(),Ae);break;case 101:Le+=E(ce.getDate(),null==Ae?' ':Ae);break;case 104:Le+=de.shortMonths[ce.getMonth()];break;case 106:var ve=new Date(ce.getFullYear(),0,1),be=_Mathceil((ce.getTime()-ve.getTime())/86400000);Le+=I(be);break;case 107:Le+=E(ce.getHours(),null==Ae?' ':Ae);break;case 108:Le+=E(N(ce.getHours()),null==Ae?' ':Ae);break;case 109:Le+=E(ce.getMonth()+1,Ae);break;case 110:Le+='\n';break;case 111:var be=ce.getDate();Le+=de.ordinalSuffixes?be+''+(de.ordinalSuffixes[be-1]||M(be)):be+''+M(be);break;case 112:Le+=12>ce.getHours()?de.AM:de.PM;break;case 114:Le+=te(de.formats.r,ce,de,ge);break;case 115:Le+=_Mathfloor(ge/1e3);break;case 116:Le+='\t';break;case 117:var be=ce.getDay();Le+=0===be?7:be;break;case 118:Le+=te(de.formats.v,ce,de,ge);break;case 119:Le+=ce.getDay();break;case 120:Le+=te(de.formats.x,ce,de,ge);break;case 121:Le+=(''+ce.getFullYear()).slice(2);break;case 122:if(se&&0===ue)Le+=xe?'+00:00':'+0000';else{var ke=0===ue?-ce.getTimezoneOffset():ue/60000,Re=0>ke?'-':'+',Se=xe?':':'',Ie=_Mathfloor(_Mathabs(ke/60)),Ne=_Mathabs(ke%60);Le+=Re+E(Ie)+Se+E(Ne)}break;default:he&&(Le+='%'),Le+=pe[Oe];}Ae=null,he=!1;continue}if(37===Ue){he=!0;continue}Le+=pe[Oe]}return Le}var ae=W||H,ue=Q||0,se=$||!1,ne=0,_e=function(pe,ce){var de;if(!ce){var ge=Date.now();ge>ne?(ne=ge,oe=new Date(ne),de=ne,se&&(oe=new Date(ne+K(oe)+ue))):de=ne,ce=oe}else if(de=ce.getTime(),se){var Le=K(ce);if(ce=new Date(de+Le+ue),K(ce)!==Le){var Ae=K(ce);ce=new Date(de+Ae+ue)}}return te(pe,ce,ae,de)},oe;return _e.localize=function(pe){return new U(pe||ae,ue,se)},_e.localizeByIdentifier=function(pe){var ce=F[pe];return ce?_e.localize(ce):(V('[WARNING] No locale found with identifier "'+pe+'".'),_e)},_e.timezone=function(pe){var ce=ue,de=se,ge=typeof pe;if('number'==ge||'string'==ge)if(de=!0,'string'==ge){var Le='-'===pe[0]?-1:1,Ae=parseInt(pe.slice(1,3),10),he=parseInt(pe.slice(3,5),10);ce=1e3*(60*(Le*(60*Ae+he)))}else'number'==ge&&(ce=1e3*(60*pe));return new U(ae,ce,de)},_e.utc=function(){return new U(ae,ue,!0)},_e}function E(W,Q){return''===Q||9<W?W:(null==Q&&(Q='0'),Q+W)}function I(W){return 99<W?W:9<W?'0'+W:'00'+W}function N(W){return 0===W?12:12<W?W-12:W}function P(W,Q){Q=Q||'sunday';var $=W.getDay();'monday'===Q&&(0===$?$=6:$--);var ee=Date.UTC(W.getFullYear(),0,1),te=Date.UTC(W.getFullYear(),W.getMonth(),W.getDate()),ae=_Mathfloor((te-ee)/8.64e7),ue=(ae+7-$)/7;return _Mathfloor(ue)}function M(W){var Q=W%10,$=W%100;return 11<=$&&13>=$||0==Q||4<=Q?'th':1==Q?'st':2==Q?'nd':3==Q?'rd':void 0}function K(W){return 6e4*(W.getTimezoneOffset()||0)}function V(W){'undefined'!=typeof console&&'function'==typeof console.warn&&console.warn(W)}var F={de_DE:{days:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],shortDays:['So','Mo','Di','Mi','Do','Fr','Sa'],months:['Januar','Februar','M\xE4rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],shortMonths:['Jan','Feb','M\xE4r','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d.%m.%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},en_CA:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},en_US:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%m/%d/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},es_MX:{days:['domingo','lunes','martes','mi\xE9rcoles','jueves','viernes','s\xE1bado'],shortDays:['dom','lun','mar','mi\xE9','jue','vie','s\xE1b'],months:['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre',' diciembre'],shortMonths:['ene','feb','mar','abr','may','jun','jul','ago','sep','oct','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},fr_FR:{days:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],shortDays:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],months:['janvier','f\xE9vrier','mars','avril','mai','juin','juillet','ao\xFBt','septembre','octobre','novembre','d\xE9cembre'],shortMonths:['janv.','f\xE9vr.','mars','avril','mai','juin','juil.','ao\xFBt','sept.','oct.','nov.','d\xE9c.'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},it_IT:{days:['domenica','luned\xEC','marted\xEC','mercoled\xEC','gioved\xEC','venerd\xEC','sabato'],shortDays:['dom','lun','mar','mer','gio','ven','sab'],months:['gennaio','febbraio','marzo','aprile','maggio','giugno','luglio','agosto','settembre','ottobre','novembre','dicembre'],shortMonths:['pr','mag','giu','lug','ago','set','ott','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},nl_NL:{days:['zondag','maandag','dinsdag','woensdag','donderdag','vrijdag','zaterdag'],shortDays:['zo','ma','di','wo','do','vr','za'],months:['januari','februari','maart','april','mei','juni','juli','augustus','september','oktober','november','december'],shortMonths:['jan','feb','mrt','apr','mei','jun','jul','aug','sep','okt','nov','dec'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},pt_BR:{days:['domingo','segunda','ter\xE7a','quarta','quinta','sexta','s\xE1bado'],shortDays:['Dom','Seg','Ter','Qua','Qui','Sex','S\xE1b'],months:['janeiro','fevereiro','mar\xE7o','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'],shortMonths:['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},ru_RU:{days:['\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435','\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A','\u0412\u0442\u043E\u0440\u043D\u0438\u043A','\u0421\u0440\u0435\u0434\u0430','\u0427\u0435\u0442\u0432\u0435\u0440\u0433','\u041F\u044F\u0442\u043D\u0438\u0446\u0430','\u0421\u0443\u0431\u0431\u043E\u0442\u0430'],shortDays:['\u0412\u0441','\u041F\u043D','\u0412\u0442','\u0421\u0440','\u0427\u0442','\u041F\u0442','\u0421\u0431'],months:['\u042F\u043D\u0432\u0430\u0440\u044C','\u0424\u0435\u0432\u0440\u0430\u043B\u044C','\u041C\u0430\u0440\u0442','\u0410\u043F\u0440\u0435\u043B\u044C','\u041C\u0430\u0439','\u0418\u044E\u043D\u044C','\u0418\u044E\u043B\u044C','\u0410\u0432\u0433\u0443\u0441\u0442','\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C','\u041E\u043A\u0442\u044F\u0431\u0440\u044C','\u041D\u043E\u044F\u0431\u0440\u044C','\u0414\u0435\u043A\u0430\u0431\u0440\u044C'],shortMonths:['\u044F\u043D\u0432','\u0444\u0435\u0432','\u043C\u0430\u0440','\u0430\u043F\u0440','\u043C\u0430\u0439','\u0438\u044E\u043D','\u0438\u044E\u043B','\u0430\u0432\u0433','\u0441\u0435\u043D','\u043E\u043A\u0442','\u043D\u043E\u044F','\u0434\u0435\u043A'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X',D:'%d.%m.%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},tr_TR:{days:['Pazar','Pazartesi','Sal\u0131','\xC7ar\u015Famba','Per\u015Fembe','Cuma','Cumartesi'],shortDays:['Paz','Pzt','Sal','\xC7r\u015F','Pr\u015F','Cum','Cts'],months:['Ocak','\u015Eubat','Mart','Nisan','May\u0131s','Haziran','Temmuz','A\u011Fustos','Eyl\xFCl','Ekim','Kas\u0131m','Aral\u0131k'],shortMonths:['Oca','\u015Eub','Mar','Nis','May','Haz','Tem','A\u011Fu','Eyl','Eki','Kas','Ara'],AM:'\xD6\xD6',PM:'\xD6S',am:'\xD6\xD6',pm:'\xD6S',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},zh_CN:{days:['\u661F\u671F\u65E5','\u661F\u671F\u4E00','\u661F\u671F\u4E8C','\u661F\u671F\u4E09','\u661F\u671F\u56DB','\u661F\u671F\u4E94','\u661F\u671F\u516D'],shortDays:['\u65E5','\u4E00','\u4E8C','\u4E09','\u56DB','\u4E94','\u516D'],months:['\u4E00\u6708\u4EFD','\u4E8C\u6708\u4EFD','\u4E09\u6708\u4EFD','\u56DB\u6708\u4EFD','\u4E94\u6708\u4EFD','\u516D\u6708\u4EFD','\u4E03\u6708\u4EFD','\u516B\u6708\u4EFD','\u4E5D\u6708\u4EFD','\u5341\u6708\u4EFD','\u5341\u4E00\u6708\u4EFD','\u5341\u4E8C\u6708\u4EFD'],shortMonths:['\u4E00\u6708','\u4E8C\u6708','\u4E09\u6708','\u56DB\u6708','\u4E94\u6708','\u516D\u6708','\u4E03\u6708','\u516B\u6708','\u4E5D\u6708','\u5341\u6708','\u5341\u4E00\u6708','\u5341\u4E8C\u6708'],AM:'\u4E0A\u5348',PM:'\u4E0B\u5348',am:'\u4E0A\u5348',pm:'\u4E0B\u5348',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}}},H=F.en_US,Y=new U(H,0,!1),q;'undefined'==typeof T?(q=function(){return this||(1,eval)('this')}(),q.strftime=Y):q=T.exports=Y,'function'!=typeof Date.now&&(Date.now=function(){return+new Date})})()},function(T){T.exports='function'==typeof Object.create?function(E,I){E.super_=I,E.prototype=Object.create(I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}})}:function(E,I){E.super_=I;var N=function(){};N.prototype=I.prototype,E.prototype=new N,E.prototype.constructor=E}},function(T){T.exports=function(E){return E&&'object'==typeof E&&'function'==typeof E.copy&&'function'==typeof E.fill&&'function'==typeof E.readUInt8}},function(T,O,U){'use strict';window.WEB=!0;const E=U(23),I=E.lua,N=E.lauxlib,P=E.lualib,M=U(38),K=N.luaL_newstate();P.luaL_openlibs(K),N.luaL_requiref(K,I.to_luastring('js'),M.luaopen_js,1),I.lua_pop(K,1),I.lua_pushstring(K,I.to_luastring(I.FENGARI_COPYRIGHT)),I.lua_setglobal(K,I.to_luastring('_COPYRIGHT'));const V=function(Y,J){let q=N.luaL_loadbuffer(K,Y,null,J);if(q===I.LUA_OK&&(q=I.lua_pcall(K,0,0,0)),q!==I.LUA_OK){let W=N.luaL_tolstring(K,-1);I.lua_pop(K,1),console.error(I.to_jsstring(W))}},F=function(Y){return'anonymous'===Y?'omit':'use-credentials'===Y?'include':'same-origin'},H=function(Y){if(Y.src){let J='@'+Y.src;if('complete'===document.readyState||Y.async)fetch(Y.src,{method:'GET',credentials:F(Y.crossorigin),redirect:'follow',integrity:Y.integrity}).then(function(q){q.ok&&q.arrayBuffer().then(function(W){let Q=Array.from(new Uint8Array(W));V(Q,I.to_luastring(J))})});else{let q=new XMLHttpRequest;q.open('GET',Y.src,!1),q.send();let W=q.response;V(I.to_luastring(W),I.to_luastring(J))}}else{let J=Y.innerHTML,q=Y.id?'='+Y.id:J;V(I.to_luastring(J),I.to_luastring(q))}};new MutationObserver(function(Y){for(let q=0;q<Y.length;q++)for(let W=0,Q;W<Y[q].addedNodes.length;W++)Q=Y[q].addedNodes[W],'SCRIPT'==Q.tagName&&'text/lua'==Q.type&&H(Q)}).observe(document,{childList:!0,subtree:!0}),Array.prototype.forEach.call(document.querySelectorAll('script[type="text/lua"]'),H)},function(){}]);